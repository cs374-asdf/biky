{"version":3,"sources":["data/badge.js","container/BadgeDetail.js","component/Avatar.js","util/format.js","component/journal/DateComponent.js","util/icon.js","component/journal/JournalItem.js","component/Loading.js","component/journal/PictureList.js","component/home/StaticMap.js","component/journal/JournalDetail.js","component/journal/JournalList.js","component/common/SearchBar.js","component/friend/Frequest.js","component/friend/LinearProgressBar.js","component/friend/FriendItem.js","component/friend/Friends.js","container/Profile.js","container/Friends.js","component/home/Weather.js","component/home/DustBar.js","component/home/Dust.js","component/home/Distance.js","component/home/Time.js","data/route.js","component/home/Map.js","component/home/StartButton.js","component/home/StopButton.js","component/home/MetaphorContainer.js","component/home/MetaphorTaxi.js","component/home/MetaphorBurger.js","component/home/MetaphorTree.js","component/home/JournalModal.js","data/photo.js","container/Home.js","component/journal/FriendSimpleView.js","component/journal/AppBar.js","component/journal/FriendAddPage.js","component/journal/FriendItem.js","component/journal/HashtagSelector.js","component/journal/PhotoUploader.js","component/journal/JournalForm.js","data/journal.js","container/journal/JournalEditor.js","container/journal/JournalMain.js","container/Login.js","container/LoginInitial.js","container/MyPage.js","component/NavigationBar.js","NotFound.js","container/Tutorial.js","firebaseInit.js","App.js","reportWebVitals.js","index.js"],"names":["badges","oid","thumbnail","title","description","useStyles","makeStyles","theme","root","flexGrow","padding","spacing","paper","badgeBox","width","height","maxHeight","maxWidth","overflow","badge","margin","display","borderRadius","eachBadge","buttonBase","borderBottom","arrow","bold","fontWeight","fontSize","BadgeDetail","mainBadge","changeMainBadge","classes","history","useHistory","map","idx","ButtonBase","className","style","backgroundColor","onClick","console","log","Grid","container","item","Box","src","process","alt","xs","direction","Typography","variant","align","p","push","Paper","marginBottom","border","marginTop","nullToList","list","formatTime","time","hours","parseInt","minutes","formatDistance","distance","toFixed","DateComponent","startTime","endTime","formatted","dayjs","format","getIconComponent","key","icon","cryingFace","faceWithSymbolsOnMouth","rollingOnTheFloorLaughing","sleepingFace","droolingFace","faceWithThermometer","sunIcon","cloudIcon","cloudWithRain","dogIcon","catIcon","dodoIcon","getIcon","hashtagsDB","getHashtags","hashtags","temp","hashtag","getFriends","friends","friend","mr","Avatar","name","picture","flexDirection","flexWrap","tree","taxi","burger","GetMetaphors","metaphor","icon_name","sent","cn","Math","floor","random","deciduousTree","oncomingTaxi","hamburgerIcon","Card","alignItems","position","top","left","emojiItem","emoji","iconComp","boxShadow","justifyContent","JournalItem","journal","openJournal","emojis","id","flex","minHeight","component","textOverflow","wordWrap","whiteSpace","my","textAlign","Loading","CircularProgress","color","hashtagGroup","palette","primary","light","titleBar","background","gridList","PictureList","pictures","removePicture","isEditing","useTheme","breakpoints","keys","reverse","reduce","output","matches","useMediaQuery","up","useWidth","cols","isWidthUp","getGridListCols","cellHeight","getGridListCellHeight","GridList","pic","index","GridListTile","GridListTileBar","actionIcon","IconButton","aria-label","StaticMap","props","route","zoom","length","startCoordinates","endCoordinates","mapContainer","useRef","useEffect","current","mapboxgl","Map","center","on","addSource","type","data","properties","geometry","coordinates","addLayer","source","layout","paint","features","ref","accessToken","row","centeredRow","actions","JournalDetail","handleClose","paddingBottom","Button","alert","disabled","Link","to","date","desc","metaphors","photos","JournalList","journals","friendsByJournal","journalList","_","sortBy","Date","createdAt","menuButton","marginRight","search","shape","fade","common","white","marginLeft","searchIcon","pointerEvents","inputRoot","inputInput","paddingLeft","transition","transitions","create","SearchBar","InputBase","placeholder","input","inputProps","shadows","mailIcon","ReceivedElement","Accordion","expanded","AccordionSummary","minWidth","onAcceptClick","onRejectClick","Frequest","React","useState","transform","modalStyle","open","setOpen","body","frequests","el","Divider","Badge","badgeContent","Modal","onClose","aria-labelledby","aria-describedby","ProgressStyles","pro_bar","progress_bar_inner","content","backgroundImage","backgroundSize","right","LinearProgressBar","value","data-value","data-percentage-value","JournalEntry","FriendItem","diff","total_intimacy","expandIcon","FriendListItemInner","AccordionDetails","FriendList","alignSelf","flist","fillTable","journalsByFriend","textDecorationLine","textDecorationColor","Profile","page","verticalAlign","header","avatar","Friends","journalRef","friendRef","frequestRef","setFrequests","friendlist","setFriendlist","setJournalsByFriend","snapshot","friendData","val","once","Object","values","i","f","filter","j","includes","getJournalsByFriend","frequestData","fid","child","remove","newFriend","set","paddingRight","randomInt","min","max","getImgURL","weather","getTemperature","Weather","temperature","bar","slider","paddingTop","DustBar","amount","percentage","text","status","Dust","fineDust","ultraFineDust","fineDustAmount","fineDustStatus","ultraFineDustAmount","ultraFineDustStatus","Distance","Time","routeStart","routeOri","routeEnd","fullRoute","swapColumns","array","newArray","InnerMap","lng","lat","setZoom","setCenter","getSource","setData","isRiding","mode","setLng","setLat","setRoute","slice","saveRoute","StartButton","button","StopButton","MetaphorContainer","MetaphorTaxi","MetaphorBurger","MetaphorTree","img","modal","overflowY","outline","alignContent","half","label","LightTooltip","withStyles","tooltip","Tooltip","JournalModal","closeModal","tooltipOpen","place","size","handleJournal","allPhotos","getRandomPhoto","num","arr","n","result","Array","len","taken","RangeError","x","getRandom","weatherContainer","measuresContainer","zIndex","measures","buttonContainer","buttonText","startButton","main","stopButton","weatherTypes","getRidingTime","wizard","startPauseTime","endPauseTime","spHour","spMin","split","epHour","epMin","resultTime","getRidingPlace","Home","wizardRef","setIsRiding","setDistance","setTime","setIndex","setWeather","increment","setHashtags","setStartTime","setWizard","setMode","setTooltipOpen","wiz","journalData","clearInterval","createJournal","add","randomPhotos","randomTitle","randomTitles","getRandomTitle","ridingTime","newJournal","toString","setInterval","opacity","abled","FriendSimpleView","m","mt","mb","ml","MyAppBar","onSubmit","string","AppBar","Toolbar","edge","FriendSelector","FriendAddPage","allFriends","selectedFriends","addFriend","removeFriend","close","getSuggestionValue","suggestion","HashtagSelector","handleSubmit","setValue","suggestions","setSuggestions","handleSubmitEnter","e","preventDefault","h","onChange","event","newValue","onSuggestionsFetchRequested","reason","escapedValue","trim","replace","regex","RegExp","test","getSuggestions","onSuggestionsClearRequested","renderSuggestion","renderInputComponent","highlightFirstSuggestion","alwaysRenderSuggestions","photoSelector","PhotoUploader","addHashtag","imgData","setImgData","predictions","setPredictions","isLoading","setLoading","readImage","file","Promise","rs","rj","fileReader","FileReader","onload","onerror","error","readAsDataURL","detectObjectsOnImage","async","model","cocoSsd","detect","imageElement","class","concat","accept","multiple","target","from","files","document","createElement","htmlFor","animal","textField","addButton","submitButton","JournalForm","openFriendAddPage","onSubmitPictures","preference","setTitle","setDesc","changeSuggestion","forEach","fin","sort","a","b","firstQ","done","rand","rand2","inputRef","noValidate","autoComplete","TextField","defaultValue","focus","filtered","sug","contentSuggestion","multiline","rows","removeHashtag","mockJournal","hamburger","JournalEditor","storageRef","useParams","setJournal","loading","setAllFriends","setPreference","friendPageOpen","setFriendAddPageOpen","setPictures","setFriends","pictureLoading","setPictureLoading","pictureFiles","setPictureFiles","jid","String","setPrefData","objects","ids","flatten","flat","downloadURLs","promises","put","then","getDownloadURL","all","uploadImageFile","fetchPicture","selected","loadings","JournalMain","setJournals","setFriendsByJournal","friendList","getFriendsByJournal","setSelected","frequest","MyButton","styled","backgroundRepeat","grid","submit","login","logo","form","Login","db","setJournalRef","setFriendRef","setFrequestsRef","setVal","password","user","existed","hasChild","setDB","justify","required","fullWidth","character","roundBox","personalInfo","lineHeight","recordsContainer","metaphorContainer","metaphorItem","ShowMetaphors","image","MyPage","bottom","withRouter","window","location","pathname","listen","action","BottomNavigation","BottomNavigationAction","NotFound","getUrl","pageNum","Tutorial","setPageNum","backgroundPosition","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","storage","fire","database","createMuiTheme","typography","fontFamily","secondary","App","setMainBadge","setRef","setImage","ThemeProvider","NavigationBar","path","exact","render","href","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.8482553a.chunk.js","sourcesContent":["\r\nconst badge0 = \"/images/sick.jpg\";\r\nconst badge1 = \"/images/cat.png\";\r\nconst badge2 = \"/images/fry.png\";\r\nconst badge3 = \"/images/squirrel.png\";\r\n\r\nexport const badges = [\r\n  {\r\n    oid: 0,\r\n    thumbnail: badge0,\r\n    title: \"Ride a Bike Too Much\",\r\n    description:\r\n      \"You rode a bike too much and even did lots of assignments. You should take care of your body.\",\r\n  },\r\n  {\r\n    oid: 1,\r\n    thumbnail: badge1,\r\n    title: \"Meet lots of cute cats\",\r\n    description: \"You met lots of cute cats. Cats are perfect.\",\r\n  },\r\n  {\r\n    oid: 2,\r\n    thumbnail: badge2,\r\n    title: \"Become fried egg\",\r\n    description:\r\n      \"You rode a bike in sunny day very often. You may become fried egg.\",\r\n  },\r\n  {\r\n    oid: 3,\r\n    thumbnail: badge3,\r\n    title: \"Wow a squirrel\",\r\n    description:\r\n      \"You met a squirrel while riding a bike. It is very unique experience\",\r\n  },\r\n];\r\n","import React, { useState } from \"react\";\r\n\r\nimport ArrowBackIosOutlinedIcon from \"@material-ui/icons/ArrowBackIosOutlined\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { badges } from '../data/badge'\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  badgeBox: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    maxHeight: \"50px\",\r\n    maxWidth: \"50px\",\r\n    overflow: \"hidden\",\r\n  },\r\n  badge: {\r\n    margin: \"auto\",\r\n    display: \"block\",\r\n    width: \"50px\",\r\n    height: \"50px\",\r\n    borderRadius: \"50%\",\r\n  },\r\n  eachBadge: {\r\n    margin: theme.spacing(2, 0),\r\n  },\r\n  buttonBase: {\r\n    width: \"98%\",\r\n    borderBottom: \"dotted 1px lightgray\",\r\n  },\r\n  arrow: {\r\n    margin: theme.spacing(1, 1),\r\n  },\r\n\r\n  bold: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"20px\",\r\n  },\r\n}));\r\n\r\n\r\nexport default function BadgeDetail({mainBadge, changeMainBadge}) {\r\n  const classes = useStyles();\r\n  let history = useHistory();\r\n\r\n  function backward() {\r\n    history.push(\"/biky/myPage\");\r\n  }\r\n\r\n  const eachBadge = badges.map((badge, idx) => (\r\n    <ButtonBase\r\n      className={classes.buttonBase}\r\n      style={\r\n        idx === mainBadge ? { backgroundColor: \"lightgray\" } : {}\r\n      }\r\n      onClick={() => {\r\n        changeMainBadge(badge.oid);\r\n        console.log(mainBadge);\r\n      }}\r\n      key={idx}\r\n    >\r\n      <Grid container spacing={2} className={classes.eachBadge}>\r\n        <Grid item>\r\n          <Box className={classes.badgeBox}>\r\n            <img\r\n              className={classes.badge}\r\n              src={process.env.PUBLIC_URL + badge.thumbnail}\r\n              alt={badge.title}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n\r\n        <Grid item xs container direction=\"column\" spacing={2}>\r\n          <Grid item xs>\r\n            <Typography variant=\"h6\" align=\"left\">\r\n              {badge.title}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs>\r\n            <Typography variant=\"body2\" align=\"left\">\r\n              {badge.description}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </ButtonBase>\r\n  ));\r\n\r\n  return (\r\n    <Box p={3}>\r\n    <ButtonBase onClick={backward}>\r\n        <ArrowBackIosOutlinedIcon\r\n          className={classes.arrow}\r\n        ></ArrowBackIosOutlinedIcon>\r\n      </ButtonBase>\r\n\r\n        <Paper className={classes.root}>\r\n          <Typography className={classes.bold} style={{ marginBottom: \"10px\" }}>\r\n          Representative Badge\r\n        </Typography>\r\n\r\n          <Grid container spacing={2}>\r\n            <Grid item>\r\n              <Box className={classes.badgeBox}>\r\n                <img\r\n                  className={classes.badge}\r\n                  src={\r\n                    process.env.PUBLIC_URL +\r\n                    badges[mainBadge].thumbnail\r\n                  }\r\n                  alt=\"Representative Badge\"\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs container direction=\"column\" spacing={2}>\r\n              <Grid item xs>\r\n                <Typography variant=\"h6\">\r\n                  {badges[mainBadge].title}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item xs>\r\n                <Typography variant=\"body2\">\r\n                  {badges[mainBadge].description}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n\r\n        <Paper className={classes.root} style={{border: \"solid 1px lightgray\", marginTop: 10}}>\r\n        <Typography className={classes.bold} style={{ marginBottom: \"10px\" }}>\r\n        Other Badges\r\n        </Typography>\r\n\r\n        <div\r\n          style={{\r\n            overflow: \"scroll\",\r\n            maxHeight: \"calc(100vh - 390px)\",\r\n          }}>\r\n                    {eachBadge}\r\n\r\n        </div>\r\n        </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import { deepOrange, deepPurple } from '@material-ui/core/colors'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport { Link } from 'react-router-dom'\r\nimport React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    '& > *': {\r\n      // margin: theme.spacing(1),\r\n    },\r\n  },\r\n}))\r\n\r\nexport default function LetterAvatars() {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Avatar\r\n        src={process.env.PUBLIC_URL + '/images/nayeon.png'}\r\n        component={Link}\r\n        to=\"/biky/myPage\"\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","export function toList(objects) {\r\n  if (!objects) return [];\r\n  return Object.values(objects);\r\n}\r\n\r\nexport function nullToList(list) {\r\n  if (!list) return [];\r\n  return list;\r\n}\r\n\r\nexport function formatTime(time) {\r\n  const hours = parseInt(time / 60);\r\n  const minutes = parseInt(time % 60);\r\n  return `${hours > 0 ? `${hours} hr${hours > 1 ? \"s\" : \"\"} ` : \" \"}${\r\n    minutes >= 0 ? `${minutes} min${minutes > 1 ? \"s\" : \"\"}` : \"\"\r\n  }`;\r\n}\r\n\r\nexport function formatDistance(distance) {\r\n  if (distance < 1) {\r\n    return `${(distance * 1000).toFixed(0)}m`;\r\n  } else {\r\n    return `${distance.toFixed(2)}km`;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function DateComponent({ startTime, endTime }) {\r\n  const formatted = dayjs(startTime).format(\"YYYY. M. D.\");\r\n  const start = dayjs(startTime).format(\"H시 M분\");\r\n  const end = dayjs(endTime).format(\"H시 M분\");\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h6\">{formatted}</Typography>\r\n    </div>\r\n  );\r\n}\r\n","// npm install --save-dev @iconify/react @iconify-icons/twemoji\r\n\r\nimport { Icon, InlineIcon } from \"@iconify/react\";\r\n\r\nimport catIcon from \"@iconify-icons/twemoji/cat\"; // 고양이\r\nimport cloudIcon from \"@iconify-icons/twemoji/cloud\"; // 구름\r\nimport cloudWithRain from \"@iconify-icons/twemoji/cloud-with-rain\"; // 비\r\nimport cloudWithSnow from \"@iconify-icons/twemoji/cloud-with-snow\"; // 눈\r\nimport cryingFace from \"@iconify-icons/twemoji/crying-face\"; // 눈물\r\nimport deciduousTree from \"@iconify-icons/twemoji/deciduous-tree\"; // 나무\r\nimport dodoIcon from '@iconify-icons/twemoji/dodo';\r\nimport dogIcon from \"@iconify-icons/twemoji/dog\"; // 강아지\r\nimport dollarBanknote from \"@iconify-icons/twemoji/dollar-banknote\"; // 돈\r\nimport droolingFace from \"@iconify-icons/twemoji/drooling-face\"; // 아마도 맛있는게 있어서 침흘림\r\nimport faceWithSymbolsOnMouth from \"@iconify-icons/twemoji/face-with-symbols-on-mouth\"; // 욕나옴\r\nimport faceWithThermometer from \"@iconify-icons/twemoji/face-with-thermometer\"; // 이시국에 열남\r\nimport firstQuarterMoonFace from \"@iconify-icons/twemoji/first-quarter-moon-face\"; // 달\r\nimport grinningFace from \"@iconify-icons/twemoji/grinning-face\"; // 웃음\r\nimport hamburgerIcon from \"@iconify-icons/twemoji/hamburger\"; // 햄버거\r\nimport hotBeverage from \"@iconify-icons/twemoji/hot-beverage\"; // 커피 (핫)\r\nimport redHeart from \"@iconify-icons/twemoji/red-heart\"; // 하트\r\nimport rollingOnTheFloorLaughing from \"@iconify-icons/twemoji/rolling-on-the-floor-laughing\"; // 데굴데굴 웃음\r\nimport shortcakeIcon from \"@iconify-icons/twemoji/shortcake\"; // 케이크\r\nimport sleepingFace from \"@iconify-icons/twemoji/sleeping-face\"; // 졸림\r\nimport sunIcon from \"@iconify-icons/twemoji/sun\"; // 해\r\nimport taxiIcon from \"@iconify-icons/twemoji/taxi\"; // 택시\r\n\r\n// 날씨\r\n\r\n\r\n\r\n\r\n\r\n// 감정\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// 무언가 해시태그와 연결지어서 쓸 만한 것들\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// 메타포\r\n\r\n\r\n\r\n\r\n\r\n<Icon icon={cloudIcon} />; // 이런식으로 불러다가 넣으면 됩니다\r\n\r\nexport function getIconComponent(key)\r\n{\r\n  const icon = getIcon(key)\r\n  if (!icon) return null;\r\n  return <Icon icon={icon} width=\"2em\"/> \r\n}\r\n\r\n\r\nexport function getIcon(key)\r\n{\r\n  switch (key)\r\n  {\r\n    case \"sad\":\r\n    case \"힝\":\r\n    case \"슬프다\":\r\n      return cryingFace\r\n\r\n    case \"angry\":\r\n    case \"화나네\":\r\n      return faceWithSymbolsOnMouth\r\n    \r\n    case \"excited\":\r\n    case \"happy\":\r\n    case \"행복해\":\r\n    case \"기부니가 좋아요\":\r\n      return rollingOnTheFloorLaughing\r\n\r\n    case \"tired\":\r\n    case \"exhausted\":\r\n    case \"졸림\":\r\n    case \"sleepy\":\r\n      return sleepingFace\r\n\r\n    case \"존맛\":\r\n    case \"delicious\":\r\n    case \"yummy\":\r\n      return droolingFace\r\n\r\n    case \"이시국\":\r\n    case \"fever\":\r\n    case \"sick\":\r\n    case \"아파요\":\r\n      return faceWithThermometer\r\n\r\n    case \"sunny\":\r\n      return sunIcon\r\n    case \"cloudy\":\r\n      return cloudIcon\r\n    case \"rainy\":\r\n      return cloudWithRain\r\n\r\n    case \"dog\":\r\n      return dogIcon\r\n\r\n    case \"cat\":\r\n      return catIcon\r\n\r\n    case \"goose\":\r\n    case \"bird\":\r\n      return dodoIcon\r\n\r\n    default:\r\n      return null\r\n  }\r\n}\r\n\r\nexport const hashtagsDB = [\r\n    \"happy\", \"sick\", \"dog\", \"cat\", \"angry\", \r\n    \"excited\", \"tired\", \"exhausted\", \"sleepy\", \r\n    \"delicious\", \"yummy\", \"sunny\", \"cloudy\", \"rainy\"\r\n]","import { formatDistance, formatTime } from \"../../util/format\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport DateComponent from \"./DateComponent\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport deciduousTree from \"@iconify-icons/twemoji/deciduous-tree\"; // 나무\r\nimport { getIconComponent } from \"../../util/icon\";\r\nimport hamburgerIcon from \"@iconify-icons/twemoji/hamburger\"; // 햄버거\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { nullToList } from \"../../util/format\";\r\nimport oncomingTaxi from \"@iconify-icons/twemoji/oncoming-taxi\";\r\nimport polyline from \"@mapbox/polyline\";\r\n\r\nexport function getDivs(items) {\r\n  if (!items) return <div> empty </div>;\r\n  return items.map((item) => (\r\n    <div style={{ display: \"inline\" }} key={item}>\r\n      {\" \"}\r\n      {item}{\" \"}\r\n    </div>\r\n  ));\r\n}\r\n\r\nexport function getHashtags(hashtags) {\r\n  if (!hashtags) return \"no hashtags yet\";\r\n  var temp = \"\";\r\n  hashtags.map((hashtag) => (temp += \"#\" + hashtag + \" \"));\r\n  return temp;\r\n}\r\n\r\nexport function getFriends(friends) {\r\n  // console.log(friends);\r\n  if (!friends) return <div> no friends... </div>;\r\n  var temp = friends.map((friend) => (\r\n    <Box mr={1}>\r\n      <Avatar\r\n        alt={friend.name}\r\n        src={process.env.PUBLIC_URL + friend.picture}\r\n        style={{\r\n          border: \"1.5px solid lightgray\",\r\n          width: \"30px\",\r\n          height: \"30px\",\r\n        }}\r\n      />\r\n    </Box>\r\n  ));\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"row\" flexWrap=\"wrap\">\r\n      {temp}\r\n    </Box>\r\n  );\r\n}\r\nconst useStyles = makeStyles((theme) => ({\r\n  tree: {\r\n    // background: \"linear-gradient(45deg, #73A15D, #94C25A)\",\r\n    height: \"40px\",\r\n    width: \"100%\",\r\n    borderRadius: \"5px\",\r\n  },\r\n  taxi: {\r\n    // background: \"linear-gradient(45deg, #A0BFE3, #F0A2B0)\",\r\n    height: \"40px\",\r\n    width: \"100%\",\r\n    borderRadius: \"5px\",\r\n  },\r\n  burger: {\r\n    // background: \"linear-gradient(45deg, #EED28B, #DB7E61)\",\r\n    height: \"40px\",\r\n    width: \"100%\",\r\n    borderRadius: \"5px\",\r\n  },\r\n}));\r\n\r\nexport function GetMetaphors(metaphor) {\r\n  const classes = useStyles();\r\n  if (!metaphor) return <div> empty metaphor </div>;\r\n  var randomIndex = Math.floor(Math.random() * 3);\r\n  var sent = \"\";\r\n  var icon_name;\r\n  var cn = \"\";\r\n  switch (randomIndex) {\r\n    case 0: {\r\n      console.log(\"tree\");\r\n      sent = metaphor.tree.toFixed(2) + \" trees\";\r\n      icon_name = deciduousTree;\r\n      cn = classes.tree;\r\n      break;\r\n    }\r\n\r\n    case 1: {\r\n      console.log(\"taxi\");\r\n      sent = metaphor.taxi.toFixed(0) + \" won\";\r\n      icon_name = oncomingTaxi;\r\n      cn = classes.taxi;\r\n      break;\r\n    }\r\n\r\n    case 2: {\r\n      console.log(\"burger\");\r\n      sent = metaphor.burger.toFixed(2) + \" burgers\";\r\n      icon_name = hamburgerIcon;\r\n      cn = classes.burger;\r\n      break;\r\n    }\r\n  }\r\n  return (\r\n    <Card className={cn} style={{ width: \"170px\", height: \"40px\" }}>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Icon\r\n          style={{\r\n            position: \"relative\",\r\n            top: \"2px\",\r\n            left: \"15px\",\r\n            height: \"35px\",\r\n            fontSize: 40,\r\n          }}\r\n          icon={icon_name}\r\n        />\r\n        <Typography\r\n          variant=\"body1\"\r\n          style={{\r\n            fontSize: \"1em\",\r\n            // color: \"white\",\r\n            position: \"relative\",\r\n            top: \"2px\",\r\n            left: \"25px\",\r\n          }}\r\n        >\r\n          {sent}\r\n        </Typography>\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport function emojiItem(emoji) {\r\n  const iconComp = getIconComponent(emoji)\r\n  if (!iconComp) return null;\r\n  return (\r\n    <Box\r\n      borderRadius=\"50%\"\r\n      style={{\r\n        backgroundColor: \"white\",\r\n        boxShadow: \"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)\",\r\n      }}\r\n      width=\"40px\"\r\n      height=\"40px\"\r\n      display=\"flex\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      mr={1}\r\n      key={emoji}\r\n    >\r\n      <Box>{iconComp}</Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction generateurl(route) {\r\n  var url = \"https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/\";\r\n  var urlb =\r\n    \")/auto/100x100?access_token=pk.eyJ1IjoiYmFieWNyb2MiLCJhIjoiY2tvaW5rMWlpMDE3czJ3cWYyMXZkZmxidiJ9.8m_FmwtsgjCBUq2Jq9wVcg\";\r\n  var corRoute = [];\r\n  route.map((el) => corRoute.push([el[1], el[0]]));\r\n  const out = encodeURIComponent(polyline.encode(corRoute));\r\n  url +=\r\n    \"pin-s+0000ff(\" +\r\n    corRoute[0][1] +\r\n    \",\" +\r\n    corRoute[0][0] +\r\n    \"),pin-s+ff0000(\" +\r\n    corRoute[corRoute.length - 1][1] +\r\n    \",\" +\r\n    corRoute[corRoute.length - 1][0] +\r\n    \"),path(\";\r\n  url = url.concat(out, urlb);\r\n  // console.log(url);\r\n  return url;\r\n}\r\n\r\nexport default function JournalItem({ journal, openJournal, friends }) {\r\n  if (!journal) return null;\r\n  const emojis = nullToList(journal.hashtags).map(emojiItem);\r\n  return (\r\n    <Card\r\n      onClick={() => openJournal(journal)}\r\n      style={{\r\n        margin: \"35px\",\r\n        padding: \"15px\",\r\n        flexDirection: \"column\",\r\n      }}\r\n      display=\"flex\"\r\n      id={journal.id + \"main\"}\r\n    >\r\n      <Box flex={1} minHeight=\"40px\" display=\"flex\" flexDirection=\"row\">\r\n        <Box flex={4}>\r\n          <DateComponent\r\n            startTime={journal.startTime}\r\n            endTime={journal.endTime}\r\n          />\r\n        </Box>\r\n        <Box flex={4} display=\"flex\" flexDirection=\"row-reverse\">\r\n          {emojis}\r\n        </Box>\r\n      </Box>\r\n      <Box flex={1} display=\"flex\" flexDirection=\"row\">\r\n        <Box\r\n          component=\"div\"\r\n          textOverflow=\"ellipsis\"\r\n          overflow=\"hidden\"\r\n          style={{\r\n            wordWrap: \"breakWord\",\r\n            whiteSpace: \"nowrap\",\r\n            fontSize: \"x-large\",\r\n          }}\r\n        >\r\n          {journal.title}\r\n        </Box>\r\n      </Box>\r\n      {/* <Divider /> */}\r\n      <Box flex={2} my={2}>\r\n        <Box\r\n          component=\"div\"\r\n          textOverflow=\"ellipsis\"\r\n          overflow=\"hidden\"\r\n          style={{\r\n            wordWrap: \"breakWord\",\r\n            whiteSpace: \"nowrap\",\r\n            fontSize: \"small\",\r\n          }}\r\n        >\r\n          {getHashtags(journal.hashtags)}\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box flex={1} my={1} display=\"flex\" flexDirection=\"row\">\r\n        <Box flex={1}>{getFriends(friends)}</Box>\r\n        <Box\r\n          flex={1}\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          style={{ textAlign: \"right\" }}\r\n        >\r\n          <Box style={{ fontSize: \"x-small\" }}>{formatTime(journal.time)}</Box>\r\n          <Box style={{ fontSize: \"x-large\" }}>\r\n            {formatDistance(journal.distance)}\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Card>\r\n  );\r\n}\r\n\r\n// https://stackoverflow.com/questions/42483449/mapbox-gl-js-export-map-to-png-or-pdf\r\n","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport React from 'react'\r\n\r\nexport default function Loading()\r\n{\r\n  return <div style={{\r\n    // position: 'fixed',\r\n    width: '100%',\r\n    height: '100%',\r\n    // marginTop: '50%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    display: 'flex'\r\n  }}>\r\n    <CircularProgress color=\"secondary\" /> \r\n    </div>\r\n} ","import withWidth, { isWidthUp } from \"@material-ui/core/withWidth\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport GridList from \"@material-ui/core/GridList\";\r\nimport GridListTile from \"@material-ui/core/GridListTile\";\r\nimport GridListTileBar from \"@material-ui/core/GridListTileBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Loading from \"../Loading\";\r\nimport React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    \"& > *\": {\r\n      margin: theme.spacing(1),\r\n      width: \"80%\",\r\n    },\r\n  },\r\n\r\n  hashtagGroup: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n  },\r\n\r\n  title: {\r\n    color: theme.palette.primary.light,\r\n  },\r\n  titleBar: {\r\n    background:\r\n      \"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)\",\r\n  },\r\n\r\n  gridList: {},\r\n\r\n  picture: {\r\n    borderRadius: 25,\r\n  },\r\n}));\r\n\r\nfunction useWidth() {\r\n  const theme = useTheme();\r\n  const keys = [...theme.breakpoints.keys].reverse();\r\n  return (\r\n    keys.reduce((output, key) => {\r\n      // eslint-disable-next-line react-hooks/rules-of-hooks\r\n      const matches = useMediaQuery(theme.breakpoints.up(key));\r\n      return !output && matches ? key : output;\r\n    }, null) || \"xs\"\r\n  );\r\n}\r\n\r\nconst getGridListCols = (width) => {\r\n  if (isWidthUp(\"xl\", width)) {\r\n    return 5;\r\n  }\r\n\r\n  if (isWidthUp(\"lg\", width)) {\r\n    return 4;\r\n  }\r\n\r\n  if (isWidthUp(\"md\", width)) {\r\n    return 3;\r\n  }\r\n\r\n  return 3;\r\n};\r\n\r\nconst getGridListCellHeight = (width) => {\r\n  if (isWidthUp(\"xl\", width)) {\r\n    return 200;\r\n  }\r\n\r\n  if (isWidthUp(\"lg\", width)) {\r\n    return 150;\r\n  }\r\n\r\n  return 100;\r\n};\r\n\r\nexport default function PictureList({ pictures, removePicture, isEditing }) {\r\n  const classes = useStyles();\r\n  const width = useWidth();\r\n\r\n  if (!pictures) return null;\r\n\r\n  const cols = getGridListCols(width);\r\n  const cellHeight = getGridListCellHeight(width);\r\n\r\n  return (\r\n    <GridList\r\n      cellHeight={cellHeight}\r\n      className={classes.gridList}\r\n      cols={cols}\r\n      spacing={12}\r\n    >\r\n      {pictures.map((pic, index) => (\r\n        <GridListTile key={pic === 'loading' ? `loading${index}` : pic} className={classes.picture}\r\n        onClick={() => console.log(pic)}\r\n        \r\n        >\r\n          {(pic === 'loading') ? \r\n            <Loading/> : <img src={pic} alt=\"bike\" />}\r\n          {isEditing && (\r\n            <GridListTileBar\r\n              classes={{\r\n                root: classes.titleBar,\r\n                title: classes.title,\r\n              }}\r\n              actionIcon={\r\n                <IconButton\r\n                  aria-label={`delete ${pic}`}\r\n                  onClick={() => removePicture(pic)}\r\n                >\r\n                  <DeleteIcon className={classes.title} />\r\n                </IconButton>\r\n              }\r\n            />\r\n          )}\r\n        </GridListTile>\r\n      ))}\r\n    </GridList>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport mapboxgl from \"mapbox-gl\";\r\n\r\nconst useStyles = makeStyles({\r\n  map: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    textAlign: \"center\",\r\n    display: \"inline-block\",\r\n    // border: \"solid 1px black\"\r\n  },\r\n});\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API\r\n\r\nexport default function StaticMap(props) {\r\n  const classes = useStyles();\r\n  var route = props.route ? props.route : [];\r\n  var zoom = props.zoom ? props.zoom : 14;\r\n  var width = props.width ? props.width : \"100%\";\r\n  var height = props.height ? props.height : \"300px\";\r\n  var length = route.length;\r\n  var startCoordinates = route[0];\r\n  var endCoordinates = route[length - 1];\r\n\r\n  // console.log(route)\r\n\r\n  const mapContainer = useRef(null);\r\n  const map = useRef(null);\r\n  // console.log(mapContainer.current);\r\n  useEffect(() => {\r\n    if (map.current) return; // initialize map only once\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: \"mapbox://styles/mapbox/streets-v11\",\r\n      center: endCoordinates,\r\n      zoom: zoom,\r\n    });\r\n    map.current.on(\"load\", function () {\r\n      // if (props.resize) \r\n      // map.resize();\r\n\r\n      map.current.addSource(\"route\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"Feature\",\r\n          properties: {},\r\n          geometry: {\r\n            type: \"LineString\",\r\n            coordinates: route,\r\n          },\r\n        },\r\n      });\r\n      map.current.addLayer({\r\n        id: \"route\",\r\n        type: \"line\",\r\n        source: \"route\",\r\n        layout: {\r\n          \"line-join\": \"round\",\r\n          \"line-cap\": \"round\",\r\n        },\r\n        paint: {\r\n          \"line-color\": \"#888\",\r\n          \"line-width\": 4,\r\n        },\r\n      });\r\n\r\n      map.current.addSource(\"start\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: [\r\n            {\r\n              type: \"Feature\",\r\n              properties: {},\r\n              geometry: {\r\n                type: \"Point\",\r\n                coordinates: startCoordinates,\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      });\r\n      map.current.addLayer({\r\n        id: \"start\",\r\n        type: \"circle\",\r\n        source: \"start\",\r\n        paint: {\r\n          \"circle-radius\": 5,\r\n          \"circle-color\": \"#0000FF\",\r\n          \"circle-opacity\": 1,\r\n        },\r\n      });\r\n\r\n      map.current.addSource(\"end\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: [\r\n            {\r\n              type: \"Feature\",\r\n              properties: {},\r\n              geometry: {\r\n                type: \"Point\",\r\n                coordinates: endCoordinates,\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      });\r\n      map.current.addLayer({\r\n        id: \"end\",\r\n        type: \"circle\",\r\n        source: \"end\",\r\n        paint: {\r\n          \"circle-radius\": 5,\r\n          \"circle-color\": \"#FF0000\",\r\n          \"circle-opacity\": 1,\r\n        },\r\n      });\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div style={{ width: width, height: height }}>\r\n      <div ref={mapContainer} className={classes.map} />\r\n    </div>\r\n  );\r\n}\r\n","import { GetMetaphors, emojiItem, getFriends, getHashtags } from \"./JournalItem\";\r\nimport { formatDistance, formatTime, nullToList } from \"../../util/format\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PictureList from \"./PictureList\";\r\nimport React from \"react\";\r\nimport StaticMap from \"../home/StaticMap\";\r\nimport dayjs from \"dayjs\";\r\nimport { getIconComponent } from \"../../util/icon\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  row: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"flex-end\",\r\n    marginBottom: \"20px\",\r\n  },\r\n\r\n  centeredRow: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: \"20px\",\r\n  },\r\n\r\n  actions: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginBottom: \"20px\",\r\n  },\r\n}));\r\n\r\n// function formatTime(time) {\r\n//   console.log('time: ', time)\r\n//   return dayjs(time).format('YYYY년 M월 D일 H시 m분') // '25/01/2019'\r\n// }\r\n\r\n// function getTime(start, end) {\r\n//   return (\r\n//     <div>\r\n//       {formatTime(start)} 부터 {formatTime(end)} 까지\r\n//     </div>\r\n//   )\r\n// }\r\n\r\nexport default function JournalDetail({ journal, friends, handleClose }) {\r\n  const classes = useStyles();\r\n\r\n  if (!journal) return null;\r\n\r\n  const emojis = nullToList(journal.hashtags).map(getIconComponent);\r\n\r\n  return (\r\n    <Card\r\n      style={{\r\n        margin: \"20px\",\r\n        padding: \"20px\",\r\n        maxHeight: \"90%\",\r\n        flexDirection: \"column\",\r\n      }}\r\n      display=\"flex\"\r\n    >\r\n      <div\r\n        className={classes.actions}\r\n        style={{\r\n          paddingBottom: \"10px\",\r\n          borderBottom: \"1px solid #BBBBBB\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"inline-block\",\r\n            justifyContent: \"flex-start\",\r\n            flex: 1,\r\n          }}\r\n        >\r\n          <Button\r\n            onClick={() =>\r\n              alert(\r\n                \"You should not delete your precious memory. If you want to really delete, please look for the next update!\"\r\n              )\r\n            }\r\n            style={{\r\n              position: \"relative\",\r\n              left: \"-15px\",\r\n            }}\r\n          >\r\n            <img\r\n              alt=\"delete button\"\r\n              src={process.env.PUBLIC_URL + \"/images/delete.png\"}\r\n            />\r\n          </Button>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n          <Button\r\n            disabled={false}\r\n            component={Link}\r\n            to={`/biky/edit/${journal.id}`}\r\n            style={{\r\n              position: \"relative\",\r\n              left: \"35px\",\r\n            }}\r\n          >\r\n            <img\r\n              alt=\"edit button\"\r\n              src={process.env.PUBLIC_URL + \"/images/edit.png\"}\r\n            />\r\n          </Button>\r\n\r\n          <Button\r\n            onClick={handleClose}\r\n            style={{\r\n              position: \"relative\",\r\n              left: \"20px\",\r\n            }}\r\n          >\r\n            <img\r\n              alt=\"close button\"\r\n              src={process.env.PUBLIC_URL + \"/images/close.png\"}\r\n            />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={classes.row}>\r\n        <div style={{ display: \"inline-block\", fontSize: 30, maxWidth: \"70%\" }}>\r\n          {journal.title}\r\n        </div>\r\n        <div style={{ display: \"inline-block\" }}>{journal.date}</div>\r\n      </div>\r\n\r\n      <div className={classes.row}>\r\n        <div style={{ display: \"inline-block\", maxWidth: \"50%\" }}>\r\n          <div style={{ display: \"flex\" }}>\r\n            {emojis.map((emoji) => emojiItem(emoji))}\r\n          </div>\r\n        </div>\r\n        <div style={{ display: \"inline-block\" }}>\r\n          <div style={{ display: \"flex\" }}>{getHashtags(journal.hashtags)}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={classes.row}>\r\n        <div style={{ flexWrap: \"wrap\" }}>{getFriends(friends)}</div>\r\n      </div>\r\n\r\n      <div className={classes.row} style={{whiteSpace: 'pre-line'}}>{journal.desc}</div>\r\n\r\n      <div className={classes.centeredRow}>\r\n        <div style={{ display: \"inline-block\", maxWidth: \"50%\" }}>\r\n          {GetMetaphors(journal.metaphors)}\r\n        </div>\r\n        <div style={{ display: \"inline-block\" }}>\r\n          <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div style={{ fontSize: 24 }}>\r\n              {formatDistance(journal.distance)}\r\n            </div>\r\n            <div style={{ fontSize: 15 }}> {formatTime(journal.time)} </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={classes.centeredRow}>\r\n        <PictureList pictures={journal.photos} isEditing={false} />\r\n      </div>\r\n\r\n      <div>\r\n        <StaticMap route={journal.route} zoom={15} width={\"100%\"} />\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n","import JournalItem from './JournalItem'\r\nimport Loading from '../Loading';\r\nimport React from 'react';\r\nimport _ from 'lodash'\r\n\r\nexport default function JournalList({ journals, openJournal, friendsByJournal }) {\r\n  if (!journals || !journals.length)\r\n  return <Loading/>\r\n\r\n  \r\n  var journalList =  _.sortBy(journals, (journal) => new Date(journal.createdAt)).reverse().map(journal => \r\n  { \r\n    return <JournalItem\r\n    key={journal.id}\r\n    openJournal={openJournal}\r\n    journal={journal}\r\n    friends={friendsByJournal[journal.id]}\r\n  />})\r\n\r\n  return (\r\n    <div>\r\n      {journalList}\r\n    </div>\r\n  );\r\n};","import { fade, makeStyles } from '@material-ui/core/styles';\r\n\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport JournalDetail from '../../component/journal/JournalDetail'\r\nimport JournalList from '../../component/journal/JournalList'\r\nimport React from 'react';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(1),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    // padding: theme.spacing(0, 2),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: '12ch',\r\n      '&:focus': {\r\n        width: '20ch',\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\n\r\n\r\nexport default function SearchBar() {\r\n  const classes = useStyles();\r\n\r\n\r\n  return (\r\n    <div className={classes.search}>\r\n      <div className={classes.searchIcon}>\r\n        <SearchIcon />\r\n      </div>\r\n      <InputBase\r\n        placeholder=\"Search…\"\r\n        classes={{\r\n          root: classes.inputRoot,\r\n          input: classes.inputInput,\r\n        }}\r\n        inputProps={{ 'aria-label': 'search' }}\r\n      />\r\n    </div>\r\n\r\n  );\r\n};","import { IconButton, Typography } from \"@material-ui/core\";\r\n\r\nimport Accordion from \"@material-ui/core/Accordion\";\r\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport MailIcon from \"@material-ui/icons/Mail\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport React from \"react\";\r\nimport SearchBar from \"../common/SearchBar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\n// https://material-ui.com/components/modal/\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: \"18px\",\r\n  },\r\n  mailIcon: {\r\n    position: \"absolute\",\r\n    display: \"inline-block\",\r\n    marginLeft: \"10px\"\r\n  }\r\n}));\r\n\r\nfunction ReceivedElement(props) {\r\n  return (\r\n    <div style={{ margin: \"5px\", marginTop: \"5px\", width: \"100%\" }}>\r\n      <Accordion expanded={false} style={{ boxShadow: \"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)\" }}>\r\n        <AccordionSummary>\r\n          <Box\r\n            display=\"flex\"\r\n            alignItems=\"center\"\r\n            justifyContent=\"flex-start\"\r\n            flexDirection=\"row\"\r\n            width=\"100%\"\r\n          >\r\n            <Box flex={1} mr={1}>\r\n              <Avatar\r\n                alt={props.name}\r\n                src={process.env.PUBLIC_URL + props.picture}\r\n                style={{\r\n                  border: \"2px solid lightgray\",\r\n                  width: \"30px\",\r\n                  height: \"30px\"\r\n                }}\r\n              />\r\n            </Box>\r\n            <Box flex={8} mr={2} style={{ minWidth: \"75px\" }}>\r\n              <Typography variant=\"body2\" color=\"textPrimary\">\r\n                {props.name}\r\n              </Typography>\r\n            </Box>\r\n\r\n            <Box>\r\n              <div style={{ display: \"inline-block\", marginRight: \"10px\" }}>\r\n                <IconButton\r\n                  style={{ color: \"green\", width: \"30px\", height: \"30px\" }}\r\n                  onClick={() => {\r\n                    props.onAcceptClick(props.oid);\r\n                  }}\r\n                >\r\n                  <CheckCircleIcon />\r\n                </IconButton>\r\n              </div>\r\n              <div style={{ display: \"inline-block\" }}>\r\n                <IconButton\r\n                  style={{ color: \"red\", width: \"30px\", height: \"30px\" }}\r\n                  onClick={() => {\r\n                    props.onRejectClick(props.oid);\r\n                  }}\r\n                >\r\n                  <CancelIcon />\r\n                </IconButton>\r\n              </div>\r\n            </Box>\r\n          </Box>\r\n        </AccordionSummary>\r\n      </Accordion>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Frequest(props) {\r\n  const classes = useStyles();\r\n  const [modalStyle] = React.useState({\r\n    top: `50%`,\r\n    left: `50%`,\r\n    transform: `translate(-50%, -50%)`,\r\n    maxHeight: \"80vh\",\r\n    overflow: \"scroll\"\r\n  });\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  function fillTable(el) {\r\n    // https://javascript.plainenglish.io/material-ui-icons-and-lists-a98c8ccbdac0\r\n    return (\r\n      <ReceivedElement\r\n        key={el.id}\r\n        oid={el.id}\r\n        name={el.name}\r\n        picture={el.picture}\r\n        onRejectClick={props.onRejectClick}\r\n        onAcceptClick={props.onAcceptClick}\r\n      />\r\n    );\r\n  }\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  // https://stackoverflow.com/questions/42363198/how-to-add-close-icon-in-material-ui-dialog-header-top-right-corner\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box flex={1} display=\"flex\" alignItems=\"center\" flexDirection=\"row\">\r\n          <Box flexGrow={1}>\r\n            <Typography variant=\"h4\" color=\"textPrimary\">\r\n              <b>Frequest</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <IconButton onClick={handleClose} style={{ width: \"30px\", height: \"30px\" }}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n\r\n        <Box flex={4}>\r\n          <Typography variant=\"subtitle1\" color=\"textPrimary\" style={{ padding: \"7px 0\" }}>\r\n            <b>Received Frequests</b>\r\n          </Typography>\r\n          <Box display=\"flex\" alignItems=\"center\" flexDirection=\"column\" style={{ paddingBottom: \"5px\" }}>\r\n            {props.frequests == null || props.frequests.length === 0 ? (\r\n              <Typography variant=\"body1\" color=\"textPrimary\">\r\n                You have received no frequests\r\n              </Typography>\r\n            ) : (\r\n              props.frequests.map(fillTable)\r\n            )}\r\n          </Box>\r\n        </Box>\r\n\r\n        <Divider style={{ margin: \"10px 0\" }} />\r\n\r\n        <Box flex={4}>\r\n          <Typography variant=\"subtitle1\" color=\"textPrimary\" style={{ padding: \"7px 0\" }}>\r\n            <b>Send a Frequest</b>\r\n          </Typography>\r\n          <SearchBar />\r\n        </Box>\r\n      </Box>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.mailIcon}>\r\n      <IconButton onClick={handleOpen}>\r\n        {props.frequests == null || props.frequests.length === 0 ? (\r\n          <MailIcon />\r\n        ) : (\r\n          <Badge badgeContent={props.frequests.length} color=\"primary\">\r\n            <MailIcon />\r\n          </Badge>\r\n        )}\r\n      </IconButton>\r\n\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import Box from \"@material-ui/core/Box\";\r\nimport React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst ProgressStyles = makeStyles((theme) => ({\r\n  pro_bar: {\r\n    backgroundColor: \"hsl(0, 0%, 97%)\",\r\n    height: \"4px\",\r\n    marginBottom: \"12px\",\r\n    marginTop: \"12px\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  progress_bar_inner: {\r\n    display: \"block\",\r\n    width: 0,\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    backgroundColor: \"#ff85ac\",\r\n    transition: \"width 1s linear 0s\",\r\n    \"&::after\": {\r\n      content: `\"\"`,\r\n      width: \"32px\",\r\n      height: \"29px\",\r\n      backgroundImage: `url(${process.env.PUBLIC_URL + \"/images/bike.png\"})`,\r\n      backgroundSize: \"contain\",\r\n      borderRadius: \"50%\",\r\n      position: \"absolute\",\r\n      right: \"-4px\",\r\n      top: \"-20px\",\r\n    },\r\n  },\r\n}));\r\n// https://bestjquery.com/tutorial/progress-bar/demo17/\r\n\r\nexport default function LinearProgressBar(props) {\r\n  const classes = ProgressStyles();\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      flexDirection=\"row\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"flex-start\"\r\n    >\r\n      <Box flex={5} style={{ transform: \"translateY(8px)\" }}>\r\n        <div className={classes.pro_bar}>\r\n          <div\r\n            className={classes.progress_bar_inner}\r\n            style={{\r\n              width: props.value + \"%\",\r\n            }}\r\n            data-value={props.value}\r\n            data-percentage-value={props.value}\r\n          ></div>\r\n        </div>\r\n      </Box>\r\n      {/* <Box flex={1}>\r\n        <Typography variant=\"body2\" color=\"textPrimary\" align=\"right\">\r\n          {props.value}%\r\n        </Typography>\r\n      </Box> */}\r\n    </Box>\r\n  );\r\n}","import { formatDistance, formatTime } from \"../../util/format\";\r\n\r\nimport Accordion from \"@material-ui/core/Accordion\";\r\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\r\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport LinearProgressBar from \"./LinearProgressBar\";\r\nimport React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport function JournalEntry({ journal }) {\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundColor: \"white\",\r\n        borderRadius: \"5px\",\r\n        padding: \"7px\",\r\n        marginTop: \"10px\",\r\n        fontSize: \"11px\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          display: \"inline-block\",\r\n          width: \"30%\",\r\n        }}\r\n      >\r\n        {dayjs(journal.startTime).format(\"YYYY. M. D.\")}\r\n      </div>\r\n      <div\r\n        style={{\r\n          display: \"inline-block\",\r\n          width: \"70%\",\r\n        }}\r\n      >\r\n        {journal.title}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function FriendItem({ friend, journals }) {\r\n  console.log(journals);\r\n  var time = 0.0;\r\n  var distance = 0.0;\r\n  journals &&\r\n    journals.map((journal) => {\r\n      distance += journal.distance;\r\n      time += dayjs(journal.endTime).diff(journal.startTime, \"minute\", true);\r\n    });\r\n  friend.total_intimacy = (time + distance * 10) / 2;\r\n  if (friend.total_intimacy >= 100.0) {\r\n    friend.total_intimacy = 100.0;\r\n  }\r\n  return (\r\n    <Accordion\r\n      style={{ boxShadow: \"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)\" }}\r\n    >\r\n      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n        <FriendListItemInner key={friend.id} friend={friend} />\r\n      </AccordionSummary>\r\n      <AccordionDetails style={{ backgroundColor: \"#f0f0f0\", padding: \"10px\" }}>\r\n        <div style={{ width: \"100%\" }}>\r\n          <div style={{ display: \"inline-block\", width: \"50%\" }}>\r\n            <b>Time: </b>\r\n            {formatTime(time)}\r\n          </div>\r\n\r\n          <div style={{ display: \"inline-block\", width: \"50%\" }}>\r\n            <b>Distance: </b>\r\n            {formatDistance(distance)}\r\n          </div>\r\n\r\n          <div>\r\n            {journals &&\r\n              journals.map((journal) => (\r\n                <JournalEntry journal={journal} key={journal.id} />\r\n              ))}\r\n          </div>\r\n        </div>\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nfunction FriendListItemInner({ friend }) {\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"flex-start\"\r\n      flexDirection=\"row\"\r\n      width=\"100%\"\r\n    >\r\n      <Box flex={1} mr={1}>\r\n        <Avatar\r\n          alt={friend.name}\r\n          src={process.env.PUBLIC_URL + friend.picture}\r\n          style={{\r\n            border: \"2px solid lightgray\",\r\n            width: \"30px\",\r\n            height: \"30px\",\r\n          }}\r\n        />\r\n      </Box>\r\n      <Box flex={2} mr={2} style={{ minWidth: \"75px\" }}>\r\n        <Typography variant=\"body1\" color=\"textPrimary\">\r\n          {friend.name}\r\n        </Typography>\r\n      </Box>\r\n      <Box flex={6}>\r\n        <LinearProgressBar value={friend.total_intimacy} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import Box from \"@material-ui/core/Box\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport FriendListItem from \"./FriendItem\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\n// https://material-ui.com/components/lists/\r\n// https://material-ui.com/components/cards/\r\n// https://material-ui.com/components/progress/\r\n// https://material-ui.com/components/accordion/\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nfunction fillTable(friend, journals) {\r\n  console.log(journals);\r\n  // https://javascript.plainenglish.io/material-ui-icons-and-lists-a98c8ccbdac0\r\n  return <div key={friend.id} style={{ margin: \"10px\", marginTop: \"5px\" }}>\r\n    <FriendListItem friend={friend} journals={journals} />\r\n  </div>\r\n}\r\n\r\nexport default function FriendList(props) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box alignSelf=\"flex-end\" style={{ marginRight: \"10px\" }}>\r\n          <IconButton>\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Box>\r\n\r\n        <div>\r\n          {props.flist.map((friend) =>\r\n            fillTable(friend, props.journalsByFriend[friend.id])\r\n          )}\r\n        </div>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","// import '../index.css'\r\n\r\nimport { deepOrange, deepPurple } from '@material-ui/core/colors'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport { Link } from 'react-router-dom'\r\nimport React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n    position: 'relative',\r\n  },\r\n  container: {display: 'flex', \r\n  textDecorationLine: 'none',\r\n  textDecorationColor: 'black',\r\n  alignItems: 'center', justifyContent: 'flex-end', margin: '5px'}\r\n\r\n}))\r\n\r\nexport default function Profile() {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n      <div className={classes.root}>\r\n        <Link className={classes.container} to=\"/biky/myPage\">\r\n          <div style={{marginRight: '10px'}}> Nayeon Min </div>\r\n          <div>       \r\n            <Avatar\r\n              src={process.env.PUBLIC_URL + '/images/nayeon.png'}\r\n              // component={Link}\r\n              // to=\"/biky/myPage\"\r\n              />\r\n          </div>\r\n        </Link>\r\n      </div>\r\n  )\r\n}\r\n","import Avatar from '../component/Avatar'\r\nimport FrequestComponent from '../component/friend/Frequest'\r\nimport FriendList from '../component/friend/Friends'\r\nimport Loading from '../component/Loading'\r\nimport Profile from './Profile'\r\nimport React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nfunction getJournalsByFriend(flist, journals) {\r\n  let journalsByFriend = {};\r\n  for (let i = 0; i < flist.length; i++) {\r\n    let f = flist[i];\r\n    journalsByFriend[f.id] = journals.filter(\r\n      (j) => j.friends && j.friends.includes(f.id)\r\n    );\r\n  }\r\n  console.log(journalsByFriend);\r\n\r\n  return journalsByFriend;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  page: {\r\n    position: \"relative\",\r\n    margin: \"0 auto\",\r\n  },\r\n  verticalAlign: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"inline-block\",\r\n  },\r\n  header: {\r\n    position: \"relative\",\r\n    height: \"49px\",\r\n    fontSize: \"30px\",\r\n    fontWeight: \"bold\",\r\n    borderBottom: \"solid 1px black\",\r\n    textAlign: \"center\",\r\n  },\r\n  avatar: {\r\n    position: \"relative\",\r\n    height: \"50px\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  content: {\r\n    position: \"relative\",\r\n    height: \"calc(100vh - 160px)\",\r\n    overflow: \"scroll\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n});\r\n\r\nexport default function Friends({ journalRef, friendRef, frequestRef }) {\r\n  const classes = useStyles();\r\n\r\n  const [frequests, setFrequests] = React.useState([]);\r\n  const [friendlist, setFriendlist] = React.useState([]);\r\n  const [journalsByFriend, setJournalsByFriend] = React.useState(null);\r\n\r\n  const acceptFrequest = (fid) => {\r\n    var newFriend = {\r\n      id: \"f\" + friendlist.length,\r\n      picture: \"\",\r\n      name: \"\",\r\n      total_intimacy: 0,\r\n    };\r\n    for (var i = 0; i < frequests.length; i++) {\r\n      if (frequests[i].id === fid) {\r\n        newFriend.name = frequests[i].name;\r\n        newFriend.picture = frequests[i].picture;\r\n      }\r\n    }\r\n    friendRef.child(\"f\" + friendlist.length).set(newFriend);\r\n    frequestRef.child(fid).remove();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    friendRef.on(\"value\", (snapshot) => {\r\n      const friendData = snapshot.val();\r\n      journalRef.once(\"value\", (snapshot) => {\r\n        console.log(friendData);\r\n        setFriendlist(Object.values(friendData));\r\n        const journals = snapshot.val();\r\n        setJournalsByFriend(\r\n          getJournalsByFriend(\r\n            Object.values(friendData),\r\n            Object.values(journals)\r\n          )\r\n        );\r\n      });\r\n    });\r\n\r\n    frequestRef.on(\"value\", (snapshot) => {\r\n      const frequestData = snapshot.val();\r\n      console.log(frequestData);\r\n      setFrequests(frequestData === null ? [] : Object.values(frequestData));\r\n    });\r\n  }, []);\r\n\r\n  const rejectFrequest = (fid) => {\r\n    frequestRef.child(fid).remove();\r\n  };\r\n\r\n  if (!journalsByFriend) return <Loading/>;\r\n  \r\n  return (\r\n    <div className={classes.page}>\r\n      <div className={classes.header}>\r\n        <div className={classes.verticalAlign}>Friends</div>\r\n      </div>\r\n\r\n      <Profile/>\r\n\r\n      <div className={classes.content}>\r\n        <FrequestComponent\r\n          frequests={frequests}\r\n          onRejectClick={rejectFrequest}\r\n          onAcceptClick={acceptFrequest}\r\n        />\r\n        <FriendList flist={friendlist} journalsByFriend={journalsByFriend} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst sunny = '/images/home/weather_sunny.png'\r\nconst cloudy = '/images/home/weather_cloudy.png'\r\nconst rainy = '/images/home/weather_rainy.png'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  container: {\r\n    position: \"relative\",\r\n    width: \"calc(50% - 15px)\",\r\n    height: \"calc(100% - 40px)\",\r\n    padding: \"10px\",\r\n    paddingRight: \"5px\",\r\n    display: \"inline-block\",\r\n    // border: \"solid 1px black\",\r\n    verticalAlign: \"top\",\r\n  },\r\n  background: {\r\n    position: \"relative\",\r\n    width: \"calc(100% - 20px)\",\r\n    height: \"100%\",\r\n    backgroundColor: \"darkgray\",\r\n    borderRadius: \"10px\",\r\n    padding: \"10px\",\r\n    color: \"black\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"15px\",\r\n    // border: \"solid 1px black\"\r\n  },\r\n}));\r\n\r\nfunction randomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\nfunction getImgURL(weather) {\r\n  return `${process.env.PUBLIC_URL}/images/home/weather_${weather}.png`\r\n}\r\n\r\nfunction getTemperature(weather) {\r\n  if (weather === 'sunny')\r\n    return randomInt(20, 30)\r\n  else if (weather === 'cloudy')\r\n    return randomInt(15, 25)\r\n  else if (weather === 'rainy')\r\n    return randomInt(10, 20)\r\n  return randomInt(0, 30)\r\n}\r\n\r\n\r\n\r\nexport default function Weather({weather, temperature}) {\r\n  const classes = useStyles();\r\n\r\n  const style = { \r\n    color: \"black\", \r\n    backgroundSize: \"100% 100%\", \r\n    backgroundImage: `url(${getImgURL(weather)}`\r\n  }\r\n\r\n  // const temperature = getTemperature(weather)\r\n\r\n  if (weather === 'loading')\r\n    return (\r\n      <div className={classes.container}>\r\n        <div className={classes.background}>\r\n          Loading...\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.background} style={style}>\r\n        {weather} <br />\r\n        {temperature ? temperature : getTemperature(weather)}&#8451;\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    bar: {\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        height: \"10px\",\r\n        backgroundColor: \"white\",\r\n        borderRadius: \"10px\",\r\n        marginTop: \"10px\",\r\n        // border: \"solid 1px black\"\r\n    },\r\n    slider: {\r\n      position: \"absolute\",\r\n      top: \"5px\",\r\n      transform: \"translateY(-50%)\",\r\n      width: \"25px\",\r\n      height: \"15px\",\r\n      backgroundColor: \"darkgray\",\r\n      borderRadius: \"10px\",\r\n      color: \"white\",\r\n      textAlign: \"center\",\r\n      fontSize: \"10px\",\r\n      fontWeight: \"bold\",\r\n      border: \"solid 2px white\",\r\n      paddingTop: \"2px\"\r\n    },\r\n}));\r\n\r\nexport default function DustBar(props) {\r\n  const classes = useStyles();\r\n  var amount = props.amount;\r\n  var percentage = props.percentage;\r\n\r\n  return (\r\n    <div className={classes.bar}>\r\n        <div className={classes.slider} style={{ left: `calc(calc(100% - 29px) * ${percentage}` }}>{amount}</div>\r\n    </div>\r\n  )\r\n}","import React, { useState } from 'react';\r\n\r\nimport { DustBar } from './';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst dust = '/images/home/dust.png'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n      position: \"relative\",\r\n      width: \"calc(50% - 15px)\",\r\n      height: \"calc(100% - 40px)\",\r\n      padding: \"10px\",\r\n      paddingLeft: \"5px\",\r\n      display: \"inline-block\",\r\n      // border: \"solid 1px black\",\r\n      verticalAlign: \"top\",\r\n    },\r\n    background: {\r\n      position: \"relative\",\r\n      width: \"calc(100% - 20px)\",\r\n      height: \"100%\",\r\n      backgroundColor: \"darkgray\",\r\n      borderRadius: \"10px\",\r\n      padding: \"10px\",\r\n      color: \"white\",\r\n      fontWeight: \"bold\",\r\n      fontSize: \"12px\",\r\n      // border: \"solid 1px black\"\r\n    },\r\n    text: {\r\n      position: \"relative\",\r\n      display: \"inline-block\",\r\n      margin: \"2px\"\r\n    },\r\n    status: {\r\n      position: \"absolute\",\r\n      right: \"10px\",\r\n      display: \"inline-block\",\r\n      color: \"darkgray\",\r\n      fontSize: \"10px\",\r\n      backgroundColor: \"white\",\r\n      padding: \"3px 10px\", \r\n      borderRadius: \"10px\",\r\n    }\r\n}));\r\n\r\nfunction randomInt(min, max) {\r\n  return Math.floor(Math.random()*(max-min+1)+min);\r\n}\r\n\r\nexport default function Dust({ fineDust, ultraFineDust }) {\r\n  const classes = useStyles();\r\n\r\n  // console.log(fineDust, ultraFineDust);\r\n  var fineDustAmount = fineDust;\r\n  var fineDustStatus = (fineDustAmount <= 30 ? \"GOOD\" : fineDustAmount <= 80 ? \"NORMAL\" : fineDustAmount <= 150 ? \"BAD\" : \"VERY BAD\");\r\n  var ultraFineDustAmount = ultraFineDust;\r\n  var ultraFineDustStatus = (ultraFineDustAmount <= 15 ? \"GOOD\" : ultraFineDustAmount <= 35 ? \"NORMAL\" : ultraFineDustAmount <= 75 ? \"BAD\" : \"VERY BAD\");\r\n\r\n  // console.log(fineDustAmount, ultraFineDustAmount);\r\n  return (\r\n    <div className={classes.container}>\r\n      {/* <img src={dust} width=\"100%\" alt=\"fine dust\" /> */}\r\n      <div className={classes.background}>\r\n        <div>\r\n          <div className={classes.text}>fine dust</div>\r\n          <div className={classes.status}>{fineDustStatus}</div>\r\n          <DustBar amount={fineDustAmount} percentage={fineDustAmount/200} />\r\n        </div>\r\n        <br/>\r\n        <div>\r\n          <div className={classes.text}>ultra-fine dust</div>\r\n          <div className={classes.status}>{ultraFineDustStatus}</div>\r\n          <DustBar amount={ultraFineDustAmount} percentage={ultraFineDustAmount/100}  />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport default function Distance(props) {\r\n  const style = props.style;\r\n  var distance = props.distance;\r\n\r\n  return (\r\n    <div className={style} style={{ width: \"100px\" }}>\r\n        { distance }\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport default function Time(props) {\r\n  const style = props.style;\r\n  var time = props.time;\r\n\r\n  return (\r\n    <div className={style} style={{ width: \"120px\" }}>\r\n        { time }\r\n    </div>\r\n  )\r\n}","export const fullRoute = [ \r\n    [37.49470666236267, 126.91468074800363], // 0\r\n    [37.49415293252939, 126.91474014452083],\r\n    [37.493646325043095, 126.91481439016731],\r\n    [37.493646325043095, 126.91561624314943],\r\n    [37.493669888258175, 126.91635869961434],\r\n    [37.4943178737601, 126.91641809613154],\r\n    [37.494341436763335, 126.91747238431171],\r\n    \r\n    [37.49436499975911, 126.91845242684539], // 7\r\n  \r\n    [37.49369345146585, 126.91874940943136], // 8\r\n    [37.493057242249606, 126.91824453903524],\r\n    [37.49250350018724, 126.91779906515627],\r\n    [37.492161827504944, 126.91696751391557],\r\n    [37.49161986073405, 126.91631415222646],\r\n    [37.49088937755974, 126.91609141528697],\r\n    [37.490630172135496, 126.91692296652768],\r\n    [37.49068908253818, 126.91797725470786],\r\n    [37.490594825871604, 126.91943246937909],\r\n    [37.490747992894406, 126.92084313666243],\r\n    [37.49061839003611, 126.92174893382835],\r\n    [37.490465222747545, 126.92268442897412],\r\n    [37.491231056049536, 126.92283292026711],\r\n    [37.49218539117512, 126.9230408080773],\r\n    [37.49303367882794, 126.92327839414607],\r\n    [37.49317505916671, 126.9220459164143],\r\n    [37.4933046575755, 126.92078374042396],\r\n    [37.49359882211928, 126.91981753934691], // 25\r\n  ]\r\n  \r\n  // export const fullRoute = [ \r\n  //   [37.494670391439165, 126.91464380466944],\r\n  //   [37.49461632321203, 126.91465594036819],\r\n  //   [37.49456003296136, 126.91466527552109], \r\n  //   [37.49451929656926, 126.91467181012814],\r\n  //   [37.494469672207074, 126.91468207879632], \r\n  //   [37.494426713777365, 126.91469141394921], \r\n  //   [37.49439116195478, 126.91469701504094],\r\n  //   [37.49434894414346, 126.91470635019387],\r\n  //   [37.494312592802274, 126.91471474172195],\r\n  //   [37.494275203988074, 126.91472033270082],\r\n  //   [37.4942308443537, 126.91472672239101],\r\n  //   [37.49418585098338, 126.91473710563757],\r\n  //   [37.49414212500595, 126.91474828759539],\r\n  //   [37.494095230451, 126.91475547599684],\r\n  //   [37.49406227749845, 126.91476346311404],\r\n  //   [37.49401474918228, 126.91477065151551],\r\n  //   [37.49395581402821, 126.91478023605076],\r\n  //   [37.493894977691355, 126.91479141800859],\r\n  //   [37.49384111213756, 126.91480898966068],\r\n  //   [37.49378281055953, 126.91482256775232],\r\n  //   [37.493727043790116, 126.91482895744248],\r\n  //   [37.49366557355288, 126.91483295099884],\r\n  //   [37.49366557355288, 126.91492400408393],\r\n  //   [37.49366430612423, 126.91497911518655],\r\n  //   [37.49365987012572, 126.91505659018],\r\n  //   [37.49365733526928, 126.9151500393989],\r\n  //   [37.49365480041277, 126.91524029377271],\r\n  //   [37.493652265556186, 126.91531297649854],\r\n  //   [37.49365099812784, 126.91537367858254],\r\n  //   [37.49364846327113, 126.91544556259707],\r\n  //   [37.49364846327113, 126.9155206414567],\r\n  //   [37.49364402727167, 126.91560530485161],\r\n  //   [37.49364339355742, 126.91568357855633],\r\n  //   [37.49364402727167, 126.91576025483852],\r\n  //   [37.493642759843375, 126.9158153659569],\r\n  //   [37.49364149241491, 126.91589523708416],\r\n  //   [37.493639591272135, 126.91597830305653],\r\n  //   [37.49363705641501, 126.91606216774017],\r\n  //   [37.49363262041484, 126.91614443500124],\r\n  //   [37.49363262041474, 126.91621392290502],\r\n  //   [37.49363071927174, 126.91630337856756],\r\n  //   [37.49364719584283, 126.91636248320174],\r\n  //   [37.49370423009929, 126.91635369737773],\r\n  //   [37.49375682831944, 126.916354496089],\r\n  //   [37.49381703105605, 126.91635529480028],\r\n  //   [37.4938683617721, 126.91636328191301],\r\n  //   [37.49392476215607, 126.91636647676283],\r\n  //   [37.493979895066445, 126.91636967160792],\r\n  //   [37.49404389988837, 126.91637286645302],\r\n  //   [37.49410853836574, 126.91637366516429],\r\n  //   [37.4941738104969, 126.91637765872065],\r\n  //   [37.49424161740768, 126.91637845743193],\r\n  //   [37.49431322537524, 126.91638864486173],\r\n  //   [37.49432845700756, 126.91646019951277],\r\n  //   [37.494329841700974, 126.91655269697881],\r\n  //   [37.49433122639439, 126.91665043015048],\r\n  //   [37.49433122639505, 126.9167411824009],\r\n  //   [37.49433122639505, 126.91683804295496],\r\n  //   [37.494332611088865, 126.91693228568258],\r\n  //   [37.49433191874221, 126.91702914623667],\r\n  //   [37.49433330343809, 126.91711640802218],\r\n  //   [37.49433676517136, 126.91721675904665],\r\n  //   [37.49433261109141, 126.91729878510145],\r\n  //   [37.494330534051365, 126.91739128256748],\r\n  //   [37.49432568762433, 126.91748290741593],\r\n  //   [37.49433330343809, 126.9175588251475],\r\n  //   [37.49432914935773, 126.91762514412373],\r\n  //   [37.49432845701102, 126.91770018923768],\r\n  //   [37.49432707231756, 126.9177900688509],\r\n  //   [37.494323610583855, 126.91787558537611],\r\n  //   [37.4943229182371, 126.91796110190134],\r\n  //   [37.49432084119678, 126.91804661842654],\r\n  //   [37.49432153354372, 126.91810333860887],\r\n  //   [37.49432914935789, 126.91818274681086],\r\n  //   [37.49433884221117, 126.91826040977764],\r\n  //   [37.49436099729966, 126.91836337865494],\r\n  //   [37.49439561461225, 126.91848379988431],\r\n  //   [37.494335380478, 126.91851434150045],\r\n  //   [37.494291070277896, 126.91853092125379],\r\n  //   [37.49423222075454, 126.91855099145867],\r\n  //   [37.494175448229264, 126.9185736795164],\r\n  //   [37.494120060358135, 126.9185954949565],\r\n  //   [37.494076442375025, 126.91860945685032],\r\n  //   [37.49402520852772, 126.91862429134957],\r\n  //   [37.49397535934528, 126.9186469794073],\r\n  //   [37.49392758718089, 126.91866617699456],\r\n  //   [37.49387773793326, 126.91868624719946],\r\n  //   [37.493842428025424, 126.91869846385408],\r\n  //   [37.49379396342433, 126.91871417097097],\r\n  //   [37.493726805282236, 126.91874034949909],\r\n  //   [37.49365203119734, 126.91877089111523],\r\n  //   [37.493595760869646, 126.91875429096568],\r\n  //   [37.49353517083514, 126.91870282533002],\r\n  //   [37.49349792865738, 126.91866728604477],\r\n  //   [37.49344578958348, 126.91861431242103],\r\n  //   [37.49338939421764, 126.91856670321489],\r\n  //   [37.49333565897094, 126.91851507069556],\r\n  //   [37.493276071325454, 126.91846209707182],\r\n  //   [37.493224464125355, 126.9184151584034],\r\n  //   [37.493174985028006, 126.91836352588409],\r\n  //   [37.49311965352544, 126.91830921115594],\r\n  //   [37.49305740553605, 126.91826160194981],\r\n  //   [37.493012182601404, 126.91822069824885],\r\n  //   [37.49296217132841, 126.91817644180368],\r\n  //   [37.492911627986544, 126.91813017370195],\r\n  //   [37.49286268071766, 126.9180845761524],\r\n  //   [37.49282224598911, 126.91804769576143],\r\n  //   [37.49277747095127, 126.9180044206152],\r\n  //   [37.492742356546344, 126.91791188441172],\r\n  //   [37.49268017626305, 126.91789368377515],\r\n  //   [37.49258649430441, 126.91783420396115],\r\n  //   [37.49249633411297, 126.91780668345021],\r\n  //   [37.492418887646934, 126.91777463820318],\r\n  //   [37.49234111147015, 126.9177448055245],\r\n  //   [37.49230120850289, 126.917672385887],\r\n  //   [37.49226609386961, 126.91761740058436],\r\n  //   [37.49221980637914, 126.91754162818584],\r\n  //   [37.492174582941175, 126.91746518523512]\r\n  // ]\r\n  \r\n  export const routeStart = [\r\n    [36.36998994369789, 127.36259606290608],\r\n  ];\r\n\r\n  export const routeOri = [\r\n    // E11\r\n    [36.36998994369789, 127.36259606290608],\r\n    [36.37002827883807, 127.36267384697095],\r\n    [36.3700698535462, 127.36276504208145],\r\n    [36.3701152077479, 127.36284886111683],\r\n    [36.370149223384736, 127.36291725743892],\r\n    [36.37018809837673, 127.36299168874235],\r\n    [36.37022481362909, 127.36306075562754],\r\n    [36.37026422851543, 127.36312781084841],\r\n    [36.37030040380235, 127.36320157159956],\r\n    [36.37024479104087, 127.3632518630208],\r\n    [36.37018917823964, 127.3632954489192],\r\n    [36.370133025467226, 127.36334171701724],\r\n    [36.370073093137364, 127.36339267899076],\r\n    [36.370033587613364, 127.36342751252236],\r\n    [36.36998497813373, 127.36346847728863],\r\n    [36.369932317829885, 127.36351159809519],\r\n    [36.36987560669357, 127.36355974966256],\r\n    [36.36981484471591, 127.36360718254979],\r\n    [36.36977202195536, 127.36363880446574],\r\n    [36.369723412312325, 127.36367545715132],\r\n    [36.369667858397364, 127.36371929663801],\r\n    [36.369616933940506, 127.36376098008438],\r\n    [36.36956427338752, 127.3638005074904],\r\n    [36.36951913573802, 127.36383500412872],\r\n    [36.369464160365524, 127.36387525021487],\r\n    [36.369413235775305, 127.36391477762089],\r\n    [36.36936288984086, 127.36395574238713],\r\n    [36.36931080780541, 127.36399886319373],\r\n    [36.36927841161092, 127.36402717076376],\r\n    [36.36923521666913, 127.36407075666216],\r\n    [36.36919580126378, 127.3641404940996],\r\n    [36.369174203772964, 127.36421760761218],\r\n    [36.36915260627612, 127.36430142664757],\r\n    [36.369138567897785, 127.36435909412812],\r\n    [36.36911967007975, 127.36444090150667],\r\n    [36.36909969238139, 127.36453008496031],\r\n    [36.369082954305824, 127.36462463283225],\r\n    [36.36907431529661, 127.36468900584036],\r\n    [36.369069995792195, 127.36476477824834],\r\n    [36.36901492208964, 127.36474801444128],\r\n    [36.36896308798104, 127.36471649848397],\r\n    [36.36891989286417, 127.36466620706273],\r\n    [36.36888317699597, 127.36460786901408],\r\n    [36.368854020259604, 127.36456495368054],\r\n    [36.36881784430013, 127.36450862728874],\r\n    [36.36877950856353, 127.36444425426956],\r\n    [36.368736313344755, 127.3643825634595],\r\n    [36.36869311810196, 127.36431819044034],\r\n    [36.368666661001086, 127.3642813100768],\r\n    [36.36862670536659, 127.36422833644642],\r\n    [36.36871804671542, 127.36415542613142],\r\n    [36.36876934104968, 127.36411586355155], \r\n    [36.36883629360016, 127.36405819605517],\r\n    [36.36879525817282, 127.36397840033348],\r\n    [36.36874666355984, 127.3638858641184],\r\n    [36.36870549761045, 127.36380329494037],\r\n    [36.368659062705106, 127.3637020415456],\r\n    [36.36861532747823, 127.36361621085334],\r\n    [36.36858617064448, 127.36354245011674],\r\n    [36.36853865578439, 127.3634559488722],\r\n    [36.36848628141639, 127.36337481204593],\r\n    [36.36844200614689, 127.36329903964672],\r\n    [36.368395571084285, 127.36323399607524],\r\n    [36.36836641417036, 127.36316023532413],\r\n    // Ori 378m\r\n  ]\r\n\r\n  export const routeEnd = [\r\n    // E11\r\n    [36.36998994369789, 127.36259606290608],\r\n    [36.37002827883807, 127.36267384697095],\r\n    [36.3700698535462, 127.36276504208145],\r\n    [36.3701152077479, 127.36284886111683],\r\n    [36.370149223384736, 127.36291725743892],\r\n    [36.37018809837673, 127.36299168874235],\r\n    [36.37022481362909, 127.36306075562754],\r\n    [36.37026422851543, 127.36312781084841],\r\n    [36.37030040380235, 127.36320157159956],\r\n    [36.37024479104087, 127.3632518630208],\r\n    [36.37018917823964, 127.3632954489192],\r\n    [36.370133025467226, 127.36334171701724],\r\n    [36.370073093137364, 127.36339267899076],\r\n    [36.370033587613364, 127.36342751252236],\r\n    [36.36998497813373, 127.36346847728863],\r\n    [36.369932317829885, 127.36351159809519],\r\n    [36.36987560669357, 127.36355974966256],\r\n    [36.36981484471591, 127.36360718254979],\r\n    [36.36977202195536, 127.36363880446574],\r\n    [36.369723412312325, 127.36367545715132],\r\n    [36.369667858397364, 127.36371929663801],\r\n    [36.369616933940506, 127.36376098008438],\r\n    [36.36956427338752, 127.3638005074904],\r\n    [36.36951913573802, 127.36383500412872],\r\n    [36.369464160365524, 127.36387525021487],\r\n    [36.369413235775305, 127.36391477762089],\r\n    [36.36936288984086, 127.36395574238713],\r\n    [36.36931080780541, 127.36399886319373],\r\n    [36.36927841161092, 127.36402717076376],\r\n    [36.36923521666913, 127.36407075666216],\r\n    [36.36919580126378, 127.3641404940996],\r\n    [36.369174203772964, 127.36421760761218],\r\n    [36.36915260627612, 127.36430142664757],\r\n    [36.369138567897785, 127.36435909412812],\r\n    [36.36911967007975, 127.36444090150667],\r\n    [36.36909969238139, 127.36453008496031],\r\n    [36.369082954305824, 127.36462463283225],\r\n    [36.36907431529661, 127.36468900584036],\r\n    [36.369069995792195, 127.36476477824834],\r\n    [36.36901492208964, 127.36474801444128],\r\n    [36.36896308798104, 127.36471649848397],\r\n    [36.36891989286417, 127.36466620706273],\r\n    [36.36888317699597, 127.36460786901408],\r\n    [36.368854020259604, 127.36456495368054],\r\n    [36.36881784430013, 127.36450862728874],\r\n    [36.36877950856353, 127.36444425426956],\r\n    [36.368736313344755, 127.3643825634595],\r\n    [36.36869311810196, 127.36431819044034],\r\n    [36.368666661001086, 127.3642813100768],\r\n    [36.36862670536659, 127.36422833644642],\r\n    [36.36871804671542, 127.36415542613142],\r\n    [36.36876934104968, 127.36411586355155], \r\n    [36.36883629360016, 127.36405819605517],\r\n    [36.36879525817282, 127.36397840033348],\r\n    [36.36874666355984, 127.3638858641184],\r\n    [36.36870549761045, 127.36380329494037],\r\n    [36.368659062705106, 127.3637020415456],\r\n    [36.36861532747823, 127.36361621085334],\r\n    [36.36858617064448, 127.36354245011674],\r\n    [36.36853865578439, 127.3634559488722],\r\n    [36.36848628141639, 127.36337481204593],\r\n    [36.36844200614689, 127.36329903964672],\r\n    [36.368395571084285, 127.36323399607524],\r\n    [36.36836641417036, 127.36316023532413],\r\n    // Ori\r\n    [36.368312419856416, 127.36320113901337],\r\n    [36.36825086629285, 127.36324941877777],\r\n    [36.36821361016141, 127.36328227583556],\r\n    [36.36816123557458, 127.36332653228624],\r\n    [36.36810724111828, 127.36337749425978],\r\n    [36.36804892706339, 127.36342242126274],\r\n    [36.36799385263397, 127.36343046788897],\r\n    [36.3679295990885, 127.3634371734118],\r\n    [36.36786264575776, 127.36343113844127],\r\n    [36.36781909461797, 127.36346999529697],\r\n    [36.36776122452615, 127.36351527215419],\r\n    [36.36770624789901, 127.3635655797733],\r\n    [36.36764895642523, 127.36361157531077],\r\n    [36.36761560783714, 127.36354826211146],\r\n    [36.36757602007516, 127.3634748839856],\r\n    [36.36753465970533, 127.36339636939093],\r\n    [36.367494481039294, 127.36331785479624],\r\n    [36.367456665801406, 127.3632496131546],\r\n    [36.367420032275895, 127.36318357284131],\r\n    [36.367381626141906, 127.36310579202788],\r\n    [36.36733731134837, 127.36303241390205],\r\n    [36.36729772344482, 127.36296123711993],\r\n    [36.36725695379173, 127.36288345630652],\r\n    [36.36721618411469, 127.36281227954262],\r\n    [36.36717253855067, 127.36272360771618],\r\n    [36.36723067378139, 127.36267501374762],\r\n    [36.36729551687514, 127.36263683277706],\r\n    [36.36735365201396, 127.3626007344004],\r\n    [36.36741178710934, 127.36256533022332],\r\n    [36.36746265528677, 127.36253409124845],\r\n    [36.36752693919387, 127.36249591027313],\r\n    [36.36758563314963, 127.36246120029558],\r\n    [36.36764712200818, 127.36242371351985],\r\n    [36.36769966699907, 127.36239108614839],\r\n    [36.36776171475606, 127.3623556819713],\r\n    [36.36782208549915, 127.36231958359463],\r\n    [36.36788245619543, 127.36228417941756],\r\n    [36.36794450380667, 127.3622466926418],\r\n    [36.36800387879504, 127.36222181127204],\r\n    [36.368071371949235, 127.36220303580814],\r\n    [36.36813292565481, 127.36216682598484],\r\n    [36.368200418700035, 127.36213061616427],\r\n    [36.36826723033706, 127.36214920931155],\r\n    [36.36833202354691, 127.3621626203572],\r\n    [36.36838277819445, 127.36216999643024],\r\n    [36.36844379171126, 127.36218139581905],\r\n    [36.368502105470206, 127.3621995007307],\r\n    [36.36855339994425, 127.36223436944944],\r\n    [36.36859983491266, 127.36227594369099],\r\n    [36.36864195032968, 127.3623208706848],\r\n    [36.36868676542308, 127.36236847989689],\r\n    [36.368730500609814, 127.36241944187043],\r\n    [36.36877369583181, 127.36247040384394],\r\n    [36.36882121054834, 127.3625233774743],\r\n    [36.36886277843433, 127.3625763882137],\r\n    [36.36891137297479, 127.36265149006941],\r\n    // E9\r\n    [36.36896860650577, 127.36260656306644],\r\n    [36.369022060425884, 127.36256498882489],\r\n    [36.36906201586154, 127.36253012011359],\r\n    [36.369116009655926, 127.3624845225583],\r\n    [36.36917216316165, 127.3624409366599],\r\n    [36.369226696815886, 127.36239802131377],\r\n    [36.369276371006805, 127.36235912928862],\r\n    [36.3693314445243, 127.36231219062878],\r\n    [36.36938273845157, 127.36226927528267],\r\n    [36.36943889176478, 127.36221898386141],\r\n    [36.36947668724532, 127.3621700335523],\r\n    [36.36951502263839, 127.36210364887627],\r\n    [36.369573875529014, 127.36205335745503],\r\n    [36.36963110857263, 127.36200708934749],\r\n    [36.36970001070625, 127.36195177575871],\r\n    [36.36975487162625, 127.36190862506331],\r\n    [36.36981338989827, 127.36185941812997],\r\n    [36.3698603264014, 127.36181551041393],\r\n    [36.36993530282786, 127.36182762288985],\r\n    [36.36997065754048, 127.36190029774524],\r\n    [36.370009669620686, 127.36196388823261],\r\n    [36.370054167748314, 127.36204564744494],\r\n    [36.370100494539095, 127.3621349769547],\r\n    [36.37015718386597, 127.36223793299293],\r\n    // E11 858m\r\n  ]","import React, { useEffect, useRef, useState } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport mapboxgl from 'mapbox-gl';\r\n\r\nimport { routeStart, routeOri, routeEnd } from \"../../data/route\"\r\n\r\nconst fullRoute = routeEnd;\r\n\r\nconst useStyles = makeStyles({\r\n    map: {\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        textAlign: \"center\",\r\n        display: \"inline-block\",\r\n        // border: \"solid 1px black\"\r\n    },\r\n  });\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API\r\n\r\nfunction swapColumns(array) {\r\n  var newArray = [];\r\n  const length = array.length;\r\n  for(var i = 0; i < length; i++) {\r\n    newArray.push([ array[i][1], array[i][0] ]);\r\n  }\r\n  return newArray;\r\n}\r\n\r\nfunction InnerMap({ route, lng, lat }) {\r\n  const classes = useStyles();\r\n\r\n  const mapContainer = useRef(null);\r\n  const map = useRef(null);\r\n\r\n  const [zoom, setZoom] = useState(15);\r\n\r\n  useEffect(() => {\r\n    if (map.current) return; // initialize map only once\r\n      map.current = new mapboxgl.Map({\r\n        container: mapContainer.current,\r\n        style: 'mapbox://styles/mapbox/streets-v11',\r\n        center: [lng, lat],\r\n        zoom: zoom\r\n      });\r\n      map.current.on('load', function () {\r\n        map.current.addSource('route', {\r\n          'type': 'geojson',\r\n          'data': {\r\n            'type': 'Feature',\r\n            'properties': {},\r\n            'geometry': {\r\n              'type': 'LineString',\r\n              'coordinates': swapColumns(route)\r\n            }\r\n          }\r\n        });\r\n        map.current.addLayer({\r\n          'id': 'route',\r\n          'type': 'line',\r\n          'source': 'route',\r\n          'layout': {\r\n            'line-join': 'round',\r\n            'line-cap': 'round'\r\n          },\r\n          'paint': {\r\n            'line-color': '#888',\r\n            'line-width': 4\r\n          }\r\n        });\r\n\r\n        map.current.addSource('pointer', {\r\n          type: 'geojson',\r\n          data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n              \"type\": \"Feature\",\r\n              \"properties\": {},\r\n              \"geometry\": {\r\n                \"type\": \"Point\",\r\n                \"coordinates\": [lng, lat]\r\n              }\r\n            }]\r\n          }\r\n        });\r\n        map.current.addLayer({\r\n          id: 'pointer',\r\n          type: 'circle',\r\n          source: 'pointer',\r\n          paint: {\r\n            'circle-radius': 5,\r\n            'circle-color': '#FF0000',\r\n            'circle-opacity': 0.8\r\n          }\r\n        });\r\n      });\r\n  });\r\n\r\n  useEffect(() => {\r\n    // console.log(\"mode changed to \"+mode)\r\n    // if(mode === \"e11s\") {\r\n    //   console.log(\"1. start\")\r\n    //   setLng(routeStart[routeStart.length - 1][1]);\r\n    //   setLat(routeStart[routeStart.length - 1][0]);\r\n    //   setRoute(routeStart);\r\n    //   // setRoute(props.route);\r\n    // } else if(mode === \"ori\") {\r\n    //   console.log(\"2. ori\")\r\n    //   setLng(routeOri[routeOri.length - 1][1]);\r\n    //   setLat(routeOri[routeOri.length - 1][0]);\r\n    //   setRoute(routeOri);\r\n    //   // setRoute(props.route);\r\n    // } else if(mode === \"e11e\") {\r\n    //   console.log(\"3. end\")\r\n    //   setLng(routeEnd[routeEnd.length - 1][1]);\r\n    //   setLat(routeEnd[routeEnd.length - 1][0]);\r\n    //   setRoute(routeEnd);\r\n    //   // setRoute(props.route);\r\n    // } else if(mode === \"none\") {\r\n    //   console.log(\"0. none\")\r\n    //   if(index >= fullRoute.length) {\r\n    //     // index = (index - 8) % 18 + 8;\r\n    //     index = fullRoute.length - 1;\r\n    //   }\r\n    //   // console.log(index)\r\n    //   setLng(fullRoute[index][1]);\r\n    //   setLat(fullRoute[index][0]);\r\n    //   setRoute(route => [...route, fullRoute[index]]);\r\n    // }\r\n\r\n    map.current.setCenter([lng, lat]);\r\n\r\n    if(map.current.getSource('route')) {\r\n      map.current.getSource('route').setData({\r\n        \"type\": \"Feature\",\r\n        \"geometry\": {\r\n            \"type\": \"LineString\",\r\n            \"coordinates\": swapColumns(route)\r\n        }\r\n      });\r\n    }\r\n\r\n    if(map.current.getSource('pointer')) {\r\n      map.current.getSource('pointer').setData({\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": [{\r\n          \"type\": \"Feature\",\r\n          \"properties\": {},\r\n          \"geometry\": {\r\n            \"type\": \"Point\",\r\n            \"coordinates\": [lng, lat]\r\n          }\r\n        }]\r\n      });\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div ref={mapContainer} className={classes.map}>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function Map(props) {\r\n  const classes = useStyles();\r\n  var index = parseInt(props.index);\r\n  // console.log(`index ${index}`)\r\n  var isRiding = props.isRiding;\r\n\r\n  var mode = props.mode;\r\n\r\n  // const mapContainer = useRef(null);\r\n  // const map = useRef(null);\r\n  const [lng, setLng] = useState(fullRoute[0][1]);\r\n  const [lat, setLat] = useState(fullRoute[0][0]);\r\n  // const [zoom, setZoom] = useState(15);\r\n  const [route, setRoute] = useState(fullRoute.slice(0, 1));\r\n\r\n  // useEffect(() => {\r\n  //   if (map.current) return; // initialize map only once\r\n  //     map.current = new mapboxgl.Map({\r\n  //       container: mapContainer.current,\r\n  //       style: 'mapbox://styles/mapbox/streets-v11',\r\n  //       center: [lng, lat],\r\n  //       zoom: zoom\r\n  //     });\r\n  //     map.current.on('load', function () {\r\n  //       map.current.addSource('route', {\r\n  //         'type': 'geojson',\r\n  //         'data': {\r\n  //           'type': 'Feature',\r\n  //           'properties': {},\r\n  //           'geometry': {\r\n  //             'type': 'LineString',\r\n  //             'coordinates': swapColumns(route)\r\n  //           }\r\n  //         }\r\n  //       });\r\n  //       map.current.addLayer({\r\n  //         'id': 'route',\r\n  //         'type': 'line',\r\n  //         'source': 'route',\r\n  //         'layout': {\r\n  //           'line-join': 'round',\r\n  //           'line-cap': 'round'\r\n  //         },\r\n  //         'paint': {\r\n  //           'line-color': '#888',\r\n  //           'line-width': 4\r\n  //         }\r\n  //       });\r\n\r\n  //       map.current.addSource('pointer', {\r\n  //         type: 'geojson',\r\n  //         data: {\r\n  //           \"type\": \"FeatureCollection\",\r\n  //           \"features\": [{\r\n  //             \"type\": \"Feature\",\r\n  //             \"properties\": {},\r\n  //             \"geometry\": {\r\n  //               \"type\": \"Point\",\r\n  //               \"coordinates\": [lng, lat]\r\n  //             }\r\n  //           }]\r\n  //         }\r\n  //       });\r\n  //       map.current.addLayer({\r\n  //         id: 'pointer',\r\n  //         type: 'circle',\r\n  //         source: 'pointer',\r\n  //         paint: {\r\n  //           'circle-radius': 5,\r\n  //           'circle-color': '#FF0000',\r\n  //           'circle-opacity': 0.8\r\n  //         }\r\n  //       });\r\n  //     });\r\n  // });\r\n\r\n  useEffect(() => {\r\n    console.log(\"mode changed to \"+mode)\r\n    if(mode === \"e11s\") {\r\n      setLng(routeStart[routeStart.length - 1][1]);\r\n      setLat(routeStart[routeStart.length - 1][0]);\r\n      setRoute(routeStart);\r\n    } else if(mode === \"ori\") {\r\n      setLng(routeOri[routeOri.length - 1][1]);\r\n      setLat(routeOri[routeOri.length - 1][0]);\r\n      setRoute(routeOri);\r\n    } else if(mode === \"e11e\") {\r\n      setLng(routeEnd[routeEnd.length - 1][1]);\r\n      setLat(routeEnd[routeEnd.length - 1][0]);\r\n      setRoute(routeEnd);\r\n    } else if(mode === \"none\") {\r\n      if(index >= fullRoute.length) {\r\n        // index = (index - 8) % 18 + 8;\r\n        index = fullRoute.length - 1;\r\n      }\r\n      setLng(fullRoute[index][1]);\r\n      setLat(fullRoute[index][0]);\r\n      setRoute(route => [...route, fullRoute[index]]);\r\n    }\r\n\r\n    // console.log(\"mapmode \"+mode)\r\n    // console.log(\"maproute \"+route)\r\n\r\n    // map.current.setCenter([lng, lat]);\r\n\r\n    // if(map.current.getSource('route')) {\r\n    //   map.current.getSource('route').setData({\r\n    //     \"type\": \"Feature\",\r\n    //     \"geometry\": {\r\n    //         \"type\": \"LineString\",\r\n    //         \"coordinates\": swapColumns(route)\r\n    //     }\r\n    //   });\r\n    // }\r\n\r\n    // if(map.current.getSource('pointer')) {\r\n    //   map.current.getSource('pointer').setData({\r\n    //     \"type\": \"FeatureCollection\",\r\n    //     \"features\": [{\r\n    //       \"type\": \"Feature\",\r\n    //       \"properties\": {},\r\n    //       \"geometry\": {\r\n    //         \"type\": \"Point\",\r\n    //         \"coordinates\": [lng, lat]\r\n    //       }\r\n    //     }]\r\n    //   });\r\n    // }\r\n  }, [index, mode]);\r\n\r\n  useEffect(() => {\r\n    if(isRiding) {\r\n      return;\r\n    }\r\n    props.saveRoute(swapColumns(route));\r\n    setLng(fullRoute[0][1]);\r\n    setLat(fullRoute[0][0]);\r\n    setRoute(fullRoute.slice(0, 1));\r\n  }, [isRiding])\r\n\r\n  return (\r\n    // <div ref={mapContainer} className={classes.map}>\r\n\r\n    // </div>\r\n    <InnerMap route={route} lng={lng} lat={lat} />\r\n  )\r\n}","import { Button, Typography } from '@material-ui/core'\r\n\r\nimport React from 'react'\r\n\r\nexport default function StartButton(props) {\r\n  const style = props.style\r\n\r\n  return (\r\n\r\n    <Button\r\n      className={style.button}\r\n      style={{\r\n        backgroundColor: '#FF85AC',\r\n      }}\r\n      variant=\"contained\">\r\n      <Typography className={style.text} color=\"textPrimary\">\r\n        Start Ride\r\n      </Typography>\r\n    </Button>\r\n  )\r\n}\r\n","import { Button, Typography } from '@material-ui/core'\r\n\r\nimport React from 'react';\r\n\r\nexport default function StopButton(props) {\r\n  const style = props.style;\r\n\r\n  return (\r\n    <Button className={style.button} variant=\"contained\" style={{\r\n      backgroundColor: \"#A9A9A9\"\r\n    }}>\r\n      <Typography className={style.text} color=\"white\">\r\n        Stop Ride\r\n      </Typography>\r\n    </Button>\r\n  )\r\n}","import React, { useState } from 'react';\r\nimport { MetaphorTaxi, MetaphorBurger, MetaphorTree } from './';\r\n\r\nexport default function MetaphorContainer(props) {\r\n    var amount = props.amount; \r\n    var min = 1;\r\n    var max = 3;\r\n    var [randomInt, setRandomInt] = useState(Math.floor(Math.random()*(max-min+1)+min));\r\n\r\n    return (\r\n        <div style={{ position: \"relative\" }}>\r\n            { randomInt === 1 ? <MetaphorTaxi amount={amount}/> : null }\r\n            { randomInt === 2 ? <MetaphorBurger amount={amount}/> : null }\r\n            { randomInt === 3 ? <MetaphorTree amount={amount}/> : null }\r\n        </div>\r\n    )\r\n}","import { Icon } from \"@iconify/react\";\r\nimport React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport oncomingTaxi from \"@iconify-icons/twemoji/oncoming-taxi\";\r\n\r\nconst taxi = \"/images/home/metaphor_taxi.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  background: {\r\n    position: 'relative',\r\n    // background: 'linear-gradient(45deg, #A0BFE3, #F0A2B0)',\r\n    borderRadius: '10px',\r\n    padding: '10px',\r\n  },\r\n  img: {\r\n    display: 'inline-block',\r\n    // border: \"solid 1px black\",\r\n    fontSize: 60,\r\n  },\r\n  text: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    display: 'inline-block',\r\n    // color: 'white',\r\n    // fontSize: \"15px\",\r\n    // fontWeight: \"bold\",\r\n    // margin: \"0 auto\",\r\n    // border: \"solid 1px black\",\r\n    width: 'calc(85% - 20px)',\r\n    // paddingLeft: \"10px\",\r\n    textAlign: 'center',\r\n  },\r\n}))\r\n\r\nexport default function MetaphorTaxi(props) {\r\n  const classes = useStyles()\r\n  var amount = props.amount\r\n\r\n\r\n  return (\r\n    <div className={classes.background}>\r\n      <Icon icon={oncomingTaxi} className={classes.img} />\r\n      <div className={classes.text}>\r\n        You saved {(amount * 1000).toFixed(0)} won!\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Icon } from \"@iconify/react\";\r\nimport React from \"react\";\r\nimport hamburgerIcon from \"@iconify-icons/twemoji/hamburger\"; // 햄버거\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst burger = \"/images/home/metaphor_burger.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  background: {\r\n    position: 'relative',\r\n    // background: 'linear-gradient(45deg, #EED28B, #DB7E61)',\r\n    borderRadius: '10px',\r\n    padding: '10px',\r\n  },\r\n  img: {\r\n    display: 'inline-block',\r\n    // border: \"solid 1px black\",\r\n    fontSize: 60,\r\n  },\r\n  text: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    display: 'inline-block',\r\n    // color: 'white',\r\n    // fontSize: '15px',\r\n    // fontWeight: 'bold',\r\n    // border: \"solid 1px black\",\r\n    width: 'calc(85% - 20px)',\r\n    // paddingLeft: '10px',\r\n    textAlign: 'center',\r\n  },\r\n}))\r\n\r\nexport default function MetaphorBurger(props) {\r\n  const classes = useStyles()\r\n  var amount = props.amount\r\n\r\n\r\n  return (\r\n    <div className={classes.background}>\r\n      <Icon icon={hamburgerIcon} className={classes.img} />\r\n      <div className={classes.text}>\r\n        You skipped {(amount * 0.1).toFixed(2)} burgers!\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Icon } from \"@iconify/react\";\r\nimport React from \"react\";\r\nimport deciduousTree from \"@iconify-icons/twemoji/deciduous-tree\"; // 나무\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst tree = \"/images/home/metaphor_tree.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  background: {\r\n\r\n    position: 'relative',\r\n    // background: 'linear-gradient(45deg, #73A15D, #94C25A)',\r\n    borderRadius: '10px',\r\n    padding: '10px',\r\n  },\r\n  img: {\r\n    display: 'inline-block',\r\n    // border: \"solid 1px black\",\r\n    fontSize: 60,\r\n  },\r\n  text: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    display: 'inline-block',\r\n    // color: 'white',\r\n    // fontSize: '15px',\r\n    // fontWeight: 'bold',\r\n    // margin: '0 auto',\r\n    // border: \"solid 1px black\",\r\n    width: 'calc(85% - 20px)',\r\n    // paddingLeft: '10px',\r\n    textAlign: 'center',\r\n  },\r\n}))\r\n\r\nexport default function MetaphorTree(props) {\r\n  const classes = useStyles()\r\n  var amount = props.amount\r\n\r\n\r\n  return (\r\n    <div className={classes.background}>\r\n      <Icon icon={deciduousTree} className={classes.img} />\r\n      <div className={classes.text}>\r\n        You planted {(amount * 0.05).toFixed(2)} trees!\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Button, ButtonBase, Modal, Typography } from '@material-ui/core'\r\nimport { MetaphorContainer, StaticMap } from './'\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles'\r\n\r\nimport React from 'react'\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: `translate(-50%, -50%)`,\r\n    position: 'absolute',\r\n    width: '75%',\r\n    maxHeight: '75vh',\r\n    overflowY: 'scroll',\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(4),\r\n    outline: 'none',\r\n  },\r\n  header: {\r\n    top: '-5px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    alignContent: 'center'\r\n  },\r\n  title: {\r\n    fontSize: '20px',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n    paddingBottom: '15px',\r\n    position: 'relative',\r\n  },\r\n  half: {\r\n    display: 'inline-block',\r\n    width: '50%',\r\n    paddingBottom: '10px',\r\n  },\r\n  label: {\r\n    display: 'inline-block',\r\n    fontSize: '15px',\r\n    fontWeight: 'bold',\r\n    padding: '5px',\r\n    paddingLeft: '0',\r\n  },\r\n  button: {\r\n    width: '100%',\r\n    textAlign: 'center',\r\n    // border: \"solid 1px black\",\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n    fontSize: '15px',\r\n    backgroundColor: '#FF85AC',\r\n    borderRadius: '10px',\r\n    padding: '10px',\r\n    marginTop: '10px',\r\n  },\r\n}))\r\n\r\nconst LightTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    fontSize: 15,\r\n  },\r\n}))(Tooltip);\r\n\r\n\r\nexport default function JournalModal(props) {\r\n  const classes = useStyles()\r\n  var open = props.open\r\n  var distance = props.distance\r\n  var time = props.time\r\n  var amount = props.amount\r\n  var route = props.route\r\n  var closeModal = props.closeModal\r\n  const tooltipOpen = props.tooltipOpen\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        open={open}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        <div className={classes.modal}>\r\n          <div id=\"modal-title\" className={classes.header}>\r\n            <div style={{marginLeft: 30}}>\r\n            </div>\r\n            <Typography\r\n              variant=\"h5\"\r\n            >\r\n              Today's Ride\r\n            </Typography>\r\n\r\n                      \r\n          <LightTooltip open={tooltipOpen} place=\"top\" arrow title=\"Busy? Write later!\">\r\n              <ButtonBase\r\n                size=\"small\"\r\n                onClick={closeModal}\r\n              >\r\n                <img\r\n                  alt=\"close button\"\r\n                  src={process.env.PUBLIC_URL + '/images/close.png'}\r\n                />\r\n              </ButtonBase>\r\n\r\n          </LightTooltip>\r\n\r\n            \r\n          </div>\r\n\r\n          <MetaphorContainer amount={amount} />\r\n\r\n          <div id=\"modal-description\">\r\n            <div className={classes.half}>\r\n              <div className={classes.label}>Time</div> {time}\r\n            </div>\r\n            <div className={classes.half}>\r\n              <div className={classes.label}>Distance</div> {distance}\r\n            </div>\r\n            <br />\r\n\r\n            <div>\r\n              <div className={classes.label}>Route</div>\r\n              <StaticMap\r\n                route={route}\r\n                zoom={15}\r\n                width={'100%'}\r\n                height={'300px'}\r\n              />\r\n            </div>\r\n\r\n            <Button className={classes.button} onClick={props.handleJournal}>\r\n              Journal Ride\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\n","export const allPhotos = [\r\n  process.env.PUBLIC_URL + \"/images/photo1.jpg\",\r\n  process.env.PUBLIC_URL + \"/images/photo2.jpg\",\r\n  process.env.PUBLIC_URL + \"/images/photo3.jpg\",\r\n  process.env.PUBLIC_URL + \"/images/photo4.jpg\",\r\n  process.env.PUBLIC_URL + \"/images/photo5.jpg\",\r\n  process.env.PUBLIC_URL + \"/images/photo6.jpg\",\r\n]\r\n\r\nexport const getRandomPhoto = (num) => {\r\n  if (num < 1) return []\r\n  if (num >= allPhotos.length) return allPhotos\r\n  return getRandom(allPhotos, num)\r\n}\r\n\r\nfunction getRandom(arr, n) {\r\n    var result = new Array(n),\r\n        len = arr.length,\r\n        taken = new Array(len);\r\n    if (n > len)\r\n        throw new RangeError(\"getRandom: more elements taken than available\");\r\n    while (n--) {\r\n        var x = Math.floor(Math.random() * len);\r\n        result[n] = arr[x in taken ? taken[x] : x];\r\n        taken[x] = --len in taken ? taken[len] : len;\r\n    }\r\n    return result;\r\n}\r\n","import {\r\n  Distance,\r\n  Dust,\r\n  JournalModal,\r\n  Map,\r\n  StartButton,\r\n  StopButton,\r\n  Time,\r\n  Weather,\r\n} from \"../component/home\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { formatDistance, formatTime } from \"../util/format\";\r\nimport { routeEnd, routeOri, routeStart } from \"../data/route\"\r\n\r\nimport Avatar from \"../component/Avatar\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Profile from \"./Profile\";\r\nimport dayjs from \"dayjs\";\r\nimport { getRandomPhoto } from \"../data/photo\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  page: {\r\n    position: \"relative\",\r\n    // maxWidth: \"550px\",\r\n    margin: \"0 auto\",\r\n    // border: \"solid 1px blue\",\r\n  },\r\n  verticalAlign: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"inline-block\",\r\n  },\r\n  header: {\r\n    position: \"relative\",\r\n    height: \"49px\",\r\n    fontSize: \"30px\",\r\n    fontWeight: \"bold\",\r\n    borderBottom: \"solid 1px black\",\r\n    textAlign: \"center\",\r\n  },\r\n  avatar: {\r\n    position: \"relative\",\r\n    height: \"50px\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  content: {\r\n    position: \"relative\",\r\n    height: \"calc(100vh - 160px)\",\r\n    overflow: \"scroll\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  weatherContainer: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    // height: \"25%\",\r\n    height: \"145px\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  measuresContainer: {\r\n    position: \"absolute\",\r\n    zIndex: \"1\",\r\n    width: \"calc(100% - 20px)\",\r\n    // border: \"solid 1px black\",\r\n    padding: \"10px\",\r\n  },\r\n  measures: {\r\n    display: \"inline-block\",\r\n    // border: \"solid 1px black\",\r\n    padding: \"10px\",\r\n    margin: \"0 5px\",\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"10px\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"20px\",\r\n  },\r\n  mapContainer: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"60%\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  buttonContainer: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"calc(40% - 145px)\",\r\n    minHeight: \"50px\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  button: {\r\n    position: \"relative\",\r\n    height: \"calc(100% - 20px)\",\r\n    textAlign: \"center\",\r\n    borderRadius: \"10px\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"20px\",\r\n    margin: \"10px\",\r\n    width: \"calc(100% - 20px)\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  buttonText: {\r\n    position: \"relative\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"25px\",\r\n    color: theme.palette.common.white,\r\n  },\r\n  startButton: {\r\n    position: \"relative\",\r\n    height: \"calc(100% - 20px)\",\r\n    textAlign: \"center\",\r\n    borderRadius: \"10px\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"25px\",\r\n    margin: \"10px\",\r\n    width: \"calc(100% - 20px)\",\r\n    color: theme.palette.primary.main,\r\n  },\r\n  stopButton: {},\r\n}));\r\n\r\nfunction randomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\nfunction getRandomTitle() {\r\n  const randomTitles = [\r\n    \"Met a beautiful cat\",\r\n    \"Dundun dance\",\r\n    \"Met a dirty goose\",\r\n    \"Sunny day\",\r\n    \"Final exam\",\r\n    \"Happy bike ride\",\r\n    \"Bike ride after Fantastic HCI class\"\r\n  ];\r\n  let selector = randomInt(0, randomTitles.length - 1);\r\n  return randomTitles[selector];\r\n}\r\n\r\nconst weatherTypes = [\"sunny\", \"cloudy\", \"rainy\"];\r\n\r\nfunction getRidingTime(time, wizard) {\r\n  if (!wizard) return time\r\n  const {startPauseTime, endPauseTime} = wizard\r\n  if (!startPauseTime || !endPauseTime) return time\r\n  \r\n  const [spHour, spMin] = startPauseTime.split(':')\r\n  const [epHour, epMin] = endPauseTime.split(':')\r\n\r\n  const pauseTime = (epHour - spHour) * 60 + (epMin - spMin)\r\n//   console.log('pauseTime: ', pauseTime)\r\n  const resultTime = time - pauseTime\r\n  return resultTime >= 0 ? resultTime : 0\r\n}\r\n\r\nfunction getRidingPlace(wizard) {\r\n  if (!wizard) return 'Boramae Park'\r\n  const { place } = wizard\r\n  if (!place) return 'Borameae Park'\r\n  return place\r\n}\r\n\r\n\r\nexport default function Home({ journalRef, wizardRef }) {\r\n  const classes = useStyles();\r\n  const [isRiding, setIsRiding] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [distance, setDistance] = useState(0);\r\n  const [time, setTime] = useState(0);\r\n  const [route, setRoute] = useState([]);\r\n  const [index, setIndex] = useState(0);\r\n\r\n  const [weather, setWeather] = useState('loading');\r\n\r\n  const increment = useRef(null);\r\n\r\n  const [hashtags, setHashtags] = useState([]);\r\n  const [startTime, setStartTime] = useState(dayjs());\r\n  const [wizard, setWizard] = useState(null);\r\n  const [mode, setMode] = useState(\"none\");\r\n  const [tooltipOpen, setTooltipOpen] = useState(true)\r\n\r\n  React.useEffect(\r\n    () => {\r\n      console.log(\"wizard changed\")\r\n      if (wizardRef) {\r\n        wizardRef.on('value', snapshot => {\r\n            const wiz = snapshot.val()\r\n            setWizard(wiz)\r\n            setWeather(wiz.weather)\r\n            setMode(wiz.mode)\r\n            setIsRiding(wiz.isRiding)\r\n            console.log(wiz)\r\n          })\r\n        console.log(\"wizard mode\")\r\n      }\r\n      else {\r\n        setWeather(weatherTypes[randomInt(0, weatherTypes.length)])\r\n        console.log(\"non-wizard mode\")\r\n      }\r\n    }, \r\n    [wizardRef]\r\n  )\r\n\r\n  React.useEffect(\r\n    () => {\r\n      journalRef.on(\"value\", (snapshot) => {\r\n        const journalData = snapshot.val();\r\n      let journalList = journalData ? Object.values(journalData) : [];\r\n      console.log(journalList.length, \" set tooltipOpen\")\r\n      if (journalList.length >= 2) setTooltipOpen(false)\r\n      else setTooltipOpen(true)\r\n          })\r\n    }, [journalRef, setTooltipOpen]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if(mode === \"none\") {\r\n\r\n    } else {\r\n        clearInterval(increment.current);\r\n        if(mode === \"e11s\") {\r\n            setTime(0);\r\n            setDistance(0);\r\n        } else if(mode === \"ori\") {\r\n            setTime(63*3/60);\r\n            setDistance(0.378*2);\r\n        } else if(mode === \"e11e\") {\r\n            setTime(143*5.5/60);\r\n            setDistance(0.858*3);\r\n        }\r\n\r\n        // increment.current = setInterval(() => {\r\n        //     setTime((time) => time + 1/60);\r\n        // }, 1000);\r\n    }\r\n  }, [mode])\r\n\r\n\r\n  const createJournal = () => {\r\n    let id = journalRef.push().key;\r\n\r\n    const endTime = startTime.add(time, \"minute\");\r\n    const randomPhotos = getRandomPhoto(3);\r\n    const randomTitle = getRandomTitle();\r\n\r\n    const ridingTime = getRidingTime(time, wizard);\r\n\r\n    let newJournal = {\r\n      createdAt: new Date().toString(),\r\n      id,\r\n      route,\r\n      hashtags,\r\n      distance: distance,\r\n      time: ridingTime,\r\n      date: endTime.format(\"YYYY. MM. DD\"),\r\n      weather,\r\n      startTime: startTime.toString(),\r\n      endTime: endTime.toString(),\r\n      title: randomTitle,\r\n\r\n      desc: `I rode ${parseInt(distance * 10) / 10} km at ${getRidingPlace(wizard)}!`,\r\n      photos: randomPhotos,\r\n      emojis: hashtags,\r\n      metaphors: {\r\n        tree: (parseInt(distance * 10) / 10) * 0.05,\r\n        taxi: (parseInt(distance * 10) / 10) * 1000,\r\n        burger: (parseInt(distance * 10) / 10) * 0.1,\r\n      },\r\n    };\r\n\r\n    journalRef.child(id).set(newJournal);\r\n    return id;\r\n  };\r\n\r\n  const startRide = () => {\r\n    setStartTime(dayjs());\r\n    setIsRiding(true);\r\n    if (wizard && wizard.mode !== 'none') {\r\n      // increment.current = setInterval(() => {\r\n      //   // setIndex((index) => index + 1);\r\n      //   // setDistance((distance) => distance + 0.006);\r\n      //   // setTime((time) => time + 1/60);\r\n      //   // console.log(distance, time);\r\n      //   // console.log(wizard.mode);\r\n      // }, 1000); // 1초에 한 번 업데이트\r\n    } else {\r\n        increment.current = setInterval(() => {\r\n            setIndex((index) => index + 10*1/6);\r\n            setDistance((distance) => distance + 2*10*0.001);\r\n            setTime((time) => time + 10*5*1/360);\r\n            // console.log(wizard.mode);\r\n        }, 1000 / 20); // 1초에 6번 업데이트\r\n    }\r\n  };\r\n\r\n  const stopRide = () => {\r\n    setIsRiding(false);\r\n    clearInterval(increment.current);\r\n    setOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    console.log(\"closing modal\");\r\n    createJournal();\r\n    setOpen(false);\r\n    setIndex(0);\r\n    setDistance(0);\r\n    setTime(0);\r\n  };\r\n\r\n  let history = useHistory();\r\n\r\n  const handleJournal = () => {\r\n    const id = createJournal();\r\n    history.push(`/biky/edit/${id}`);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.page}>\r\n      <div className={classes.header}>\r\n        <div className={classes.verticalAlign}>Home</div>\r\n      </div>\r\n\r\n      <Profile />\r\n\r\n      <div className={classes.content}>\r\n        <div className={classes.weatherContainer}>\r\n          <Weather weather={weather} temperature={wizard ? wizard.temperature : 15}/>\r\n          <Dust fineDust={(wizard && wizard.fineDust) ? wizard.fineDust : randomInt(10, 70)} ultraFineDust={(wizard && wizard.ultraFineDust) ? wizard.ultraFineDust : randomInt(10, 200)} />\r\n        </div>\r\n\r\n        {isRiding ? (\r\n          <div className={classes.measuresContainer}>\r\n            <Distance\r\n              distance={formatDistance(distance)}\r\n              style={classes.measures}\r\n            />\r\n            <Time time={formatTime(time)} style={classes.measures} />\r\n          </div>\r\n        ) : null}\r\n\r\n        <div className={classes.mapContainer}>\r\n          <Map index={index} mode={wizard ? wizard.mode : 'none'} isRiding={isRiding} saveRoute={setRoute} />\r\n        </div>\r\n\r\n        <div\r\n          onClick={() => (!isRiding ? startRide() : stopRide())}\r\n          className={classes.buttonContainer}\r\n        >\r\n          {!isRiding ? (\r\n            <StartButton\r\n              style={{ button: classes.startButton, text: classes.buttonText }}\r\n            />\r\n          ) : (\r\n            <StopButton\r\n              style={{ button: classes.button, text: classes.buttonText }}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <JournalModal\r\n        handleJournal={handleJournal}\r\n        open={open}\r\n        tooltipOpen={tooltipOpen}\r\n        distance={formatDistance(distance)}\r\n        time={formatTime(getRidingTime(time, wizard))}\r\n        amount={distance}\r\n        route={route}\r\n        closeModal={closeModal}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  disabled: {\r\n    backgroundColor: \"gray\",\r\n    opacity: 0.3,\r\n  },\r\n  abled: {\r\n    backgroundColor: \"white\",\r\n  },\r\n}));\r\nexport default function FriendSimpleView({ friend, disabled }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"flex-start\"\r\n      flexDirection=\"row\"\r\n      width=\"120px\"\r\n      borderRadius={10}\r\n      className={disabled ? classes.disabled : classes.abled}\r\n      style={{ boxShadow: \"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)\" }}\r\n      m={1}\r\n    >\r\n      <Box flex={1} mr={1} mt={1} mb={1} ml={1}>\r\n        <Avatar\r\n          alt={friend.name}\r\n          src={process.env.PUBLIC_URL + friend.picture}\r\n          style={{\r\n            border: \"1.5px solid lightgray\",\r\n            width: \"30px\",\r\n            height: \"30px\",\r\n          }}\r\n        />\r\n      </Box>\r\n      <Box flex={2} mt={1} mb={1} style={{ minWidth: \"60px\" }}>\r\n        <Typography variant=\"body2\" color=\"textPrimary\">\r\n          {friend.name}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import AppBar from \"@material-ui/core/AppBar\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport React from \"react\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function MyAppBar({ onSubmit, string }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n      <AppBar position=\"static\" style={{width: '100%'}}>\r\n        <Toolbar variant=\"dense\">\r\n          <Typography variant=\"h6\" color=\"inherit\" style={{ flexGrow: 1 }}>\r\n            {string}\r\n          </Typography>\r\n\r\n          <IconButton\r\n            edge=\"end\"\r\n            className={classes.menuButton}\r\n            color=\"inherit\"\r\n            aria-label=\"menu\"\r\n            onClick={onSubmit}\r\n          >\r\n            <CheckIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { ButtonBase } from \"@material-ui/core\";\r\nimport FriendSimpleView from \"./FriendSimpleView\";\r\nimport React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MyAppBar from \"./AppBar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    top: `50%`,\r\n    left: `50%`,\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n    transform: `translate(-50%, -50%)`,\r\n    maxHeight: \"80vh\",\r\n    overflow: \"scroll\",\r\n    padding: 0,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst modalStyle = {\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: `translate(-${50}%, -${50}%)`,\r\n};\r\n\r\nexport function FriendSelector({ friend, onClick, disabled }) {\r\n  return (\r\n    <ButtonBase onClick={onClick}>\r\n      <FriendSimpleView friend={friend} disabled={disabled} />\r\n    </ButtonBase>\r\n  );\r\n}\r\n\r\nexport default function FriendAddPage({\r\n  allFriends,\r\n  selectedFriends,\r\n  addFriend,\r\n  removeFriend,\r\n  close,\r\n}) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.paper}>\r\n      <MyAppBar onSubmit={close} string=\"Friend\" />\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"row\"\r\n        flexWrap=\"wrap\"\r\n        style={{ padding: \"1%\" }}\r\n      >\r\n        {allFriends.map((friend) => (\r\n          <FriendSelector\r\n            friend={friend}\r\n            onClick={() =>\r\n              selectedFriends.includes(friend)\r\n                ? removeFriend(friend)\r\n                : addFriend(friend)\r\n            }\r\n            disabled={selectedFriends.includes(friend)}\r\n            key={friend.id}\r\n          />\r\n        ))}\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport default function FriendItem({ friend, removeFriend }) {\r\n  return (\r\n    <div style={{ display: \"inline-block\", marginRight: \"10px\", marginBottom: \"10px\" }}>\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"flex-start\"\r\n        flexDirection=\"row\"\r\n        width=\"100%\"\r\n        borderRadius=\"borderRadius\"\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          boxShadow: \"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)\",\r\n        }}\r\n        mr={2}\r\n        key={friend.id}\r\n      >\r\n        <Box mr={1} mt={1} mb={1} ml={1}>\r\n          <Avatar\r\n            alt={friend.name}\r\n            src={process.env.PUBLIC_URL + friend.picture}\r\n            style={{\r\n              border: \"1.5px solid lightgray\",\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n            }}\r\n          />\r\n        </Box>\r\n        <Box mt={1} mb={1} mr={1}>\r\n          <Typography variant=\"body2\" color=\"textPrimary\">\r\n            {friend.name}\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <IconButton\r\n            edge=\"end\"\r\n            aria-label=\"delete\"\r\n            onClick={() => removeFriend(friend)}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        </Box>\r\n      </Box>\r\n    </div>\r\n    // <ListItem key={friend.id}>\r\n    //   <ListItemAvatar>\r\n    //     <Avatar\r\n    //       alt={friend.name}\r\n    //       src={process.env.PUBLIC_URL + friend.picture}\r\n    //       style={{\r\n    //         border: \"2px solid lightgray\",\r\n    //         width: \"30px\",\r\n    //         height: \"30px\",\r\n    //       }}\r\n    //     />{\" \"}\r\n    //   </ListItemAvatar>\r\n    //   <ListItemText primary={friend.name} />\r\n    //   <ListItemSecondaryAction>\r\n    //     <IconButton\r\n    //       edge=\"end\"\r\n    //       aria-label=\"delete\"\r\n    //       onClick={() => removeFriend(friend)}\r\n    //     >\r\n    //       <Delete />\r\n    //     </IconButton>\r\n    //   </ListItemSecondaryAction>\r\n    // </ListItem>\r\n  );\r\n}\r\n","// import theme from \"./HashtagSelector.css\";\r\nimport \"./HashtagSelector.css\"\r\n\r\nimport Autosuggest from 'react-autosuggest';\r\nimport { defaultTheme } from 'react-autosuggest/dist/theme';\r\n\r\nimport React from 'react';\r\n\r\nfunction escapeRegexCharacters(str) {\r\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\n\r\n\r\nconst getSuggestionValue = suggestion => {\r\n  return suggestion\r\n};\r\n\r\nexport default function HashtagSelector({handleSubmit, hashtags}) {\r\n  const [value, setValue] = React.useState('')\r\n  const [suggestions, setSuggestions] = React.useState([])\r\n\r\n  const getSuggestions = value => {\r\n  if (value.length === 0) return hashtags\r\n  const escapedValue = escapeRegexCharacters(value.trim());\r\n  const regex = new RegExp('^' + escapedValue, 'i');\r\n  return hashtags.filter(hashtag => regex.test(hashtag));\r\n};\r\n\r\n\r\n  const onChange = (event, { newValue }) => {\r\n    setValue(newValue)\r\n  };\r\n\r\n  const onSuggestionsFetchRequested = ({ value, reason }) => {\r\n    if (reason === 'suggestion-selected') {\r\n      handleSubmit(value)\r\n      setValue('')\r\n      setSuggestions(hashtags.filter(h => h !== value))\r\n      return;\r\n    }\r\n    setSuggestions(getSuggestions(value))\r\n  };\r\n\r\n  const onSuggestionsClearRequested = () => {\r\n    setSuggestions([])\r\n  };\r\n\r\n  const renderSuggestion = suggestion => (\r\n    <div>\r\n      {suggestion}\r\n    </div>\r\n  );\r\n\r\n  const handleSubmitEnter = (e) => {\r\n        e.preventDefault()\r\n        handleSubmit(value)\r\n        setSuggestions(hashtags.filter(h => h !== value))\r\n        setValue('')\r\n  }\r\n\r\n  const renderInputComponent = inputProps => \r\n    <form className=\"inputContainer\" onSubmit={handleSubmitEnter}>\r\n      <input {...inputProps} />\r\n    </form>\r\n  \r\n  const inputProps = {\r\n    placeholder: '+ New Hashtag',\r\n    value,\r\n    onChange\r\n  };\r\n\r\n\r\n    return (\r\n      <Autosuggest\r\n        suggestions={suggestions}\r\n        onSuggestionsFetchRequested={onSuggestionsFetchRequested}\r\n        onSuggestionsClearRequested={onSuggestionsClearRequested}\r\n        getSuggestionValue={getSuggestionValue}\r\n        renderSuggestion={renderSuggestion}\r\n        inputProps={inputProps}\r\n        renderInputComponent={renderInputComponent}\r\n        highlightFirstSuggestion={true}\r\n        alwaysRenderSuggestions={true}\r\n        // theme={{\r\n        //   ...defaultTheme,\r\n        //   ...\r\n        //   {\r\n        //     container: {\r\n        //     //   ...defaultTheme.container,\r\n        //       display: 'visible',\r\n        //       width: '340px',\r\n        //     },\r\n        //     //more overrides\r\n        //   }\r\n        // }}\r\n      />\r\n    );\r\n}","// </>\r\n//   )\r\n// }\r\n\r\nimport \"@tensorflow/tfjs-backend-cpu\";\r\n\r\nimport * as cocoSsd from \"@tensorflow-models/coco-ssd\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Theme,\r\n  Tooltip,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\n\r\nimport PhotoCamera from '@material-ui/icons/AddAPhoto';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \"& > *\": {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  input: {\r\n    display: \"none\",\r\n  },\r\n  photoSelector: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nexport default function PhotoUploader({ onSubmit, addHashtag }) {\r\n  const classes = useStyles();\r\n  const [imgData, setImgData] = useState(null);\r\n  const [predictions, setPredictions] = useState([]);\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const readImage = (file) => {\r\n    return new Promise((rs, rj) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = () => rs(fileReader.result);\r\n      fileReader.onerror = () => rj(fileReader.error);\r\n      fileReader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const detectObjectsOnImage = async (imageElement) => {\r\n    // 이 이미지 지웠을 때에 hashtag 지우는 방식 알아내야 함\r\n    const model = await cocoSsd.load({});\r\n    const newp = await model.detect(imageElement, 2);\r\n    const result = newp.map((value) => value.class);\r\n    setPredictions(predictions.concat(result));\r\n    console.log(result);\r\n    addHashtag(result);\r\n  };\r\n\r\n  const handleSubmit = async ({ target }) => {\r\n    setLoading(true);\r\n    onSubmit(Array.from(target.files));\r\n\r\n    for (var i = 0; i < target.files.length; i++) {\r\n      var file = target.files[i];\r\n      // create 하고 지우는 이상한 짓 안하고 생긴 image 가져다 쓸 방안? 지금 저기서 만든 친구를 가져다 쓰려면 CORS 쓰면서 난리남..\r\n      var imageElement = document.createElement(\"img\");\r\n      var imgData = await readImage(file);\r\n      imageElement.src = imgData;\r\n\r\n      imageElement.onload = async () => {\r\n        await detectObjectsOnImage(imageElement);\r\n        setLoading(false);\r\n        imageElement.remove();\r\n      };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        accept=\"image/jpeg\"\r\n        className={classes.input}\r\n        id=\"photoSelector\"\r\n        type=\"file\"\r\n        multiple\r\n        onChange={handleSubmit}\r\n      />\r\n      <Tooltip title=\"Select Image\">\r\n        <label htmlFor=\"photoSelector\">\r\n          <IconButton\r\n            className={classes.photoSelector}\r\n            aria-label=\"upload picture\"\r\n            component=\"span\"\r\n          >\r\n            {/* TODO 이미지 바꾸기 */}\r\n            <PhotoCamera fontSize=\"large\" />\r\n          </IconButton>\r\n        </label>\r\n        \r\n      </Tooltip>\r\n    </>\r\n  );\r\n}\r\n","import { formatDistance, formatTime } from \"../../util/format\";\r\nimport { getIconComponent, hashtagsDB } from \"../../util/icon\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FriendItem from \"./FriendItem\";\r\nimport HashtagSelector from \"./HashtagSelector\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PhotoUploader from \"./PhotoUploader\";\r\nimport PictureList from \"./PictureList\";\r\nimport React from \"react\";\r\nimport StaticMap from \"../home/StaticMap\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst animal = [\r\n  \"bird\",\r\n  \"cat\",\r\n  \"dog\",\r\n  \"horse\",\r\n  \"sheep\",\r\n  \"cow\",\r\n  \"elephant\",\r\n  \"bear\",\r\n  \"zebra\",\r\n  \"giraffe\",\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    \"& > *\": {\r\n      // margin: theme.spacing(1),\r\n      marginBottom: \"10px\",\r\n      width: \"100%\",\r\n    },\r\n  },\r\n\r\n  page: {\r\n    position: \"relative\",\r\n    // maxWidth: \"550px\",\r\n    margin: \"0 auto\",\r\n    // border: \"solid 1px blue\",\r\n  },\r\n  verticalAlign: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"inline-block\",\r\n  },\r\n  header: {\r\n    position: \"relative\",\r\n    height: \"49px\",\r\n    fontSize: \"30px\",\r\n    fontWeight: \"bold\",\r\n    borderBottom: \"solid 1px black\",\r\n    textAlign: \"center\",\r\n  },\r\n  content: {\r\n    position: \"relative\",\r\n    height: \"calc(100vh - 130px)\",\r\n    overflowY: \"scroll\",\r\n    padding: \"10px\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n\r\n  hashtagGroup: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n\r\n  picture: {},\r\n\r\n  title: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n  titleBar: {\r\n    background:\r\n      \"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)\",\r\n  },\r\n\r\n  textField: {\r\n    marginTop: \"10px\",\r\n    flexGrow: 1,\r\n  },\r\n  addButton: {\r\n    border: \"solid 1px lightgray\",\r\n    marginLeft: \"10px\",\r\n    display: \"inline-block\",\r\n    marginBottom: \"10px\",\r\n  },\r\n  submitButton: {\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n    // border: \"solid 1px black\",\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    backgroundColor: \"#4BA9FF\",\r\n    borderRadius: \"10px\",\r\n    padding: \"10px\",\r\n    marginTop: \"10px\",\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nfunction showWeather(weather) {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"inline-block\",\r\n        width: \"calc(100% - 30px)\",\r\n        backgroundColor: \"lightblue\",\r\n        borderRadius: \"5px\",\r\n        padding: \"10px\",\r\n        height: \"100px\",\r\n        verticalAlign: \"top\",\r\n        marginRight: \"10px\",\r\n      }}\r\n    >\r\n      {weather}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction weatherIcon(weather) {\r\n  return (\r\n    <div style={{ display: \"inline-block\", verticalAlign: \"top\" }}>\r\n      {getIconComponent(weather)}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction contentSuggestion(text) {\r\n  const length = text.length;\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"calc(100% - 20px)\",\r\n        // border: \"solid 1px lightgray\",\r\n        borderRadius: \"5px\",\r\n        padding: \"5px 10px\",\r\n        // border: \"solid 1px lightgray\",\r\n        boxShadow: \"0px 1.43351px 2.86702px rgba(0, 0, 0, 0.1)\",\r\n        marginBottom: \"10px\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          display: \"inline-block\",\r\n          backgroundColor: \"pink\",\r\n          color: \"white\",\r\n          width: \"15px\",\r\n          height: \"15px\",\r\n          textAlign: \"center\",\r\n          padding: \"3px\",\r\n          fontWeight: \"bold\",\r\n          fontSize: \"14px\",\r\n          borderRadius: \"20px\",\r\n          marginRight: \"10px\",\r\n          // verticalAlign: \"top\",\r\n        }}\r\n      >\r\n        {text[length - 1]}\r\n      </div>\r\n      <div\r\n        style={{\r\n          display: \"inline-block\",\r\n          width: \"calc(100% - 31px)\",\r\n          // border: \"solid 1px lightgray\",\r\n        }}\r\n      >\r\n        {text}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// const formatTime = (time) => {\r\n//   const intTime = parseInt(time);\r\n//   const getSeconds = `0${intTime % 60}`.slice(-2);\r\n//   const minutes = `${Math.floor(intTime / 60)}`;\r\n//   const getMinutes = `0${minutes % 60}`.slice(-2);\r\n//   const getHours = `0${Math.floor(intTime / 3600)}`.slice(-2);\r\n//   return `${getHours} : ${getMinutes} : ${getSeconds}`;\r\n// };\r\n\r\nexport default function JournalForm({\r\n  journal,\r\n  onSubmit,\r\n  openFriendAddPage,\r\n  friends,\r\n  removeFriend,\r\n  addFriend,\r\n  pictures,\r\n  removePicture,\r\n  onSubmitPictures,\r\n  preference,\r\n}) {\r\n  const classes = useStyles();\r\n  console.log(journal);\r\n  const [title, setTitle] = React.useState(journal.title);\r\n  const [desc, setDesc] = React.useState(journal.desc);\r\n  const [hashtags, setHashtags] = React.useState(\r\n    journal.hashtags ? journal.hashtags : []\r\n  );\r\n  const [suggestions, setSuggestions] = React.useState([\r\n    \"What did you do at Duck Pond?\",\r\n  ]);\r\n\r\n  const handleTitleChange = (event) => {\r\n    setTitle(event.target.value);\r\n  };\r\n\r\n  const handleDescChange = (event) => {\r\n    setDesc(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    onSubmit({\r\n      title,\r\n      desc,\r\n      hashtags,\r\n    });\r\n  };\r\n\r\n  const addHashtagBySuggestion = (suggestion) => {\r\n    const filtered = suggestion.filter((item) => !hashtags.includes(item));\r\n    // 이런식으로 바뀐 hashtag를 보내도 되나 싶다.. 하지만 setHashtag 뒤에 이 함수를 불러도 제대로 되지 않는걸? set이 완료되기 전에 함수가 불리는 문제를 막기 위해 이리 해봅시다\r\n    changeSuggestion([...hashtags, ...filtered]);\r\n    setHashtags([...hashtags, ...filtered]);\r\n  };\r\n\r\n  const addHashtag = (hashtag) => {\r\n    if (!hashtags.includes(hashtag)) setHashtags([...hashtags, hashtag]);\r\n  };\r\n\r\n  const changeSuggestion = (hashtag) => {\r\n    console.log(\"sug!\");\r\n    const result = {};\r\n    preference.forEach((x) => {\r\n      result[x] = (result[x] || 0) + 1;\r\n    });\r\n    let fin = Object.keys(result).sort(function (a, b) {\r\n      return a - b;\r\n    });\r\n    // console.log(fin);\r\n    // console.log(hashtag);\r\n    var firstQ = [\"What did you do at Duck Pond?\"];\r\n    friends.map((f) =>\r\n      firstQ.push(\"Did you rode a bike with \" + f.name + \"? How was it?\")\r\n    );\r\n    // 거기서 뭐했니? 누구랑 만났니 그래서 어땠니를 기본으로 둠\r\n    var done = false;\r\n    for (var i = 0; i < fin.length; i++) {\r\n      if (hashtag.includes(fin[i]) && animal.includes(fin[i])) {\r\n        // 사용자가 썼던 해시태그 중 하나(가장 많이 했던 것) + 하나 랜덤으로 안겹치게\r\n        const notUsed = hashtag.filter((item) => item !== fin[i]);\r\n        notUsed.map((h) =>\r\n          firstQ.push(\"How was the \" + h + \" you met during riding?\")\r\n        );\r\n        const rand = Math.floor(Math.random() * firstQ.length);\r\n        setSuggestions([firstQ[rand], \"How was the \" + fin[i] + \" you met during riding?\"]);\r\n        done = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (done === false) {\r\n      //만약 쓴 적이 없다면 그냥 다 랜덤으로!\r\n      hashtag.map((h) =>\r\n        firstQ.push(\"How was the \" + h + \" you met during riding?\")\r\n      );\r\n      const rand = Math.floor(Math.random() * firstQ.length);\r\n      if (firstQ.length > 1) {\r\n        var rand2 = Math.floor(Math.random() * firstQ.length);\r\n        while (rand === rand2) {\r\n          rand2 = Math.floor(Math.random() * firstQ.length);\r\n        }\r\n        setSuggestions([firstQ[rand], firstQ[rand2]]);\r\n      } else {\r\n        setSuggestions([firstQ[rand]]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const removeHashtag = (hashtag) => {\r\n    setHashtags(hashtags.filter((item) => item !== hashtag));\r\n  };\r\n\r\nconst inputRef = React.useRef();\r\n\r\n\r\n  return (\r\n    <div className={classes.page}>\r\n      <div className={classes.header}>\r\n        <div className={classes.verticalAlign}>Journal</div>\r\n      </div>\r\n\r\n      <div className={classes.content}>\r\n        <div className={classes.root} noValidate autoComplete=\"off\">\r\n          <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\r\n            <TextField\r\n              onChange={handleTitleChange}\r\n              id=\"title\"\r\n              label=\"Title\"\r\n              variant=\"outlined\"\r\n              value={title}\r\n              defaultValue={journal.title}\r\n              className={classes.textField}\r\n              inputRef={inputRef} \r\n            />\r\n            <IconButton\r\n              aria-label=\"delete\"\r\n              onClick={() => {\r\n                inputRef.current.focus();\r\n                setTitle(\"\");\r\n              }}\r\n              className={classes.title}\r\n            >\r\n              <CancelIcon />\r\n            </IconButton>\r\n          </Box>\r\n\r\n          <div>\r\n            <div style={{ position: \"absolute\", right: \"10px\" }}>\r\n              <div>\r\n                {weatherIcon(journal.weather)}\r\n                <div style={{ display: \"inline-block\", margin: \"5px\" }}>\r\n                  {journal.date}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <Typography style={{ marginBottom: \"10px\" }}>Records</Typography>\r\n            <StaticMap route={journal.route} />\r\n\r\n            <div style={{ margin: \"10px 0\" }}>\r\n              <div style={{ display: \"inline-block\", width: \"50%\" }}>\r\n                <Typography style={{ marginBottom: \"10px\" }}>\r\n                  Distance: {formatDistance(journal.distance)}\r\n                </Typography>\r\n              </div>\r\n              <div style={{ display: \"inline-block\", width: \"50%\" }}>\r\n                <Typography style={{ marginBottom: \"10px\" }}>\r\n                  Time: {formatTime(journal.time)}\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <Typography\r\n                style={{ marginBottom: \"10px\", display: \"inline-block\" }}\r\n              >\r\n                Friends\r\n              </Typography>\r\n              <Button onClick={openFriendAddPage} className={classes.addButton}>\r\n                +\r\n              </Button>\r\n              <div>\r\n                {friends.map((friend) => (\r\n                  <FriendItem\r\n                    key={friend.id}\r\n                    friend={friend}\r\n                    removeFriend={removeFriend}\r\n                    style={{ display: \"inline-block\" }}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <Typography\r\n              style={{ marginBottom: \"10px\", display: \"inline-block\" }}\r\n            >\r\n              Pictures\r\n            </Typography>\r\n            <PhotoUploader\r\n              onSubmit={onSubmitPictures}\r\n              addHashtag={addHashtagBySuggestion}\r\n            />\r\n\r\n            <PictureList\r\n              pictures={pictures}\r\n              removePicture={removePicture}\r\n              isEditing\r\n            />\r\n          </div>\r\n\r\n          {/* 내용 suggestion */}\r\n          <div>{suggestions.map((sug) => contentSuggestion(sug))}</div>\r\n\r\n          <TextField\r\n            onChange={handleDescChange}\r\n            id=\"desc\"\r\n            label=\"Description\"\r\n            variant=\"outlined\"\r\n            multiline\r\n            defaultValue={journal.desc}\r\n            rows={5}\r\n          />\r\n\r\n          <div className={classes.hashtagGroup}>\r\n            {hashtags.map((hashtag) => (\r\n              <div key={hashtag}>\r\n                #{hashtag}\r\n                <IconButton\r\n                  aria-label=\"delete\"\r\n                  onClick={() => removeHashtag(hashtag)}\r\n                >\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </div>\r\n            ))}\r\n            <HashtagSelector\r\n              handleSubmit={addHashtag}\r\n              hashtags={hashtagsDB.filter(\r\n                (hashtag) => !hashtags.includes(hashtag)\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleSubmit}\r\n            component={Link}\r\n            className={classes.submitButton}\r\n            to=\"/biky/journal\"\r\n          >\r\n            Save\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import dayjs from \"dayjs\";\r\n\r\nconst initJournals =\r\n  [\r\n    {\r\n      id: \"1\",\r\n      title: '제목1', desc: '내용1',\r\n      friends: ['1'],\r\n      hashtags: ['happy'],\r\n      photos: [\"/images/photo1.jpg\"],\r\n      emojis: [\"happy\", \"exited\"],\r\n      distance: 100,\r\n      startTime: dayjs(),\r\n      endTime: dayjs().add(2, 'hour'), weather: \"sunny\",\r\n      metaphor: { tree: 1, taxi: 2, hamburger: 3 },\r\n      map: \"../\",\r\n      route: [\r\n        [126.91462625155943, 37.49468356316903],\r\n        [126.91466456325881, 37.49457548665683],\r\n        [126.91467809668889, 37.4945003236157],\r\n        [126.91469501347642, 37.494409948906565],\r\n        [126.91470290797731, 37.49436968291182],\r\n        [126.91484578727844, 37.49369203740101],\r\n        [126.91634996665469, 37.493628630563954],\r\n        [126.91635767048872, 37.494331551409644],\r\n        [126.91753635713798, 37.49434377606901],\r\n        [126.9184608172214, 37.49440489929814],\r\n        [126.91876897058253, 37.49367752962703],\r\n      ],\r\n    },\r\n\r\n    {\r\n      id: \"2\",\r\n      title: '제목2', desc: '내용2',\r\n      friends: ['1', '0'],\r\n      hashtags: ['happy', \"exited\"],\r\n      photos: ['/images/photo2.jpg'],\r\n      emojis: [\"happy\", \"exited\"],\r\n      distance: 200,\r\n      startTime: dayjs(),\r\n      endTime: dayjs().add(1, 'hour'), weather: \"sunny\",\r\n      metaphor: { tree: 1, taxi: 2, hamburger: 3 },\r\n      map: \"../\",\r\n      route: []\r\n    },\r\n\r\n    {\r\n      id: \"3\",\r\n      title: '제목3', desc: '내용3',\r\n      friends: [],\r\n      hashtags: ['sad'],\r\n      photos: ['/images/photo3.jpg'],\r\n      emojis: [\"sad\"],\r\n      distance: 300,\r\n      startTime: dayjs(),\r\n      endTime: dayjs().add(2, 'hour'), weather: \"sunny\",\r\n      metaphor: { tree: 1, taxi: 2, hamburger: 3 },\r\n      map: \"../\",\r\n      route: []\r\n\r\n    },\r\n\r\n    {\r\n      id: \"4\",\r\n      title: '제목4', desc: '내용4',\r\n      friends: ['1'],\r\n      hashtags: ['happy'],\r\n      photos: ['/images/photo1.jpg', '/images/photo2.jpg'],\r\n      emojis: [\"happy\", \"exited\"],\r\n      distance: 20,\r\n      startTime: dayjs(),\r\n      endTime: dayjs().add(2, 'hour'), weather: \"sunny\",\r\n      metaphor: { tree: 1, taxi: 2, hamburger: 3 },\r\n      map: \"../\",\r\n      route: []\r\n    },\r\n\r\n    {\r\n      id: \"5\",\r\n      title: '제목5', desc: '내용5',\r\n      friends: ['1'],\r\n      hashtags: ['happy'],\r\n      photos: [],\r\n      emojis: [\"happy\", \"exited\"],\r\n      distance: 20,\r\n      startTime: dayjs(),\r\n      endTime: dayjs().add(2, 'hour'),\r\n      weather: \"sunny\",\r\n      metaphor: { tree: 1, taxi: 2, hamburger: 3 },\r\n      map: \"../\",\r\n      route: []\r\n    },\r\n  ]\r\n\r\nexport const mockJournal = {\r\n  // 수정 가능\r\n  title: \"제목1\",\r\n  desc: \"내용1\",\r\n  friends: [\"1\"],\r\n  hashtags: [\"happy\"],\r\n  photos: [\"../\"],\r\n\r\n  // 수정 불가능\r\n  emojis: [\"happy\", \"exited\"],\r\n  distance: 100,\r\n  startTime: dayjs(),\r\n  endTime: dayjs().add(2, \"hour\"),\r\n  weather: \"sunny\",\r\n  metaphor: { tree: 1, taxi: 2, hamburger: 3 },\r\n  map: \"../\",\r\n  route: [\r\n    [126.91462625155943, 37.49468356316903],\r\n    [126.91466456325881, 37.49457548665683],\r\n    [126.91467809668889, 37.4945003236157],\r\n    [126.91469501347642, 37.494409948906565],\r\n    [126.91470290797731, 37.49436968291182],\r\n    [126.91484578727844, 37.49369203740101],\r\n    [126.91634996665469, 37.493628630563954],\r\n    [126.91635767048872, 37.494331551409644],\r\n    [126.91753635713798, 37.49434377606901],\r\n    [126.9184608172214, 37.49440489929814],\r\n    [126.91876897058253, 37.49367752962703],\r\n  ],\r\n};\r\n\r\nexport default initJournals;\r\n","// 방법1\r\n// create인 경우, edit인 경우 이동\r\n// 마지막 라우트의 id를 읽어서 요청을 보냄\r\n\r\nimport { nullToList, toList } from \"../../util/format\";\r\n\r\nimport FriendAddPage from \"../../component/journal/FriendAddPage\";\r\nimport JournalForm from \"../../component/journal/JournalForm\";\r\nimport Loading from \"../../component/Loading\";\r\nimport { Modal } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { mockJournal } from \"../../data/journal\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n// import { getHashtags } from \"../../component/journal/JournalItem\";\r\n\r\nfunction getFriends(ids, allFriends) {\r\n  return allFriends.filter((friend) => ids.includes(friend.id));\r\n}\r\n\r\nfunction getJournal(jid, initJournals) {\r\n  const j = initJournals[String(jid)];\r\n  // const j = initJournals.find(j => String(j.id) === String(jid))\r\n  if (!j) {\r\n    console.log(`No such journal: ${jid}`);\r\n    return mockJournal;\r\n  }\r\n  return j;\r\n}\r\n\r\n  async function uploadImageFile(files, storageRef) {\r\n    if (!files) return null;\r\n    const promises = files.map((file) => {\r\n      const ref = storageRef.child(`photos${file.name}`);\r\n      return ref.put(file).then(() => ref.getDownloadURL());\r\n    });\r\n\r\n    const downloadURLs = await Promise.all(promises);\r\n    return downloadURLs;\r\n  }\r\n\r\n\r\nexport default function JournalEditor({ journalRef, friendRef, storageRef }) {\r\n\r\n  let { id } = useParams();\r\n  const [journal, setJournal] = React.useState(mockJournal);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [allFriends, setAllFriends] = React.useState([]);\r\n  const [preference, setPreference] = React.useState([]);\r\n  const [friendPageOpen, setFriendAddPageOpen] = React.useState(false);\r\n  const [pictures, setPictures] = React.useState([]);\r\n  const [friends, setFriends] = React.useState([]);\r\n  const [pictureLoading, setPictureLoading] = React.useState(false)\r\n  const [pictureFiles, setPictureFiles] = React.useState(false)\r\n\r\n  React.useEffect(() => {\r\n    journalRef.once(\"value\", (snapshot) => {\r\n      const journalData = snapshot.val();\r\n      const j = getJournal(id, journalData);\r\n      setPrefData(journalData ? Object.values(journalData) : []);\r\n      friendRef.once(\"value\", (snapshot) => {\r\n        const friendData = snapshot.val();\r\n        let allFriends = toList(friendData);\r\n        let friends = nullToList(j.friends);\r\n        setFriends(getFriends(friends, allFriends));\r\n        setAllFriends(allFriends);\r\n        setJournal(j);\r\n        setPictures(nullToList(j.photos));\r\n        setLoading(false);\r\n      });\r\n    });\r\n  }, [journalRef, id, friendRef]);\r\n\r\n  const setPrefData = (journals) => {\r\n    const hashtags = journals.map(j => j.hashtags)\r\n    const flatten = hashtags.flat()\r\n    setPreference(flatten);\r\n  };\r\n\r\n  React.useEffect( () => {\r\n    async function fetchPicture() {\r\n      const downloadURLs = await uploadImageFile(pictureFiles, storageRef);\r\n      setPictures(pictures => {\r\n        const oldPictures = pictures.slice(0, pictures.length - pictureFiles.length)\r\n        return [...oldPictures, ...downloadURLs]\r\n      });\r\n      setPictureLoading(false)\r\n      setPictureFiles([])\r\n    }\r\n\r\n    if (pictureLoading === true) {\r\n      fetchPicture()\r\n    }\r\n  }, [pictureLoading, pictureFiles, storageRef])\r\n\r\n  const onSubmit = ({ title, desc, hashtags }) => {\r\n    const newJournal = {\r\n      ...journal,\r\n      title,\r\n      desc,\r\n      friends: friends.map((friend) => friend.id),\r\n      hashtags,\r\n      photos: pictures,\r\n    };\r\n\r\n    // id 에 해당하는 파이어베이스 데이터를 newJournal로 업데이트\r\n    journalRef.child(journal.id).set(newJournal);\r\n\r\n    // 새로운 저널일 경우 처리해주기\r\n  };\r\n\r\n  const removeFriend = (friend) => {\r\n    setFriends(friends.filter((item) => item !== friend));\r\n  };\r\n\r\n  const addFriend = (friend) => {\r\n    if (friends.includes(friend)) return;\r\n    setFriends([...friends, friend]);\r\n  };\r\n\r\n\r\n  const onSubmitPictures = (selected) => {\r\n    const loadings = selected.map(item => 'loading')\r\n    setPictureLoading(true)\r\n    setPictureFiles(selected)\r\n    setPictures([...pictures, ...loadings])\r\n  };\r\n\r\n  const removePicture = (pic) => {\r\n    setPictures(pictures.filter((item) => item !== pic));\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <div>\r\n      <JournalForm\r\n        journal={journal}\r\n        onSubmit={onSubmit}\r\n        openFriendAddPage={() => setFriendAddPageOpen(true)}\r\n        friends={friends}\r\n        removeFriend={removeFriend}\r\n        addFriend={addFriend}\r\n        pictures={pictures}\r\n        removePicture={removePicture}\r\n        onSubmitPictures={onSubmitPictures}\r\n        preference={preference}\r\n      />\r\n      <Modal open={friendPageOpen} onClose={() => setFriendAddPageOpen(false)}>\r\n        <FriendAddPage\r\n          allFriends={allFriends}\r\n          selectedFriends={friends}\r\n          addFriend={addFriend}\r\n          removeFriend={removeFriend}\r\n          close={() => setFriendAddPageOpen(false)}\r\n        />\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import Avatar from \"../../component/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport FilterIcon from \"@material-ui/icons/FilterList\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport JournalDetail from \"../../component/journal/JournalDetail\";\r\nimport JournalList from \"../../component/journal/JournalList\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Profile from \"../Profile\";\r\nimport React from \"react\";\r\nimport SearchBar from \"../../component/common/SearchBar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  page: {\r\n    position: \"relative\",\r\n    margin: \"0 auto\",\r\n  },\r\n  verticalAlign: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"inline-block\",\r\n  },\r\n  header: {\r\n    position: \"relative\",\r\n    height: \"49px\",\r\n    fontSize: \"30px\",\r\n    fontWeight: \"bold\",\r\n    borderBottom: \"solid 1px black\",\r\n    textAlign: \"center\",\r\n  },\r\n  avatar: {\r\n    position: \"relative\",\r\n    height: \"50px\",\r\n    // border: \"solid 1px black\",\r\n    borderBottom: \"solid 1px black\",\r\n  },\r\n  content: {\r\n    position: \"relative\",\r\n    height: \"calc(100vh - 160px)\",\r\n    overflow: \"scroll\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n});\r\n\r\nfunction getFriendsByJournal(journals, flist) {\r\n  let friendsByJournal = {};\r\n  for (let i = 0; i < journals.length; i++) {\r\n    let j = journals[i];\r\n    friendsByJournal[j.id] = flist.filter(\r\n      (f) => j.friends && j.friends.includes(f.id)\r\n    );\r\n  }\r\n\r\n  return friendsByJournal;\r\n}\r\n\r\nexport default function JournalMain({ journalRef, friendRef }) {\r\n  const classes = useStyles();\r\n  const [journals, setJournals] = React.useState([]);\r\n  const [friendsByJournal, setFriendsByJournal] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    journalRef.on(\"value\", (snapshot) => {\r\n      const journalData = snapshot.val();\r\n      let journalList = journalData ? Object.values(journalData) : [];\r\n      friendRef.once(\"value\", (snapshot) => {\r\n        let friendData = snapshot.val();\r\n        let friendList = friendData ? Object.values(friendData) : [];\r\n        setJournals(journalList);\r\n        setFriendsByJournal(getFriendsByJournal(journalList, friendList));\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  const [selected, setSelected] = React.useState(null);\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleOpen = (journal) => {\r\n    setOpen(true);\r\n    setSelected(journal);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setSelected(null);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.page}>\r\n      <div className={classes.header}>\r\n        <div className={classes.verticalAlign}>Journal</div>\r\n      </div>\r\n\r\n      <Profile />\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"flex-start\",\r\n            alignItems: \"center\",\r\n            // paddingHorizontal: \"15px\",\r\n          }}\r\n        >\r\n          <div style={{ flexGrow: 1, marginLeft: \"20px\" }}>\r\n            <SearchBar />\r\n          </div>\r\n          <div style={{ marginRight: \"10px\" }}>\r\n            <IconButton>\r\n              <FilterListIcon />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n\r\n      <div className={classes.content}>\r\n        <JournalList\r\n          journals={journals}\r\n          openJournal={handleOpen}\r\n          friendsByJournal={friendsByJournal}\r\n        />\r\n\r\n        <Modal open={open} onClose={handleClose}>\r\n          <JournalDetail\r\n            journal={selected}\r\n            friends={selected ? friendsByJournal[selected.id] : null}\r\n            handleClose={handleClose}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {getRandomPhoto} from '../data/photo';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { styled } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst logo = \"/images/logo.png\";\r\n\r\nconst frequest = [\r\n  {\r\n    id: \"r0\",\r\n    picture: \"/images/cactus.png\",\r\n    name: \"nayoung\",\r\n  },\r\n  {\r\n    id: \"r1\",\r\n    picture: \"/images/summer.png\",\r\n    name: \"mangoo\",\r\n  },\r\n];\r\n\r\nconst friends = [\r\n  {\r\n    id: \"f0\",\r\n    picture: \"/images/cat1.jpg\",\r\n    name: \"nicole\",\r\n    total_intimacy: 0,\r\n  },\r\n  {\r\n    id: \"f1\",\r\n    picture: \"/images/sky0.jpg\",\r\n    name: \"junho\",\r\n    total_intimacy: 0,\r\n  },\r\n  {\r\n    id: \"f2\",\r\n    picture: \"/images/cat2.jpg\",\r\n    name: \"sanga\",\r\n    total_intimacy: 0,\r\n  },\r\n];\r\n\r\nconst journal = {\r\n  date: \"2021. 05. 25\",\r\n  desc: \"I rode 700 m at Boramae Park!\",\r\n  distance: 0.7,\r\n  emojis: [\"sad\"],\r\n  hashtags: [\"sad\"],\r\n  createdAt: new Date('2021-05-25 12:17:15 GMT').toString(),\r\n  id: \"j0\",\r\n  metaphors: {\r\n    burger: 0.06999999999999999,\r\n    taxi: 700,\r\n    tree: 0.034999999999999996,\r\n  },\r\n  photos: getRandomPhoto(2),\r\n  route: [\r\n    [126.91468074800363, 37.49470666236267],\r\n    [126.91474014452083, 37.49415293252939],\r\n    [126.91481439016731, 37.493646325043095],\r\n    [126.91561624314943, 37.493646325043095],\r\n    [126.91635869961434, 37.493669888258175],\r\n    [126.91641809613154, 37.4943178737601],\r\n    [126.91747238431171, 37.494341436763335],\r\n    [126.91845242684539, 37.49436499975911],\r\n  ],\r\n  startTime: \"Tue, 25 May 2021 10:03:55 GMT\",\r\n  endTime: \"Tue, 25 May 2021 10:13:55 GMT\",\r\n  time: 10,\r\n  title: \"To the moon 🚀\",\r\n  weather: \"rainy\",\r\n};\r\n\r\nconst MyButton = styled(Button)({\r\n  background: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\r\n  border: 0,\r\n  borderRadius: 3,\r\n  boxShadow: \"0 3px 5px 2px rgba(255, 105, 135, .3)\",\r\n  color: \"white\",\r\n  width: \"60vw\",\r\n  height: \"40px\",\r\n  padding: \"0 30px\",\r\n  marginBottom: \"10px\",\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  background: {\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    background: \"linear-gradient(0deg, #FFEDE8, #FFFFF5)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  grid: {\r\n    margin: \"auto\",\r\n  },\r\n  textField: {\r\n    width: \"60vw\",\r\n    background: \"#FFFFFF\",\r\n    marginBottom: \"2vh\",\r\n  },\r\n  submit: {\r\n    marginTop: \"3vh\",\r\n  },\r\n  login: {\r\n    marginBottom: \"2vh\",\r\n  },\r\n  logo: {\r\n    paddingTop: theme.spacing(12),\r\n    paddingBottom: theme.spacing(15),\r\n  },\r\n\r\n  form: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n}));\r\n\r\nasync function setDB(db, user) {\r\n  const ref = db.ref(`user/${user}`);\r\n  const snapshot = await ref.once(\"value\")\r\n  const existed = snapshot.hasChild(\"journals\");\r\n  if (!existed) {\r\n    const frequestRef = ref.child(\"frequests\");\r\n    const friendRef = ref.child(\"friends\");\r\n    const journalRef = ref.child(\"journals\");\r\n    for (var i = 0; i < frequest.length; i++) {\r\n      await frequestRef.child(frequest[i].id).set(frequest[i]);\r\n    }\r\n    for (var i = 0; i < friends.length; i++) {\r\n      await friendRef.child(friends[i].id).set(friends[i]);\r\n    }\r\n    await journalRef.child(\"j0\").set(journal);\r\n  }\r\n  return existed\r\n}\r\n\r\nexport default function Login({\r\n  db,\r\n  setJournalRef,\r\n  setFriendRef,\r\n  setFrequestsRef,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  const [val, setVal] = useState({\r\n    id: \"id123\",\r\n    password: \"password123\",\r\n  });\r\n\r\n  let history = useHistory();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (val.id.length === 0) {\r\n      alert(\"You should enter ID!\");\r\n      return;\r\n    }\r\n\r\n    if (val.password.length === 0) {\r\n      alert(\"You should enter password!\");\r\n      return;\r\n    }\r\n\r\n    // alert(`아이디: ${val.id} 비밀번호: ${val.password}`)\r\n    setJournalRef(val.id);\r\n    setFriendRef(val.id);\r\n    setFrequestsRef(val.id);\r\n    const existed = await setDB(db, val.id);\r\n    if (existed) history.push(`/biky/home`);\r\n    else history.push('/biky/tutorial')\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setVal({\r\n      ...val,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={classes.background}>\r\n      {/* <Box className={classes.root}> */}\r\n      <Grid container className={classes.logo} justify=\"center\">\r\n        <img src={process.env.PUBLIC_URL + logo} alt=\"logo\" />\r\n      </Grid>\r\n\r\n      <div className={classes.form}>\r\n\r\n        <TextField\r\n          type=\"id\"\r\n          name=\"id\"\r\n          required\r\n          fullWidth\r\n          variant=\"outlined\"\r\n          onChange={onChange}\r\n          placeholder=\"Enter ID\"\r\n          className={classes.textField}\r\n        />\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <TextField\r\n            type=\"password\"\r\n            name=\"password\"\r\n            required\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            onChange={onChange}\r\n            placeholder=\"Enter password\"\r\n            className={classes.textField}\r\n          />\r\n        </form>\r\n\r\n        <MyButton onClick={handleSubmit} className={classes.submit}>\r\n          Sign Up &  Login \r\n        </MyButton>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport Container from '@material-ui/core/Container'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport React from 'react'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { spacing } from '@material-ui/system'\r\nimport { styled } from '@material-ui/core/styles'\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst logo = '/images/logo.png'\r\n\r\nconst MyButton = styled(Button)({\r\n  background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\r\n  border: 0,\r\n  borderRadius: 3,\r\n  boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n  color: 'white',\r\n  width: '60%',\r\n  height: '40px',\r\n  padding: '0 30px',\r\n  marginBottom: '10px',\r\n})\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  background: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    background: 'linear-gradient(0deg, #FFEDE8, #FFFFF5)',\r\n    backgroundRepeat: 'no-repeat',\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  logo: {\r\n    paddingTop: theme.spacing(12),\r\n    paddingBottom: theme.spacing(34),\r\n  },\r\n  character: {\r\n    width: '60%',\r\n  },\r\n}))\r\n\r\nexport default function LoginInitial() {\r\n  const classes = useStyles()\r\n  let history = useHistory();\r\n\r\n\r\n  function handleClick() {\r\n    history.push('/biky/login')\r\n  }\r\n\r\n  return (\r\n    <div className={classes.background}>\r\n      <CssBaseline />\r\n      <Grid container className={classes.logo} justify=\"center\">\r\n        <img src={process.env.PUBLIC_URL + logo} alt=\"logo\" />\r\n      </Grid>\r\n      <Grid container alignItems=\"center\" direction=\"column\" spacing={1}>\r\n        <MyButton onClick={handleClick}>\r\n          Log in\r\n        </MyButton>\r\n        <Typography\r\n          className={classes.character}\r\n          align=\"center\"\r\n          variant=\"body2\"\r\n        >\r\n          Don't have an account?\r\n        </Typography>\r\n         <div onClick={() => alert(\"Please look for next update for sign up!\")}> <b>SIGN UP</b> </div>\r\n  \r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n","import Avatar from \"../component/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { badges } from \"../data/badge\";\r\nimport deciduousTree from \"@iconify-icons/twemoji/deciduous-tree\"; // 나무\r\nimport hamburgerIcon from \"@iconify-icons/twemoji/hamburger\"; // 햄버거\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport oncomingTaxi from \"@iconify-icons/twemoji/oncoming-taxi\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst logo = \"/images/logo.png\";\r\n\r\nconst taxi = \"/images/home/metaphor_taxi.png\";\r\nconst burger = \"/images/home/metaphor_burger.png\";\r\nconst tree = \"/images/home/metaphor_tree.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n\r\n  badgeBox: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  badge: {\r\n    // position: \"absolute\",\r\n    // margin: \"0 auto\",\r\n    display: \"inline-block\",\r\n    width: \"100%\",\r\n    top: \"100%\",\r\n    // transform: \"translateY(-50%)\"\r\n  },\r\n\r\n  page: {\r\n    position: \"relative\",\r\n    // maxWidth: \"550px\",\r\n    margin: \"0 auto\",\r\n    // border: \"solid 1px blue\",\r\n  },\r\n  verticalAlign: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    display: \"inline-block\",\r\n  },\r\n  header: {\r\n    position: \"relative\",\r\n    height: \"49px\",\r\n    fontSize: \"30px\",\r\n    fontWeight: \"bold\",\r\n    borderBottom: \"solid 1px black\",\r\n    textAlign: \"center\",\r\n  },\r\n  content: {\r\n    position: \"relative\",\r\n    height: \"calc(100vh - 110px)\",\r\n    overflow: \"scroll\",\r\n    // border: 'solid 1px black',\r\n  },\r\n\r\n  bold: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"20px\",\r\n  },\r\n\r\n  roundBox: {\r\n    boxShadow: \"0px 4px 4px rgba(0, 0, 0, 0.25)\",\r\n    borderRadius: \"5px\",\r\n    padding: \"15px\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  avatar: {\r\n    position: \"relative\",\r\n    display: \"inline-block\",\r\n    textAlign: \"center\",\r\n    // width: '30%',\r\n    width: \"90px\",\r\n    height: \"100%\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  personalInfo: {\r\n    // position: \"absolute\",\r\n    display: \"inline-block\",\r\n    width: \"calc(100% - 90px - 10px)\",\r\n    // border: \"solid 1px black\",\r\n    // top: \"50%\",\r\n    marginLeft: \"10px\",\r\n    // transform: \"translateY(-50%)\",\r\n    lineHeight: \"200%\",\r\n  },\r\n  recordsContainer: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    margin: \"15px 0\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  metaphorContainer: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-around\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n  metaphorItem: {\r\n    position: \"relative\",\r\n    display: \"inline-block\",\r\n    width: \"calc(100% / 3)\",\r\n    // border: \"solid 1px black\",\r\n  },\r\n\r\n  badgeBox: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    maxHeight: \"50px\",\r\n    maxWidth: \"50px\",\r\n    overflow: \"hidden\",\r\n  },\r\n  badge: {\r\n    margin: \"auto\",\r\n    display: \"block\",\r\n    width: \"50px\",\r\n    height: \"50px\",\r\n    borderRadius: \"50%\",\r\n  },\r\n}));\r\n\r\nfunction ShowMetaphors(image, val) {\r\n  const classes = useStyles();\r\n  var icon_name;\r\n  if (image === \"taxi\") {\r\n    icon_name = oncomingTaxi;\r\n  } else if (image === \"burger\") {\r\n    icon_name = hamburgerIcon;\r\n  } else if (image === \"tree\") {\r\n    icon_name = deciduousTree;\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n      <div style={{ marginRight: 10 }}>\r\n        <Icon style={{ fontSize: 40 }} icon={icon_name} />\r\n      </div>\r\n      <div>{val}</div>\r\n    </div>\r\n    // <div className={classes.metaphorItem} style={{ minWidth: \"130px\" }}>\r\n    //   <Icon style={{ fontSize: 30 }} icon={icon_name} />\r\n\r\n    //   <div\r\n    //     style={{\r\n    //       position: \"absolute\",\r\n    //       display: \"inline-block\",\r\n    //       // border: \"solid 1px black\",\r\n    //       // textAlign: 'center',\r\n    //       width: \"calc(40% - 10px)\",\r\n    //       top: \"50%\",\r\n    //       transform: \"translateY(-50%)\",\r\n    //       marginLeft: \"10px\",\r\n    //     }}\r\n    //   >\r\n    //     <Icon style={{ fontSize: 30 }} icon={hamburgerIcon} />\r\n    //     {val}\r\n    //   </div>\r\n    // </div>\r\n  );\r\n}\r\n\r\nexport default function MyPage({ mainBadge }) {\r\n  const classes = useStyles();\r\n  let history = useHistory();\r\n\r\n  function handleClick() {\r\n    history.push(\"/biky/badgeDetail\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.page}>\r\n      <div className={classes.header}>\r\n        <div className={classes.verticalAlign}>My Page</div>\r\n      </div>\r\n      <div className={classes.content}>\r\n        <Box p={\"10px\"}>\r\n          <div>\r\n            <Box className={classes.roundBox}>\r\n              <div style={{ position: \"relative\" }}>\r\n                <div className={classes.avatar}>\r\n                  <div>\r\n                    <div\r\n                      style={{ display: \"inline-block\", marginBottom: \"5px\" }}\r\n                    >\r\n                      {/* <Avatar/> */}\r\n                      <img\r\n                        src={process.env.PUBLIC_URL + \"/images/nayeon.png\"}\r\n                        width=\"100%\"\r\n                        alt=\"profile\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  Nayeon Min\r\n                </div>\r\n\r\n                <div\r\n                  className={classes.personalInfo}\r\n                  style={{ whiteSpace: \"nowrap\" }}\r\n                >\r\n                  {/* <Typography> */}\r\n                  Age: 28\r\n                  <br />\r\n                  Gender: Female\r\n                  <br />\r\n                  Job: Freelancer Designer\r\n                  <br />\r\n                  Favorite: Boramae Park\r\n                  <br />\r\n                  {/* </Typography> */}\r\n                </div>\r\n              </div>\r\n            </Box>\r\n\r\n            <Box className={classes.recordsContainer}>\r\n              <Box className={classes.roundBox}>\r\n                <Typography className={classes.bold}>Records</Typography>\r\n\r\n                <Typography\r\n                  style={{ marginBottom: \"10px\", lineHeight: \"200%\" }}\r\n                >\r\n                  You rode a bike for &nbsp;\r\n                  <div\r\n                    style={{\r\n                      fontWeight: \"bold\",\r\n                      fontSize: \"18px\",\r\n                      display: \"inline-block\",\r\n                    }}\r\n                  >\r\n                    129.9km and 4.7hrs!\r\n                  </div>\r\n                </Typography>\r\n                <div className={classes.metaphorContainer}>\r\n                  {ShowMetaphors(\"taxi\", \"131,870\")}\r\n                  {ShowMetaphors(\"burger\", \"13.5\")}\r\n                  {ShowMetaphors(\"tree\", \"5.49\")}\r\n                </div>\r\n              </Box>\r\n            </Box>\r\n\r\n            <div>\r\n              <Paper className={classes.paper} onClick={handleClick}>\r\n                <Typography\r\n                  className={classes.bold}\r\n                  style={{ marginBottom: \"10px\" }}\r\n                >\r\n                  Representative Badge\r\n                </Typography>\r\n\r\n                <Grid container spacing={2}>\r\n                  <Grid item>\r\n                    <Box className={classes.badgeBox}>\r\n                      <img\r\n                        className={classes.badge}\r\n                        src={\r\n                          process.env.PUBLIC_URL + badges[mainBadge].thumbnail\r\n                        }\r\n                        alt=\"대표 뱃지\"\r\n                      />\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item xs container direction=\"column\" spacing={2}>\r\n                    <Grid item xs>\r\n                      <Typography variant=\"h6\">\r\n                        {badges[mainBadge].title}\r\n                      </Typography>\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                      <Typography variant=\"body2\">\r\n                        {badges[mainBadge].description}\r\n                      </Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Paper>\r\n            </div>\r\n          </div>\r\n        </Box>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import BottomNavigation from \"@material-ui/core/BottomNavigation\";\r\nimport BottomNavigationAction from \"@material-ui/core/BottomNavigationAction\";\r\nimport DirectionsBikeIcon from \"@material-ui/icons/DirectionsBike\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"60px\",\r\n    position: \"fixed\",\r\n    bottom: 0,\r\n    zIndex: 1,\r\n  },\r\n});\r\n\r\nconst noNavBar = (pathname) => {\r\n  return (\r\n    pathname === '/biky' || \r\n    pathname === '/biky/login' || \r\n    pathname === '/biky/404' ||\r\n    pathname === '/biky/') ||\r\n    pathname === '/biky/tutorial'\r\n}\r\n\r\nconst NavBar = () => {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(window.location.pathname);\r\n  let history = useHistory();\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  }\r\n\r\n    history.listen((location, action) => {\r\n        setValue(location.pathname)\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        {noNavBar(value) ? null : \r\n    <BottomNavigation\r\n      value={value}\r\n      onChange={handleChange}\r\n      className={classes.root}\r\n    >\r\n      <BottomNavigationAction\r\n        label=\"FRIEND\"\r\n        value=\"/biky/friend\"\r\n        icon={<PeopleIcon />}\r\n        component={Link}\r\n        to=\"/biky/friend\"\r\n      ></BottomNavigationAction>\r\n      <BottomNavigationAction\r\n        label=\"HOME\"\r\n        value=\"/biky/home\"\r\n        icon={<HomeIcon />}\r\n        component={Link}\r\n        to=\"/biky/home\"\r\n      />\r\n      <BottomNavigationAction\r\n        label=\"JOURNAL\"\r\n        value=\"/biky/journal\"\r\n        icon={<DirectionsBikeIcon />}\r\n        component={Link}\r\n        to=\"/biky/journal\"\r\n\r\n      />\r\n    </BottomNavigation>\r\n}\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default withRouter(NavBar);\r\n","import { Link } from \"react-router-dom\";\n\nexport default function NotFound()\n{\n  return <div style={{    position: 'fixed',\n    top: 0,\n    left: 0,\n    background: 'linear-gradient(0deg, #FFEDE8, #FFFFF5)',\n    backgroundRepeat: 'no-repeat',\n    width: '100%',\n    height: '100%',\n}}>\n  <div style={{position: 'relative', textAlign: \"center\", top: '50%'}}>\n    No such page!\n     Please go to\n    <div style={{marginLeft: 8}}>\n           <Link to=\"/biky\"> login page </Link>\n\n\n  </div>\n    </div>\n  </div>\n}","import ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport { IconButton } from '@material-ui/core'\r\nimport React from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction getUrl(pageNum) {\r\n  return `url(${process.env.PUBLIC_URL}/images/tutorial/${pageNum}.png)`\r\n}\r\n\r\n\r\nexport default function Tutorial() {\r\n  const [pageNum, setPageNum] = React.useState(0)\r\n  let history = useHistory();\r\n\r\n\r\n  const onPressPrev = () => {\r\n    setPageNum(pageNum-1)\r\n  }\r\n\r\n  const onPressNext = () => {\r\n    if (pageNum === 9)\r\n      history.push(\"/biky/home\");      \r\n    else {\r\n      setPageNum(pageNum+1)\r\n    }\r\n  }\r\n  \r\n  \r\n  return <div style={{\r\n    backgroundImage: getUrl(pageNum), \r\n    height: '100%',\r\n    backgroundPosition: 'center', \r\n    backgroundSize: '100% 100%', \r\n    backgroundRepeat: 'no-repeat',\r\n    display: 'contain',\r\n    zIndex: -1\r\n    }}>\r\n\r\n      <div\r\n        style={{\r\n          height: '100%',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          display: 'flex'\r\n        }}\r\n      >\r\n        <IconButton style={(pageNum > 1) ? {color: 'white'} : {color: 'transparent'}} onClick={onPressPrev}> \r\n        <ArrowBackIosIcon fontSize=\"large\"/> \r\n        </IconButton >\r\n        <IconButton style={{color: 'white'}} onClick={onPressNext}> \r\n          <ArrowForwardIosIcon fontSize=\"large\"/> \r\n        </IconButton >\r\n      </div>\r\n\r\n  </div>\r\n}","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n};\r\n\r\n// console.log(firebaseConfig.databaseURL);\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nconst storage = firebase.storage();\r\nconst db = firebase.database();\r\n\r\nconst fire = {db, storage: storage};\r\n\r\nexport default fire \r\n","import \"./App.css\";\r\n\r\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nimport BadgeDetail from \"./container/BadgeDetail\";\r\nimport Friends from \"./container/Friends\";\r\nimport Home from \"./container/Home\";\r\nimport JournalEditor from \"./container/journal/JournalEditor\";\r\nimport JournalMain from \"./container/journal/JournalMain\";\r\nimport Login from \"./container/Login\";\r\nimport LoginInitial from \"./container/LoginInitial\";\r\nimport MyPage from \"./container/MyPage\";\r\nimport NavigationBar from \"./component/NavigationBar\";\r\nimport NotFound from \"./NotFound\";\r\nimport PhotoUploader from \"./component/journal/PhotoUploader\";\r\nimport React from \"react\";\r\nimport Tutorial from \"./container/Tutorial\";\r\nimport fire from \"./firebaseInit\";\r\n\r\nconst theme = createMuiTheme({\r\n  typography: {\r\n    fontFamily: \"Noto Sans\",\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: \"#ff85ac\",\r\n      light: \"#FFEDE8\", // primary color\r\n    },\r\n    secondary: {\r\n      main: \"#FF8E53\",\r\n      light: \"#FFF9E8\", // secondary color\r\n    },\r\n  },\r\n});\r\n\r\n\r\nfunction App() {\r\n  const [mainBadge, setMainBadge] = React.useState(0);\r\n  const [ref, setRef] = React.useState(null);\r\n\r\n  const [journalRef, setJournalRef] = React.useState(null);\r\n  const [frequestRef, setFrequestsRef] = React.useState(null);\r\n  const [friendRef, setFriendRef] = React.useState(null);\r\n\r\n  const [image, setImage] = React.useState(null);\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <BrowserRouter>\r\n        <NavigationBar />\r\n        <Switch>\r\n          <Route\r\n            path=\"/biky/home\"\r\n            exact\r\n            render={() => {\r\n              if (journalRef)\r\n               return <Home \r\n                journalRef={fire.db.ref(journalRef)} \r\n                wizardRef={fire.db.ref('wizard/')}                \r\n                />\r\n              window.location.href = \"/biky\"\r\n              } }//\r\n          />\r\n          <Route\r\n            path=\"/biky/journal\"\r\n            exact\r\n            render={() => {\r\n              if (journalRef && friendRef)\r\n                return (\r\n                  <JournalMain\r\n                    journalRef={fire.db.ref(journalRef)}\r\n                    friendRef={fire.db.ref(friendRef)}\r\n                  />\r\n                );\r\n              window.location.href = \"/biky\";\r\n            }}\r\n          />\r\n          <Route\r\n            path=\"/biky/edit/:id\"\r\n            exact\r\n            render={() => {\r\n              if (journalRef && friendRef)\r\n                return (\r\n                  <JournalEditor\r\n                    storageRef={fire.storage.ref('/photos')}\r\n                    journalRef={fire.db.ref(journalRef)}\r\n                    friendRef={fire.db.ref(friendRef)}\r\n                  />\r\n                );\r\n              window.location.href = \"/biky\";\r\n            }}\r\n          />\r\n          <Route\r\n            path=\"/biky/\"\r\n            exact\r\n            render={() => (\r\n              <Login\r\n                db={fire.db}\r\n                setJournalRef={(name) =>\r\n                  setJournalRef(`/user/${name}/journals`)\r\n                }\r\n                setFriendRef={(name) => \r\n                  setFriendRef(`/user/${name}/friends`)\r\n                }                  \r\n                setFrequestsRef={(name) =>\r\n                  setFrequestsRef(`/user/${name}/frequests`)\r\n                }\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/biky/myPage\"\r\n            exact\r\n            render={() => {\r\n              if (journalRef) return <MyPage mainBadge={mainBadge} />;\r\n              window.location.href = \"/biky\";\r\n            }}\r\n          />\r\n          <Route\r\n            path=\"/biky/badgeDetail\"\r\n            exact\r\n            render={() => {\r\n              if (friendRef && journalRef)\r\n                return (\r\n                  <BadgeDetail\r\n                    changeMainBadge={(id) => setMainBadge(id)}\r\n                    mainBadge={mainBadge}\r\n                  />\r\n                );\r\n\r\n              window.location.href = \"/biky\";\r\n            }}\r\n          />\r\n          <Route\r\n            path=\"/biky/friend\"\r\n            render={() => {\r\n              if (friendRef && journalRef)\r\n                return (\r\n                  <Friends\r\n                    friendRef={fire.db.ref(friendRef)}\r\n                    frequestRef={fire.db.ref(frequestRef)}\r\n                    journalRef={fire.db.ref(journalRef)}\r\n                  />\r\n                );\r\n\r\n              window.location.href = \"/biky\";\r\n            }}\r\n          />\r\n          <Route\r\n            path=\"/biky/tutorial\"\r\n            render={() => {\r\n              return <Tutorial/>\r\n            }} />\r\n\r\n          <Route\r\n            path=\"/biky/404\"\r\n            render={() => <NotFound/>}\r\n          />\r\n          <Redirect from=\"*\" to=\"/biky/404\" />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}