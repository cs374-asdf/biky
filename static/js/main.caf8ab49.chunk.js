(this.webpackJsonpbiky=this.webpackJsonpbiky||[]).push([[0],{391:function(e,t,i){},392:function(e,t,i){},407:function(e,t,i){},421:function(e,t){},422:function(e,t){},430:function(e,t){},440:function(e,t,i){"use strict";i.r(t);var n=i(1),a=i.n(n),r=i(47),c=i.n(r),s=(i(391),i(392),i(46)),o=i(54),l=i(364),d=i(507),j=i(319),b=i.n(j),u=i(509),p=i(258),x=i(485),h=i(368),g=i(486),m=[{oid:0,thumbnail:"/images/sick.jpg",title:"Ride a Bike Too Much",description:"You rode a bike too much and even did lots of assignments. You should take care of your body."},{oid:1,thumbnail:"/images/cat.png",title:"Meet lots of cute cats",description:"You met lots of cute cats. Cats are perfect."},{oid:2,thumbnail:"/images/fry.png",title:"Become fried egg",description:"You rode a bike in sunny day very often. You may become fried egg."},{oid:3,thumbnail:"/images/squirrel.png",title:"Wow a squirrel",description:"You met a squirrel while riding a bike. It is very unique experience"}],f=i(483),O=i(2),y=Object(f.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(2)},paper:{padding:e.spacing(2)},badgeBox:{width:"100%",height:"100%",maxHeight:"50px",maxWidth:"50px",overflow:"hidden"},badge:{margin:"auto",display:"block",width:"50px",height:"50px",borderRadius:"50%"},eachBadge:{margin:e.spacing(2,0)},buttonBase:{width:"98%",borderBottom:"dotted 1px lightgray"},arrow:{margin:e.spacing(1,1)},bold:{fontWeight:"bold",fontSize:"20px"}}}));function v(e){var t=e.mainBadge,i=e.changeMainBadge,n=y(),a=Object(o.g)();var r=m.map((function(e,a){return Object(O.jsx)(p.a,{className:n.buttonBase,style:a===t?{backgroundColor:"lightgray"}:{},onClick:function(){i(e.oid),console.log(t)},children:Object(O.jsxs)(x.a,{container:!0,spacing:2,className:n.eachBadge,children:[Object(O.jsx)(x.a,{item:!0,children:Object(O.jsx)(u.a,{className:n.badgeBox,children:Object(O.jsx)("img",{className:n.badge,src:"/biky"+e.thumbnail,alt:e.title})})}),Object(O.jsxs)(x.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(O.jsx)(x.a,{item:!0,xs:!0,children:Object(O.jsx)(g.a,{variant:"h6",align:"left",children:e.title})}),Object(O.jsx)(x.a,{item:!0,xs:!0,children:Object(O.jsx)(g.a,{variant:"body2",align:"left",children:e.description})})]})]})},a)}));return Object(O.jsxs)(u.a,{p:3,children:[Object(O.jsx)(p.a,{onClick:function(){a.push("/biky/myPage")},children:Object(O.jsx)(b.a,{className:n.arrow})}),Object(O.jsxs)(h.a,{className:n.root,children:[Object(O.jsx)(g.a,{className:n.bold,style:{marginBottom:"10px"},children:"Representative Badge"}),Object(O.jsxs)(x.a,{container:!0,spacing:2,children:[Object(O.jsx)(x.a,{item:!0,children:Object(O.jsx)(u.a,{className:n.badgeBox,children:Object(O.jsx)("img",{className:n.badge,src:"/biky"+m[t].thumbnail,alt:"Representative Badge"})})}),Object(O.jsxs)(x.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(O.jsx)(x.a,{item:!0,xs:!0,children:Object(O.jsx)(g.a,{variant:"h6",children:m[t].title})}),Object(O.jsx)(x.a,{item:!0,xs:!0,children:Object(O.jsx)(g.a,{variant:"body2",children:m[t].description})})]})]})]}),Object(O.jsxs)(h.a,{className:n.root,style:{border:"solid 1px lightgray",marginTop:10},children:[Object(O.jsx)(g.a,{className:n.bold,style:{marginBottom:"10px"},children:"Other Badges"}),Object(O.jsx)("div",{style:{overflow:"scroll",maxHeight:"calc(100vh - 390px)"},children:r})]})]})}var w=i(101),k=i(513);Object(f.a)((function(e){return{root:{display:"flex","& > *":{}}}}));var S=i(444),N=i(511),C=i(494),F=i(496),R=i(250),B=i.n(R),D=i(334),I=i.n(D),A=i(335),z=i.n(A),M=i(495),T=i(268),W=i.n(T),P=i(510),E=i(57),Y=i(514);function L(e){return e||[]}function q(e){var t=parseInt(e/60),i=parseInt(e%60);return"".concat(t>0?"".concat(t," hr").concat(t>1?"s":""," "):" ").concat(i>=0?"".concat(i," min").concat(i>1?"s":""):"")}function J(e){return e<1?"".concat((1e3*e).toFixed(0),"m"):"".concat(e.toFixed(2),"km")}var H=i(487),G=i(50),$=i.n(G);function _(e){var t=e.startTime,i=e.endTime,n=$()(t).format("YYYY. M. D.");$()(t).format("H\uc2dc M\ubd84"),$()(i).format("H\uc2dc M\ubd84");return Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{variant:"h6",children:n})})}var V=i(81),U=i(149),Z=i(320),K=i(267),X=i(321),Q=(i(399),i(322)),ee=i(323),te=i(324),ie=(i(400),i(325)),ne=i(326),ae=i(327),re=(i(401),i(402),i(150)),ce=(i(403),i(404),i(328)),se=(i(405),i(329)),oe=i(330);i(406);function le(e){const t=function(e){switch(e){case"sad":case"\ud79d":case"\uc2ac\ud504\ub2e4":return Q.a;case"angry":case"\ud654\ub098\ub124":return ne.a;case"excited":case"happy":case"\ud589\ubcf5\ud574":case"\uae30\ubd80\ub2c8\uac00 \uc88b\uc544\uc694":return ce.a;case"tired":case"exhausted":case"\uc878\ub9bc":case"sleepy":return se.a;case"\uc874\ub9db":case"delicious":case"yummy":return ie.a;case"\uc774\uc2dc\uad6d":case"fever":case"sick":case"\uc544\ud30c\uc694":return ae.a;case"sunny":return oe.a;case"cloudy":return K.a;case"rainy":return X.a;case"dog":return te.a;case"cat":return Z.a;case"goose":case"bird":return ee.a;default:return null}}(e);return t?Object(O.jsx)(V.Icon,{icon:t,width:"2em"}):null}V.Icon,K.a;const de=["happy","sick","dog","cat","angry","excited","tired","exhausted","sleepy","delicious","yummy","sunny","cloudy","rainy"];var je=i(186);i(331);function be(e){if(!e)return"no hashtags yet";var t="";return e.map((e=>t+="#"+e+" ")),t}function ue(e){if(!e)return Object(O.jsx)("div",{children:" no friends... "});var t=e.map((e=>Object(O.jsx)(u.a,{mr:1,children:Object(O.jsx)(k.a,{alt:e.name,src:"/biky"+e.picture,style:{border:"1.5px solid lightgray",width:"30px",height:"30px"}})})));return Object(O.jsx)(u.a,{display:"flex",flexDirection:"row",flexWrap:"wrap",children:t})}const pe=Object(f.a)((e=>({tree:{height:"40px",width:"100%",borderRadius:"5px"},taxi:{height:"40px",width:"100%",borderRadius:"5px"},burger:{height:"40px",width:"100%",borderRadius:"5px"}})));function xe(e){const t=pe();if(!e)return Object(O.jsx)("div",{children:" empty metaphor "});var i,n="",a="";switch(Math.floor(3*Math.random())){case 0:console.log("tree"),n=e.tree.toFixed(2)+" trees",i=U.a,a=t.tree;break;case 1:console.log("taxi"),n=e.taxi.toFixed(0)+" won",i=je.a,a=t.taxi;break;case 2:console.log("burger"),n=e.burger.toFixed(2)+" burgers",i=re.a,a=t.burger}return Object(O.jsx)(H.a,{className:a,style:{width:"170px",height:"40px"},children:Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsx)(V.Icon,{style:{position:"relative",top:"2px",left:"15px",height:"35px",fontSize:40},icon:i}),Object(O.jsx)(g.a,{variant:"body1",style:{fontSize:"1em",position:"relative",top:"2px",left:"25px"},children:n})]})})}function he(e){const t=le(e);return t?Object(O.jsx)(u.a,{borderRadius:"50%",style:{backgroundColor:"white",boxShadow:"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)"},width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",mr:1,children:Object(O.jsx)(u.a,{children:t})},e):null}function ge({journal:e,openJournal:t,friends:i}){if(!e)return null;const n=L(e.hashtags).map(he);return Object(O.jsxs)(H.a,{onClick:()=>t(e),style:{margin:"35px",padding:"15px",flexDirection:"column"},display:"flex",id:e.id+"main",children:[Object(O.jsxs)(u.a,{flex:1,minHeight:"40px",display:"flex",flexDirection:"row",children:[Object(O.jsx)(u.a,{flex:4,children:Object(O.jsx)(_,{startTime:e.startTime,endTime:e.endTime})}),Object(O.jsx)(u.a,{flex:4,display:"flex",flexDirection:"row-reverse",children:n})]}),Object(O.jsx)(u.a,{flex:1,display:"flex",flexDirection:"row",children:Object(O.jsx)(u.a,{component:"div",textOverflow:"ellipsis",overflow:"hidden",style:{wordWrap:"breakWord",whiteSpace:"nowrap",fontSize:"x-large"},children:e.title})}),Object(O.jsx)(u.a,{flex:2,my:2,children:Object(O.jsx)(u.a,{component:"div",textOverflow:"ellipsis",overflow:"hidden",style:{wordWrap:"breakWord",whiteSpace:"nowrap",fontSize:"small"},children:be(e.hashtags)})}),Object(O.jsxs)(u.a,{flex:1,my:1,display:"flex",flexDirection:"row",children:[Object(O.jsx)(u.a,{flex:1,children:ue(i)}),Object(O.jsxs)(u.a,{flex:1,display:"flex",flexDirection:"column",style:{textAlign:"right"},children:[Object(O.jsx)(u.a,{style:{fontSize:"x-small"},children:q(e.time)}),Object(O.jsx)(u.a,{style:{fontSize:"x-large"},children:J(e.distance)})]})]})]})}var me=i(493),fe=i(489),Oe=i(248),ye=i.n(Oe),ve=i(490),we=i(491),ke=i(492),Se=i(488);function Ne(){return Object(O.jsx)("div",{style:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center",display:"flex"},children:Object(O.jsx)(Se.a,{color:"secondary"})})}var Ce=i(443),Fe=i(94);const Re=Object(f.a)((e=>({root:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1),width:"80%"}},hashtagGroup:{display:"flex",flexDirection:"row"},title:{color:e.palette.primary.light},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"},gridList:{},picture:{borderRadius:25}})));function Be({pictures:e,removePicture:t,isEditing:i}){const n=Re(),a=function(){const e=Object(Fe.a)();return[...e.breakpoints.keys].reverse().reduce(((t,i)=>{const n=Object(Ce.a)(e.breakpoints.up(i));return!t&&n?i:t}),null)||"xs"}();if(!e)return null;const r=(e=>Object(fe.a)("xl",e)?5:Object(fe.a)("lg",e)?4:(Object(fe.a)("md",e),3))(a),c=(e=>Object(fe.a)("xl",e)?200:Object(fe.a)("lg",e)?150:100)(a);return Object(O.jsx)(ve.a,{cellHeight:c,className:n.gridList,cols:r,spacing:12,children:e.map(((e,a)=>Object(O.jsxs)(we.a,{className:n.picture,onClick:()=>console.log(e),children:["loading"===e?Object(O.jsx)(Ne,{}):Object(O.jsx)("img",{src:e,alt:"bike"}),i&&Object(O.jsx)(ke.a,{classes:{root:n.titleBar,title:n.title},actionIcon:Object(O.jsx)(S.a,{"aria-label":`delete ${e}`,onClick:()=>t(e),children:Object(O.jsx)(ye.a,{className:n.title})})})]},"loading"===e?`loading${a}`:e)))})}var De=i(192),Ie=i.n(De);const Ae=Object(f.a)({map:{position:"relative",width:"100%",height:"100%",textAlign:"center",display:"inline-block"}});function ze(e){const t=Ae();var i=e.route?e.route:[],a=e.zoom?e.zoom:14,r=e.width?e.width:"100%",c=e.height?e.height:"300px",s=i.length,o=i[0],l=i[s-1];const d=Object(n.useRef)(null),j=Object(n.useRef)(null);return Object(n.useEffect)((()=>{j.current||(j.current=new Ie.a.Map({container:d.current,style:"mapbox://styles/mapbox/streets-v11",center:l,zoom:a}),j.current.on("load",(function(){j.current.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}}),j.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":4}}),j.current.addSource("start",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:o}}]}}),j.current.addLayer({id:"start",type:"circle",source:"start",paint:{"circle-radius":5,"circle-color":"#0000FF","circle-opacity":1}}),j.current.addSource("end",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:l}}]}}),j.current.addLayer({id:"end",type:"circle",source:"end",paint:{"circle-radius":5,"circle-color":"#FF0000","circle-opacity":1}})})))})),Object(O.jsx)("div",{style:{width:r,height:c},children:Object(O.jsx)("div",{ref:d,className:t.map})})}Ie.a.accessToken="pk.eyJ1IjoiYmFieWNyb2MiLCJhIjoiY2tvaW5rMWlpMDE3czJ3cWYyMXZkZmxidiJ9.8m_FmwtsgjCBUq2Jq9wVcg";const Me=Object(f.a)((e=>({row:{flex:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"20px"},centeredRow:{flex:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},actions:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"20px"}})));function Te({journal:e,friends:t,handleClose:i}){const n=Me();if(!e)return null;const a=L(e.hashtags).map(le);return Object(O.jsxs)(H.a,{style:{margin:"20px",padding:"20px",maxHeight:"90%",overflow:"scroll",flexDirection:"column"},display:"flex",children:[Object(O.jsxs)("div",{className:n.actions,style:{paddingBottom:"10px",borderBottom:"1px solid #BBBBBB"},children:[Object(O.jsx)("div",{style:{display:"inline-block",justifyContent:"flex-start",flex:1},children:Object(O.jsx)(me.a,{onClick:()=>alert("You should not delete your precious memory. If you want to really delete, please look for the next update!"),style:{position:"relative",left:"-15px"},children:Object(O.jsx)("img",{alt:"delete button",src:"/biky/images/delete.png"})})}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(O.jsx)(me.a,{disabled:!1,component:s.b,to:`/biky/edit/${e.id}`,style:{position:"relative",left:"35px"},children:Object(O.jsx)("img",{alt:"edit button",src:"/biky/images/edit.png"})}),Object(O.jsx)(me.a,{onClick:i,style:{position:"relative",left:"20px"},children:Object(O.jsx)("img",{alt:"close button",src:"/biky/images/close.png"})})]})]}),Object(O.jsxs)("div",{className:n.row,children:[Object(O.jsx)("div",{style:{display:"inline-block",fontSize:30,maxWidth:"70%"},children:e.title}),Object(O.jsx)("div",{style:{display:"inline-block"},children:e.date})]}),Object(O.jsxs)("div",{className:n.row,children:[Object(O.jsx)("div",{style:{display:"inline-block",maxWidth:"50%"},children:Object(O.jsx)("div",{style:{display:"flex"},children:a.map((e=>he(e)))})}),Object(O.jsx)("div",{style:{display:"inline-block"},children:Object(O.jsx)("div",{style:{display:"flex"},children:be(e.hashtags)})})]}),Object(O.jsx)("div",{className:n.row,children:Object(O.jsx)("div",{style:{flexWrap:"wrap"},children:ue(t)})}),Object(O.jsx)("div",{className:n.row,style:{whiteSpace:"pre-line"},children:e.desc}),Object(O.jsxs)("div",{className:n.centeredRow,children:[Object(O.jsx)("div",{style:{display:"inline-block",maxWidth:"50%"},children:xe(e.metaphors)}),Object(O.jsx)("div",{style:{display:"inline-block"},children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)("div",{style:{fontSize:24},children:J(e.distance)}),Object(O.jsxs)("div",{style:{fontSize:15},children:[" ",q(e.time)," "]})]})})]}),Object(O.jsx)("div",{className:n.centeredRow,children:Object(O.jsx)(Be,{pictures:e.photos,isEditing:!1})}),Object(O.jsx)("div",{children:Object(O.jsx)(ze,{route:e.route,zoom:15,width:"100%"})})]})}var We=i(332),Pe=i.n(We);function Ee({journals:e,openJournal:t,friendsByJournal:i}){if(!e||!e.length)return Object(O.jsx)(Ne,{});var n=Pe.a.sortBy(e,(e=>new Date(e.createdAt))).reverse().map((e=>Object(O.jsx)(ge,{openJournal:t,journal:e,friends:i[e.id]},e.id)));return Object(O.jsx)("div",{children:n})}var Ye=i(333),Le=i.n(Ye);const qe=Object(f.a)((e=>({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(E.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(E.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(4)}px)`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}})));function Je(){const e=qe();return Object(O.jsxs)("div",{className:e.search,children:[Object(O.jsx)("div",{className:e.searchIcon,children:Object(O.jsx)(Le.a,{})}),Object(O.jsx)(Y.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})]})}var He=Object(f.a)((function(e){return{paper:{position:"absolute",width:"80%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:"18px"},mailIcon:{position:"absolute",display:"inline-block",marginLeft:"10px"}}}));function Ge(e){return Object(O.jsx)("div",{style:{margin:"5px",marginTop:"5px",width:"100%"},children:Object(O.jsx)(N.a,{expanded:!1,style:{boxShadow:"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)"},children:Object(O.jsx)(C.a,{children:Object(O.jsxs)(u.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row",width:"100%",children:[Object(O.jsx)(u.a,{flex:1,mr:1,children:Object(O.jsx)(k.a,{alt:e.name,src:"/biky"+e.picture,style:{border:"2px solid lightgray",width:"30px",height:"30px"}})}),Object(O.jsx)(u.a,{flex:8,mr:2,style:{minWidth:"75px"},children:Object(O.jsx)(g.a,{variant:"body2",color:"textPrimary",children:e.name})}),Object(O.jsxs)(u.a,{children:[Object(O.jsx)("div",{style:{display:"inline-block",marginRight:"10px"},children:Object(O.jsx)(S.a,{style:{color:"green",width:"30px",height:"30px"},onClick:function(){e.onAcceptClick(e.oid)},children:Object(O.jsx)(I.a,{})})}),Object(O.jsx)("div",{style:{display:"inline-block"},children:Object(O.jsx)(S.a,{style:{color:"red",width:"30px",height:"30px"},onClick:function(){e.onRejectClick(e.oid)},children:Object(O.jsx)(B.a,{})})})]})]})})})})}function $e(e){var t=He(),i=a.a.useState({top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"80vh",overflow:"scroll"}),n=Object(w.a)(i,1)[0],r=a.a.useState(!1),c=Object(w.a)(r,2),s=c[0],o=c[1];var l=function(){o(!1)},d=Object(O.jsx)("div",{style:n,className:t.paper,children:Object(O.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(O.jsxs)(u.a,{flex:1,display:"flex",alignItems:"center",flexDirection:"row",children:[Object(O.jsx)(u.a,{flexGrow:1,children:Object(O.jsx)(g.a,{variant:"h4",color:"textPrimary",children:Object(O.jsx)("b",{children:"Frequest"})})}),Object(O.jsx)(u.a,{children:Object(O.jsx)(S.a,{onClick:l,style:{width:"30px",height:"30px"},children:Object(O.jsx)(z.a,{})})})]}),Object(O.jsxs)(u.a,{flex:4,children:[Object(O.jsx)(g.a,{variant:"subtitle1",color:"textPrimary",style:{padding:"7px 0"},children:Object(O.jsx)("b",{children:"Received Frequests"})}),Object(O.jsx)(u.a,{display:"flex",alignItems:"center",flexDirection:"column",style:{paddingBottom:"5px"},children:null==e.frequests||0===e.frequests.length?Object(O.jsx)(g.a,{variant:"body1",color:"textPrimary",children:"You have received no frequests"}):e.frequests.map((function(t){return Object(O.jsx)(Ge,{oid:t.id,name:t.name,picture:t.picture,onRejectClick:e.onRejectClick,onAcceptClick:e.onAcceptClick},t.id)}))})]}),Object(O.jsx)(M.a,{style:{margin:"10px 0"}}),Object(O.jsxs)(u.a,{flex:4,children:[Object(O.jsx)(g.a,{variant:"subtitle1",color:"textPrimary",style:{padding:"7px 0"},children:Object(O.jsx)("b",{children:"Send a Frequest"})}),Object(O.jsx)(Je,{})]})]})});return Object(O.jsxs)("div",{className:t.mailIcon,children:[Object(O.jsx)(S.a,{onClick:function(){o(!0)},children:null==e.frequests||0===e.frequests.length?Object(O.jsx)(W.a,{}):Object(O.jsx)(F.a,{badgeContent:e.frequests.length,color:"primary",children:Object(O.jsx)(W.a,{})})}),Object(O.jsx)(P.a,{open:s,onClose:l,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:d})]})}var _e=i(198),Ve=i.n(_e),Ue=i(498),Ze=i(336),Ke=i.n(Ze),Xe=Object(f.a)((function(e){return{pro_bar:{backgroundColor:"hsl(0, 0%, 97%)",height:"4px",marginBottom:"12px",marginTop:"12px",position:"relative"},progress_bar_inner:{display:"block",width:0,height:"100%",position:"absolute",top:0,left:0,backgroundColor:"#ff85ac",transition:"width 1s linear 0s","&::after":{content:'""',width:"32px",height:"29px",backgroundImage:"url(".concat("/biky/images/bike.png",")"),backgroundSize:"contain",borderRadius:"50%",position:"absolute",right:"-4px",top:"-20px"}}}}));function Qe(e){var t=Xe();return Object(O.jsx)(u.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",children:Object(O.jsx)(u.a,{flex:5,style:{transform:"translateY(8px)"},children:Object(O.jsx)("div",{className:t.pro_bar,children:Object(O.jsx)("div",{className:t.progress_bar_inner,style:{width:e.value+"%"},"data-value":e.value,"data-percentage-value":e.value})})})})}function et({journal:e}){return Object(O.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"5px",padding:"7px",marginTop:"10px",fontSize:"11px"},children:[Object(O.jsx)("div",{style:{display:"inline-block",width:"30%"},children:$()(e.startTime).format("YYYY. M. D.")}),Object(O.jsx)("div",{style:{display:"inline-block",width:"70%"},children:e.title})]})}function tt({friend:e,journals:t}){console.log(t);var i=0,n=0;return t&&t.map((e=>{n+=e.distance,i+=$()(e.endTime).diff(e.startTime,"minute",!0)})),e.total_intimacy=(i+10*n)/2,e.total_intimacy>=100&&(e.total_intimacy=100),Object(O.jsxs)(N.a,{style:{boxShadow:"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)"},children:[Object(O.jsx)(C.a,{expandIcon:Object(O.jsx)(Ke.a,{}),children:Object(O.jsx)(it,{friend:e},e.id)}),Object(O.jsx)(Ue.a,{style:{backgroundColor:"#f0f0f0",padding:"10px"},children:Object(O.jsxs)("div",{style:{width:"100%"},children:[Object(O.jsxs)("div",{style:{display:"inline-block",width:"50%"},children:[Object(O.jsx)("b",{children:"Time: "}),q(i)]}),Object(O.jsxs)("div",{style:{display:"inline-block",width:"50%"},children:[Object(O.jsx)("b",{children:"Distance: "}),J(n)]}),Object(O.jsx)("div",{children:t&&t.map((e=>Object(O.jsx)(et,{journal:e},e.id)))})]})})]})}function it({friend:e}){return Object(O.jsxs)(u.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row",width:"100%",children:[Object(O.jsx)(u.a,{flex:1,mr:1,children:Object(O.jsx)(k.a,{alt:e.name,src:"/biky"+e.picture,style:{border:"2px solid lightgray",width:"30px",height:"30px"}})}),Object(O.jsx)(u.a,{flex:2,mr:2,style:{minWidth:"75px"},children:Object(O.jsx)(g.a,{variant:"body1",color:"textPrimary",children:e.name})}),Object(O.jsx)(u.a,{flex:6,children:Object(O.jsx)(Qe,{value:e.total_intimacy})})]})}var nt=Object(f.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}}));function at(e){var t=nt();return Object(O.jsx)("div",{className:t.root,children:Object(O.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(O.jsx)(u.a,{alignSelf:"flex-end",style:{marginRight:"10px"},children:Object(O.jsx)(S.a,{children:Object(O.jsx)(Ve.a,{})})}),Object(O.jsx)("div",{children:e.flist.map((function(t){return function(e,t){return console.log(t),Object(O.jsx)("div",{style:{margin:"10px",marginTop:"5px"},children:Object(O.jsx)(tt,{friend:e,journals:t})},e.id)}(t,e.journalsByFriend[t.id])}))})]})})}var rt=Object(f.a)((function(e){return{root:{position:"relative"},container:{display:"flex",textDecorationLine:"none",textDecorationColor:"black",alignItems:"center",justifyContent:"flex-end",margin:"5px"}}}));function ct(){var e=rt();return Object(O.jsx)("div",{className:e.root,children:Object(O.jsxs)(s.b,{className:e.container,to:"/biky/myPage",children:[Object(O.jsx)("div",{style:{marginRight:"10px"},children:" Nayeon Min "}),Object(O.jsx)("div",{children:Object(O.jsx)(k.a,{src:"/biky/images/nayeon.png"})})]})})}var st=Object(f.a)({page:{position:"relative",margin:"0 auto"},verticalAlign:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",display:"inline-block"},header:{position:"relative",height:"49px",fontSize:"30px",fontWeight:"bold",borderBottom:"solid 1px black",textAlign:"center"},avatar:{position:"relative",height:"50px"},content:{position:"relative",height:"calc(100vh - 160px)",overflow:"scroll"}});function ot(e){var t=e.journalRef,i=e.friendRef,n=e.frequestRef,r=st(),c=a.a.useState([]),s=Object(w.a)(c,2),o=s[0],l=s[1],d=a.a.useState([]),j=Object(w.a)(d,2),b=j[0],u=j[1],p=a.a.useState(null),x=Object(w.a)(p,2),h=x[0],g=x[1];a.a.useEffect((function(){i.on("value",(function(e){var i=e.val();t.once("value",(function(e){console.log(i),u(Object.values(i));var t=e.val();g(function(e,t){for(var i={},n=function(n){var a=e[n];i[a.id]=t.filter((function(e){return e.friends&&e.friends.includes(a.id)}))},a=0;a<e.length;a++)n(a);return console.log(i),i}(Object.values(i),Object.values(t)))}))})),n.on("value",(function(e){var t=e.val();console.log(t),l(null===t?[]:Object.values(t))}))}),[]);return h?Object(O.jsxs)("div",{className:r.page,children:[Object(O.jsx)("div",{className:r.header,children:Object(O.jsx)("div",{className:r.verticalAlign,children:"Friends"})}),Object(O.jsx)(ct,{}),Object(O.jsxs)("div",{className:r.content,children:[Object(O.jsx)($e,{frequests:o,onRejectClick:function(e){n.child(e).remove()},onAcceptClick:function(e){for(var t={id:"f"+b.length,picture:"",name:"",total_intimacy:0},a=0;a<o.length;a++)o[a].id===e&&(t.name=o[a].name,t.picture=o[a].picture);i.child("f"+b.length).set(t),n.child(e).remove()}}),Object(O.jsx)(at,{flist:b,journalsByFriend:h})]})]}):Object(O.jsx)(Ne,{})}const lt=Object(f.a)((e=>({container:{position:"relative",width:"calc(50% - 15px)",height:"calc(100% - 40px)",padding:"10px",paddingRight:"5px",display:"inline-block",verticalAlign:"top"},background:{position:"relative",width:"calc(100% - 20px)",height:"100%",backgroundColor:"darkgray",borderRadius:"10px",padding:"10px",color:"black",fontWeight:"bold",fontSize:"15px"}})));function dt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function jt(e){return`/biky/images/home/weather_${e}.png`}function bt(e){return"sunny"===e?dt(20,30):"cloudy"===e?dt(15,25):"rainy"===e?dt(10,20):dt(0,30)}function ut({weather:e,temperature:t}){const i=lt(),n={color:"black",backgroundSize:"100% 100%",backgroundImage:`url(${jt(e)}`};return"loading"===e?Object(O.jsx)("div",{className:i.container,children:Object(O.jsx)("div",{className:i.background,children:"Loading..."})}):Object(O.jsx)("div",{className:i.container,children:Object(O.jsxs)("div",{className:i.background,style:n,children:[e," ",Object(O.jsx)("br",{}),t||bt(e),"\u2103"]})})}var pt=Object(f.a)((function(e){return{bar:{position:"relative",width:"100%",height:"10px",backgroundColor:"white",borderRadius:"10px",marginTop:"10px"},slider:{position:"absolute",top:"5px",transform:"translateY(-50%)",width:"25px",height:"15px",backgroundColor:"darkgray",borderRadius:"10px",color:"white",textAlign:"center",fontSize:"10px",fontWeight:"bold",border:"solid 2px white",paddingTop:"2px"}}}));function xt(e){var t=pt(),i=e.amount,n=e.percentage;return Object(O.jsx)("div",{className:t.bar,children:Object(O.jsx)("div",{className:t.slider,style:{left:"calc(calc(100% - 29px) * ".concat(n)},children:i})})}const ht=Object(f.a)((e=>({container:{position:"relative",width:"calc(50% - 15px)",height:"calc(100% - 40px)",padding:"10px",paddingLeft:"5px",display:"inline-block",verticalAlign:"top"},background:{position:"relative",width:"calc(100% - 20px)",height:"100%",backgroundColor:"darkgray",borderRadius:"10px",padding:"10px",color:"white",fontWeight:"bold",fontSize:"12px"},text:{position:"relative",display:"inline-block",margin:"2px"},status:{position:"absolute",right:"10px",display:"inline-block",color:"darkgray",fontSize:"10px",backgroundColor:"white",padding:"3px 10px",borderRadius:"10px"}})));function gt({fineDust:e,ultraFineDust:t}){const i=ht();var n=e,a=n<=30?"GOOD":n<=80?"NORMAL":n<=150?"BAD":"VERY BAD",r=t,c=r<=15?"GOOD":r<=35?"NORMAL":r<=75?"BAD":"VERY BAD";return Object(O.jsx)("div",{className:i.container,children:Object(O.jsxs)("div",{className:i.background,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:i.text,children:"fine dust"}),Object(O.jsx)("div",{className:i.status,children:a}),Object(O.jsx)(xt,{amount:n,percentage:n/200})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:i.text,children:"ultra-fine dust"}),Object(O.jsx)("div",{className:i.status,children:c}),Object(O.jsx)(xt,{amount:r,percentage:r/100})]})]})})}function mt(e){var t=e.style,i=e.distance;return Object(O.jsx)("div",{className:t,style:{width:"100px"},children:i})}function ft(e){var t=e.style,i=e.time;return Object(O.jsx)("div",{className:t,style:{width:"120px"},children:i})}const Ot=[[36.36998994369789,127.36259606290608]],yt=[[36.36998994369789,127.36259606290608],[36.37002827883807,127.36267384697095],[36.3700698535462,127.36276504208145],[36.3701152077479,127.36284886111683],[36.370149223384736,127.36291725743892],[36.37018809837673,127.36299168874235],[36.37022481362909,127.36306075562754],[36.37026422851543,127.36312781084841],[36.37030040380235,127.36320157159956],[36.37024479104087,127.3632518630208],[36.37018917823964,127.3632954489192],[36.370133025467226,127.36334171701724],[36.370073093137364,127.36339267899076],[36.370033587613364,127.36342751252236],[36.36998497813373,127.36346847728863],[36.369932317829885,127.36351159809519],[36.36987560669357,127.36355974966256],[36.36981484471591,127.36360718254979],[36.36977202195536,127.36363880446574],[36.369723412312325,127.36367545715132],[36.369667858397364,127.36371929663801],[36.369616933940506,127.36376098008438],[36.36956427338752,127.3638005074904],[36.36951913573802,127.36383500412872],[36.369464160365524,127.36387525021487],[36.369413235775305,127.36391477762089],[36.36936288984086,127.36395574238713],[36.36931080780541,127.36399886319373],[36.36927841161092,127.36402717076376],[36.36923521666913,127.36407075666216],[36.36919580126378,127.3641404940996],[36.369174203772964,127.36421760761218],[36.36915260627612,127.36430142664757],[36.369138567897785,127.36435909412812],[36.36911967007975,127.36444090150667],[36.36909969238139,127.36453008496031],[36.369082954305824,127.36462463283225],[36.36907431529661,127.36468900584036],[36.369069995792195,127.36476477824834],[36.36901492208964,127.36474801444128],[36.36896308798104,127.36471649848397],[36.36891989286417,127.36466620706273],[36.36888317699597,127.36460786901408],[36.368854020259604,127.36456495368054],[36.36881784430013,127.36450862728874],[36.36877950856353,127.36444425426956],[36.368736313344755,127.3643825634595],[36.36869311810196,127.36431819044034],[36.368666661001086,127.3642813100768],[36.36862670536659,127.36422833644642],[36.36871804671542,127.36415542613142],[36.36876934104968,127.36411586355155],[36.36883629360016,127.36405819605517],[36.36879525817282,127.36397840033348],[36.36874666355984,127.3638858641184],[36.36870549761045,127.36380329494037],[36.368659062705106,127.3637020415456],[36.36861532747823,127.36361621085334],[36.36858617064448,127.36354245011674],[36.36853865578439,127.3634559488722],[36.36848628141639,127.36337481204593],[36.36844200614689,127.36329903964672],[36.368395571084285,127.36323399607524],[36.36836641417036,127.36316023532413]],vt=[[36.36998994369789,127.36259606290608],[36.37002827883807,127.36267384697095],[36.3700698535462,127.36276504208145],[36.3701152077479,127.36284886111683],[36.370149223384736,127.36291725743892],[36.37018809837673,127.36299168874235],[36.37022481362909,127.36306075562754],[36.37026422851543,127.36312781084841],[36.37030040380235,127.36320157159956],[36.37024479104087,127.3632518630208],[36.37018917823964,127.3632954489192],[36.370133025467226,127.36334171701724],[36.370073093137364,127.36339267899076],[36.370033587613364,127.36342751252236],[36.36998497813373,127.36346847728863],[36.369932317829885,127.36351159809519],[36.36987560669357,127.36355974966256],[36.36981484471591,127.36360718254979],[36.36977202195536,127.36363880446574],[36.369723412312325,127.36367545715132],[36.369667858397364,127.36371929663801],[36.369616933940506,127.36376098008438],[36.36956427338752,127.3638005074904],[36.36951913573802,127.36383500412872],[36.369464160365524,127.36387525021487],[36.369413235775305,127.36391477762089],[36.36936288984086,127.36395574238713],[36.36931080780541,127.36399886319373],[36.36927841161092,127.36402717076376],[36.36923521666913,127.36407075666216],[36.36919580126378,127.3641404940996],[36.369174203772964,127.36421760761218],[36.36915260627612,127.36430142664757],[36.369138567897785,127.36435909412812],[36.36911967007975,127.36444090150667],[36.36909969238139,127.36453008496031],[36.369082954305824,127.36462463283225],[36.36907431529661,127.36468900584036],[36.369069995792195,127.36476477824834],[36.36901492208964,127.36474801444128],[36.36896308798104,127.36471649848397],[36.36891989286417,127.36466620706273],[36.36888317699597,127.36460786901408],[36.368854020259604,127.36456495368054],[36.36881784430013,127.36450862728874],[36.36877950856353,127.36444425426956],[36.368736313344755,127.3643825634595],[36.36869311810196,127.36431819044034],[36.368666661001086,127.3642813100768],[36.36862670536659,127.36422833644642],[36.36871804671542,127.36415542613142],[36.36876934104968,127.36411586355155],[36.36883629360016,127.36405819605517],[36.36879525817282,127.36397840033348],[36.36874666355984,127.3638858641184],[36.36870549761045,127.36380329494037],[36.368659062705106,127.3637020415456],[36.36861532747823,127.36361621085334],[36.36858617064448,127.36354245011674],[36.36853865578439,127.3634559488722],[36.36848628141639,127.36337481204593],[36.36844200614689,127.36329903964672],[36.368395571084285,127.36323399607524],[36.36836641417036,127.36316023532413],[36.368312419856416,127.36320113901337],[36.36825086629285,127.36324941877777],[36.36821361016141,127.36328227583556],[36.36816123557458,127.36332653228624],[36.36810724111828,127.36337749425978],[36.36804892706339,127.36342242126274],[36.36799385263397,127.36343046788897],[36.3679295990885,127.3634371734118],[36.36786264575776,127.36343113844127],[36.36781909461797,127.36346999529697],[36.36776122452615,127.36351527215419],[36.36770624789901,127.3635655797733],[36.36764895642523,127.36361157531077],[36.36761560783714,127.36354826211146],[36.36757602007516,127.3634748839856],[36.36753465970533,127.36339636939093],[36.367494481039294,127.36331785479624],[36.367456665801406,127.3632496131546],[36.367420032275895,127.36318357284131],[36.367381626141906,127.36310579202788],[36.36733731134837,127.36303241390205],[36.36729772344482,127.36296123711993],[36.36725695379173,127.36288345630652],[36.36721618411469,127.36281227954262],[36.36717253855067,127.36272360771618],[36.36723067378139,127.36267501374762],[36.36729551687514,127.36263683277706],[36.36735365201396,127.3626007344004],[36.36741178710934,127.36256533022332],[36.36746265528677,127.36253409124845],[36.36752693919387,127.36249591027313],[36.36758563314963,127.36246120029558],[36.36764712200818,127.36242371351985],[36.36769966699907,127.36239108614839],[36.36776171475606,127.3623556819713],[36.36782208549915,127.36231958359463],[36.36788245619543,127.36228417941756],[36.36794450380667,127.3622466926418],[36.36800387879504,127.36222181127204],[36.368071371949235,127.36220303580814],[36.36813292565481,127.36216682598484],[36.368200418700035,127.36213061616427],[36.36826723033706,127.36214920931155],[36.36833202354691,127.3621626203572],[36.36838277819445,127.36216999643024],[36.36844379171126,127.36218139581905],[36.368502105470206,127.3621995007307],[36.36855339994425,127.36223436944944],[36.36859983491266,127.36227594369099],[36.36864195032968,127.3623208706848],[36.36868676542308,127.36236847989689],[36.368730500609814,127.36241944187043],[36.36877369583181,127.36247040384394],[36.36882121054834,127.3625233774743],[36.36886277843433,127.3625763882137],[36.36891137297479,127.36265149006941],[36.36896860650577,127.36260656306644],[36.369022060425884,127.36256498882489],[36.36906201586154,127.36253012011359],[36.369116009655926,127.3624845225583],[36.36917216316165,127.3624409366599],[36.369226696815886,127.36239802131377],[36.369276371006805,127.36235912928862],[36.3693314445243,127.36231219062878],[36.36938273845157,127.36226927528267],[36.36943889176478,127.36221898386141],[36.36947668724532,127.3621700335523],[36.36951502263839,127.36210364887627],[36.369573875529014,127.36205335745503],[36.36963110857263,127.36200708934749],[36.36970001070625,127.36195177575871],[36.36975487162625,127.36190862506331],[36.36981338989827,127.36185941812997],[36.3698603264014,127.36181551041393],[36.36993530282786,127.36182762288985],[36.36997065754048,127.36190029774524],[36.370009669620686,127.36196388823261],[36.370054167748314,127.36204564744494],[36.370100494539095,127.3621349769547],[36.37015718386597,127.36223793299293]],wt=vt,kt=Object(f.a)({map:{position:"relative",width:"100%",height:"100%",textAlign:"center",display:"inline-block"}});function St(e){var t=[];const i=e.length;for(var n=0;n<i;n++)t.push([e[n][1],e[n][0]]);return t}function Nt({route:e,lng:t,lat:i}){const a=kt(),r=Object(n.useRef)(null),c=Object(n.useRef)(null),[s,o]=Object(n.useState)(15);return Object(n.useEffect)((()=>{c.current||(c.current=new Ie.a.Map({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[t,i],zoom:s}),c.current.on("load",(function(){c.current.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:St(e)}}}),c.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":4}}),c.current.addSource("pointer",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t,i]}}]}}),c.current.addLayer({id:"pointer",type:"circle",source:"pointer",paint:{"circle-radius":5,"circle-color":"#FF0000","circle-opacity":.8}})})))})),Object(n.useEffect)((()=>{c.current.setCenter([t,i]),c.current.getSource("route")&&c.current.getSource("route").setData({type:"Feature",geometry:{type:"LineString",coordinates:St(e)}}),c.current.getSource("pointer")&&c.current.getSource("pointer").setData({type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t,i]}}]})})),Object(O.jsx)("div",{ref:r,className:a.map})}function Ct(e){kt();var t=parseInt(e.index),i=e.isRiding,a=e.mode;const[r,c]=Object(n.useState)(wt[0][1]),[s,o]=Object(n.useState)(wt[0][0]),[l,d]=Object(n.useState)(wt.slice(0,1));return Object(n.useEffect)((()=>{console.log("mode changed to "+a),"e11s"===a?(c(Ot[Ot.length-1][1]),o(Ot[Ot.length-1][0]),d(Ot)):"ori"===a?(c(yt[yt.length-1][1]),o(yt[yt.length-1][0]),d(yt)):"e11e"===a?(c(vt[vt.length-1][1]),o(vt[vt.length-1][0]),d(vt)):"none"===a&&(t>=wt.length&&(t=wt.length-1),c(wt[t][1]),o(wt[t][0]),d((e=>[...e,wt[t]])))}),[t,a]),Object(n.useEffect)((()=>{i||(e.saveRoute(St(l)),c(wt[0][1]),o(wt[0][0]),d(wt.slice(0,1)))}),[i]),Object(O.jsx)(Nt,{route:l,lng:r,lat:s})}function Ft(e){var t=e.style;return Object(O.jsx)(me.a,{className:t.button,style:{backgroundColor:"#FF85AC"},variant:"contained",children:Object(O.jsx)(g.a,{className:t.text,color:"textPrimary",children:"Start Ride"})})}function Rt(e){var t=e.style;return Object(O.jsx)(me.a,{className:t.button,variant:"contained",style:{backgroundColor:"#A9A9A9"},children:Object(O.jsx)(g.a,{className:t.text,color:"white",children:"Stop Ride"})})}function Bt(e){var t=e.amount,i=Object(n.useState)(Math.floor(3*Math.random()+1)),a=Object(w.a)(i,2),r=a[0];a[1];return Object(O.jsxs)("div",{style:{position:"relative"},children:[1===r?Object(O.jsx)(It,{amount:t}):null,2===r?Object(O.jsx)(zt,{amount:t}):null,3===r?Object(O.jsx)(Tt,{amount:t}):null]})}Ie.a.accessToken="pk.eyJ1IjoiYmFieWNyb2MiLCJhIjoiY2tvaW5rMWlpMDE3czJ3cWYyMXZkZmxidiJ9.8m_FmwtsgjCBUq2Jq9wVcg";var Dt=Object(f.a)((function(e){return{background:{position:"relative",borderRadius:"10px",padding:"10px"},img:{display:"inline-block",fontSize:60},text:{position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",width:"calc(85% - 20px)",textAlign:"center"}}}));function It(e){var t=Dt(),i=e.amount;return Object(O.jsxs)("div",{className:t.background,children:[Object(O.jsx)(V.Icon,{icon:je.a,className:t.img}),Object(O.jsxs)("div",{className:t.text,children:["You saved ",(1e3*i).toFixed(0)," won!"]})]})}var At=Object(f.a)((function(e){return{background:{position:"relative",borderRadius:"10px",padding:"10px"},img:{display:"inline-block",fontSize:60},text:{position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",width:"calc(85% - 20px)",textAlign:"center"}}}));function zt(e){var t=At(),i=e.amount;return Object(O.jsxs)("div",{className:t.background,children:[Object(O.jsx)(V.Icon,{icon:re.a,className:t.img}),Object(O.jsxs)("div",{className:t.text,children:["You skipped ",(.1*i).toFixed(2)," burgers!"]})]})}var Mt=Object(f.a)((function(e){return{background:{position:"relative",borderRadius:"10px",padding:"10px"},img:{display:"inline-block",fontSize:60},text:{position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",width:"calc(85% - 20px)",textAlign:"center"}}}));function Tt(e){var t=Mt(),i=e.amount;return Object(O.jsxs)("div",{className:t.background,children:[Object(O.jsx)(V.Icon,{icon:U.a,className:t.img}),Object(O.jsxs)("div",{className:t.text,children:["You planted ",(.05*i).toFixed(2)," trees!"]})]})}var Wt=Object(f.a)((function(e){return{modal:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:"75%",maxHeight:"75vh",overflowY:"scroll",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(4),outline:"none"},title:{fontSize:"20px",fontWeight:"bold",textAlign:"center",paddingBottom:"15px",position:"relative",top:"-5px",display:"flex",justifyContent:"space-between",alignItems:"center"},half:{display:"inline-block",width:"50%",paddingBottom:"10px"},label:{display:"inline-block",fontSize:"15px",fontWeight:"bold",padding:"5px",paddingLeft:"0"},button:{width:"100%",textAlign:"center",color:"white",fontWeight:"bold",fontSize:"15px",backgroundColor:"#FF85AC",borderRadius:"10px",padding:"10px",marginTop:"10px"}}}));function Pt(e){var t=Wt(),i=e.open,n=e.distance,a=e.time,r=e.amount,c=e.route,s=e.closeModal;return Object(O.jsx)("div",{children:Object(O.jsx)(P.a,{open:i,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(O.jsxs)("div",{className:t.modal,children:[Object(O.jsxs)("div",{id:"modal-title",className:t.title,children:[Object(O.jsx)(g.a,{style:{display:"inline-block",justifyContent:"flex-start",position:"relative",left:"30px",flex:1},variant:"h5",children:"Today's Ride"}),Object(O.jsx)(me.a,{style:{display:"flex",justifyContent:"flex-end",position:"relative",left:"5px"},size:"small",onClick:s,children:Object(O.jsx)("img",{alt:"close button",src:"/biky/images/close.png"})})]}),Object(O.jsx)(Bt,{amount:r}),Object(O.jsxs)("div",{id:"modal-description",children:[Object(O.jsxs)("div",{className:t.half,children:[Object(O.jsx)("div",{className:t.label,children:"Time"})," ",a]}),Object(O.jsxs)("div",{className:t.half,children:[Object(O.jsx)("div",{className:t.label,children:"Distance"})," ",n]}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:t.label,children:"Route"}),Object(O.jsx)(ze,{route:c,zoom:15,width:"100%",height:"300px"})]}),Object(O.jsx)(me.a,{className:t.button,onClick:e.handleJournal,children:"Journal Ride"})]})]})})})}const Et=["/biky/images/photo1.jpg","/biky/images/photo2.jpg","/biky/images/photo3.jpg","/biky/images/photo4.jpg","/biky/images/photo5.jpg","/biky/images/photo6.jpg"],Yt=e=>e<1?[]:e>=Et.length?Et:function(e,t){var i=new Array(t),n=e.length,a=new Array(n);if(t>n)throw new RangeError("getRandom: more elements taken than available");for(;t--;){var r=Math.floor(Math.random()*n);i[t]=e[r in a?a[r]:r],a[r]=--n in a?a[n]:n}return i}(Et,e);const Lt=Object(f.a)((e=>({page:{position:"relative",margin:"0 auto"},verticalAlign:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",display:"inline-block"},header:{position:"relative",height:"49px",fontSize:"30px",fontWeight:"bold",borderBottom:"solid 1px black",textAlign:"center"},avatar:{position:"relative",height:"50px"},content:{position:"relative",height:"calc(100vh - 160px)",overflow:"scroll"},weatherContainer:{position:"relative",width:"100%",height:"145px"},measuresContainer:{position:"absolute",zIndex:"1",width:"calc(100% - 20px)",padding:"10px"},measures:{display:"inline-block",padding:"10px",margin:"0 5px",backgroundColor:"white",borderRadius:"10px",textAlign:"center",fontWeight:"bold",fontSize:"20px"},mapContainer:{position:"relative",width:"100%",height:"60%"},buttonContainer:{position:"relative",width:"100%",height:"calc(40% - 145px)",minHeight:"50px"},button:{position:"relative",height:"calc(100% - 20px)",textAlign:"center",borderRadius:"10px",fontWeight:"bold",fontSize:"20px",margin:"10px",width:"calc(100% - 20px)"},buttonText:{position:"relative",textAlign:"center",fontWeight:"bold",fontSize:"25px",color:"white"},startButton:{position:"relative",height:"calc(100% - 20px)",textAlign:"center",borderRadius:"10px",fontWeight:"bold",fontSize:"25px",margin:"10px",width:"calc(100% - 20px)",color:e.palette.primary.main},stopButton:{}})));function qt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}const Jt=["sunny","cloudy","rainy"];function Ht(e,t){if(!t)return e;const{startPauseTime:i,endPauseTime:n}=t;if(!i||!n)return e;const[a,r]=i.split(":"),[c,s]=n.split(":"),o=e-(60*(c-a)+(s-r));return o>=0?o:0}function Gt(e){if(!e)return"Boramae Park";const{place:t}=e;return t||"Borameae Park"}function $t({journalRef:e,wizardRef:t}){const i=Lt(),[r,c]=Object(n.useState)(!1),[s,l]=Object(n.useState)(!1),[d,j]=Object(n.useState)(0),[b,u]=Object(n.useState)(0),[p,x]=Object(n.useState)([]),[h,g]=Object(n.useState)(0),[m,f]=Object(n.useState)("loading"),y=Object(n.useRef)(null),[v,w]=Object(n.useState)([]),[k,S]=Object(n.useState)($()()),[N,C]=Object(n.useState)(null),[F,R]=Object(n.useState)("none");a.a.useEffect((()=>{console.log("wizard changed"),t?(t.on("value",(e=>{const t=e.val();C(t),f(t.weather),R(t.mode),console.log(t)})),console.log("wizard mode")):(f(Jt[qt(0,Jt.length)]),console.log("non-wizard mode"))}),[t]),Object(n.useEffect)((()=>{"none"===F||(clearInterval(y.current),"e11s"===F?(u(0),j(0)):"ori"===F?(u(3.15),j(.756)):"e11e"===F&&(u(786.5/60),j(2.574)))}),[F]);const B=()=>{let t=e.push().key;const i=k.add(b,"minute"),n=Yt(3),a=function(){const e=["Met a beautiful cat","No play and all work makes Jack a dull boy","Come along with me","Dundun dance","Here's Jonny","Open the pot, HAL"];return e[qt(0,e.length-1)]}(),r=Ht(b,N);let c={createdAt:(new Date).toString(),id:t,route:p,hashtags:v,distance:d,time:r,date:i.format("YYYY. MM. DD"),weather:m,startTime:k.toString(),endTime:i.toString(),title:a,desc:`I rode ${parseInt(10*d)/10} km at ${Gt(N)}!`,photos:n,emojis:v,metaphors:{tree:parseInt(10*d)/10*.05,taxi:parseInt(10*d)/10*1e3,burger:parseInt(10*d)/10*.1}};return e.child(t).set(c),t};let D=Object(o.g)();return Object(O.jsxs)("div",{className:i.page,children:[Object(O.jsx)("div",{className:i.header,children:Object(O.jsx)("div",{className:i.verticalAlign,children:"Home"})}),Object(O.jsx)(ct,{}),Object(O.jsxs)("div",{className:i.content,children:[Object(O.jsxs)("div",{className:i.weatherContainer,children:[Object(O.jsx)(ut,{weather:m,temperature:N?N.temperature:15}),Object(O.jsx)(gt,{fineDust:N&&N.fineDust?N.fineDust:qt(10,70),ultraFineDust:N&&N.ultraFineDust?N.ultraFineDust:qt(10,200)})]}),r?Object(O.jsxs)("div",{className:i.measuresContainer,children:[Object(O.jsx)(mt,{distance:J(d),style:i.measures}),Object(O.jsx)(ft,{time:q(b),style:i.measures})]}):null,Object(O.jsx)("div",{className:i.mapContainer,children:Object(O.jsx)(Ct,{index:h,mode:N?N.mode:"none",isRiding:r,saveRoute:x})}),Object(O.jsx)("div",{onClick:()=>r?(c(!1),clearInterval(y.current),void l(!0)):(S($()()),c(!0),void(N&&"none"!==N.mode||(y.current=setInterval((()=>{g((e=>e+1/6)),j((e=>e+.001)),u((e=>e+1/360))}),1e3/6)))),className:i.buttonContainer,children:r?Object(O.jsx)(Rt,{style:{button:i.button,text:i.buttonText}}):Object(O.jsx)(Ft,{style:{button:i.startButton,text:i.buttonText}})})]}),Object(O.jsx)(Pt,{handleJournal:()=>{const e=B();D.push(`/biky/edit/${e}`)},open:s,distance:J(d),time:q(Ht(b,N)),amount:d,route:p,closeModal:()=>{console.log("closing modal"),B(),l(!1),g(0),j(0),u(0)}})]})}var _t=i(158),Vt=Object(f.a)((function(e){return{disabled:{backgroundColor:"gray",opacity:.3},abled:{backgroundColor:"white"}}}));function Ut(e){var t=e.friend,i=e.disabled,n=Vt();return Object(O.jsxs)(u.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row",width:"120px",borderRadius:10,className:i?n.disabled:n.abled,style:{boxShadow:"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)"},m:1,children:[Object(O.jsx)(u.a,{flex:1,mr:1,mt:1,mb:1,ml:1,children:Object(O.jsx)(k.a,{alt:t.name,src:"/biky"+t.picture,style:{border:"1.5px solid lightgray",width:"30px",height:"30px"}})}),Object(O.jsx)(u.a,{flex:2,mt:1,mb:1,style:{minWidth:"60px"},children:Object(O.jsx)(g.a,{variant:"body2",color:"textPrimary",children:t.name})})]})}var Zt=i(499),Kt=i(337),Xt=i.n(Kt),Qt=i(500),ei=Object(f.a)((function(e){return{menuButton:{marginRight:e.spacing(2)}}}));function ti(e){var t=e.onSubmit,i=e.string,n=ei();return Object(O.jsx)(Zt.a,{position:"static",style:{width:"100%"},children:Object(O.jsxs)(Qt.a,{variant:"dense",children:[Object(O.jsx)(g.a,{variant:"h6",color:"inherit",style:{flexGrow:1},children:i}),Object(O.jsx)(S.a,{edge:"end",className:n.menuButton,color:"inherit","aria-label":"menu",onClick:t,children:Object(O.jsx)(Xt.a,{})})]})})}var ii=Object(f.a)((function(e){return{paper:Object(_t.a)({top:"50%",left:"50%",position:"absolute",width:"80%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),transform:"translate(-50%, -50%)",maxHeight:"80vh",overflow:"scroll"},"padding",0),menuButton:{marginRight:e.spacing(2)}}}));"translate(-".concat(50,"%, -",50,"%)");function ni(e){var t=e.friend,i=e.onClick,n=e.disabled;return Object(O.jsx)(p.a,{onClick:i,children:Object(O.jsx)(Ut,{friend:t,disabled:n})})}function ai(e){var t=e.allFriends,i=e.selectedFriends,n=e.addFriend,a=e.removeFriend,r=e.close,c=ii();return Object(O.jsxs)("div",{className:c.paper,children:[Object(O.jsx)(ti,{onSubmit:r,string:"Frineds"}),Object(O.jsx)(u.a,{display:"flex",flexDirection:"row",flexWrap:"wrap",style:{padding:"1%"},children:t.map((function(e){return Object(O.jsx)(ni,{friend:e,onClick:function(){return i.includes(e)?a(e):n(e)},disabled:i.includes(e)},e.id)}))})]})}var ri=i(501);function ci(e){var t=e.friend,i=e.removeFriend;return Object(O.jsx)("div",{style:{display:"inline-block",marginRight:"10px",marginBottom:"10px"},children:Object(O.jsxs)(u.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row",width:"100%",borderRadius:"borderRadius",style:{backgroundColor:"white",boxShadow:"0px 1.77918px 3.55836px rgba(0, 0, 0, 0.25)"},mr:2,children:[Object(O.jsx)(u.a,{mr:1,mt:1,mb:1,ml:1,children:Object(O.jsx)(k.a,{alt:t.name,src:"/biky"+t.picture,style:{border:"1.5px solid lightgray",width:"30px",height:"30px"}})}),Object(O.jsx)(u.a,{mt:1,mb:1,mr:1,children:Object(O.jsx)(g.a,{variant:"body2",color:"textPrimary",children:t.name})}),Object(O.jsx)(u.a,{children:Object(O.jsx)(S.a,{edge:"end","aria-label":"delete",onClick:function(){return i(t)},children:Object(O.jsx)(ri.a,{})})})]},t.id)})}var si=i(338),oi=(i(407),i(339)),li=i.n(oi);i(276);var di=function(e){return e};function ji(e){var t=e.handleSubmit,i=e.hashtags,n=a.a.useState(""),r=Object(w.a)(n,2),c=r[0],s=r[1],o=a.a.useState([]),l=Object(w.a)(o,2),d=l[0],j=l[1],b=function(e){e.preventDefault(),t(c),j(i.filter((function(e){return e!==c}))),s("")},u={placeholder:"+ New Hashtag",value:c,onChange:function(e,t){var i=t.newValue;s(i)}};return Object(O.jsx)(li.a,{suggestions:d,onSuggestionsFetchRequested:function(e){var n=e.value;if("suggestion-selected"===e.reason)return t(n),s(""),void j(i.filter((function(e){return e!==n})));j(function(e){if(0===e.length)return i;var t=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp("^"+t,"i");return i.filter((function(e){return n.test(e)}))}(n))},onSuggestionsClearRequested:function(){j([])},getSuggestionValue:di,renderSuggestion:function(e){return Object(O.jsx)("div",{children:e})},inputProps:u,renderInputComponent:function(e){return Object(O.jsx)("form",{className:"inputContainer",onSubmit:b,children:Object(O.jsx)("input",Object(si.a)({},e))})},highlightFirstSuggestion:!0,alwaysRenderSuggestions:!0})}i(439);var bi=i(340),ui=i(515),pi=i(503);const xi=Object(f.a)((e=>({root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},photoSelector:{color:e.palette.primary.main}})));function hi({onSubmit:e,addHashtag:t}){const i=xi(),[a,r]=Object(n.useState)(null),[c,s]=Object(n.useState)([]),[o,l]=Object(n.useState)(!1),d=e=>new Promise(((t,i)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>i(n.error),n.readAsDataURL(e)})),j=async e=>{const i=await bi.load({}),n=(await i.detect(e,2)).map((e=>e.class));s(c.concat(n)),console.log(n),t(n)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{accept:"image/jpeg",className:i.input,id:"photoSelector",type:"file",multiple:!0,onChange:async({target:t})=>{l(!0),e(Array.from(t.files));for(var i=0;i<t.files.length;i++){var n=t.files[i],a=document.createElement("img"),r=await d(n);a.src=r,a.onload=async()=>{await j(a),l(!1),a.remove()}}}}),Object(O.jsx)(ui.a,{title:"Select Image",children:Object(O.jsx)("label",{htmlFor:"photoSelector",children:Object(O.jsx)(S.a,{className:i.photoSelector,"aria-label":"upload picture",component:"span",children:Object(O.jsx)(pi.a,{fontSize:"large"})})})})]})}var gi=i(508);const mi=["bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe"],fi=Object(f.a)((e=>({root:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{marginBottom:"10px",width:"100%"}},page:{position:"relative",margin:"0 auto"},verticalAlign:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",display:"inline-block"},header:{position:"relative",height:"49px",fontSize:"30px",fontWeight:"bold",borderBottom:"solid 1px black",textAlign:"center"},content:{position:"relative",height:"calc(100vh - 130px)",overflowY:"scroll",padding:"10px"},hashtagGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap"},picture:{},title:{color:e.palette.primary.light},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"},textField:{marginTop:"10px",flexGrow:1},addButton:{border:"solid 1px lightgray",marginLeft:"10px",display:"inline-block",marginBottom:"10px"},submitButton:{width:"100%",textAlign:"center",color:"white",fontWeight:"bold",backgroundColor:"#4BA9FF",borderRadius:"10px",padding:"10px",marginTop:"10px",backgroundColor:e.palette.primary.main}})));function Oi({journal:e,onSubmit:t,openFriendAddPage:i,friends:n,removeFriend:r,addFriend:c,pictures:o,removePicture:l,onSubmitPictures:d,preference:j}){const b=fi();console.log(e);const[p,x]=a.a.useState(e.title),[h,m]=a.a.useState(e.desc),[f,y]=a.a.useState(e.hashtags?e.hashtags:[]),[v,w]=a.a.useState(["What did you do at Duck Pond?"]),k=e=>{console.log("sug!");const t={};j.forEach((e=>{t[e]=(t[e]||0)+1}));let i=Object.keys(t).sort((function(e,t){return e-t}));var a=["What did you do at Duck Pond?"];n.map((e=>a.push("Did you rode a bike with "+e+"? How was it?")));for(var r=!1,c=0;c<i.length;c++)if(e.includes(i[c])&&mi.includes(i[c])){e.filter((e=>e!==i[c])).map((e=>a.push("Did you see a "+e+" during riding?")));const t=Math.floor(Math.random()*a.length);w([a[t],"Did you meet a "+i[c]+"?"]),r=!0;break}if(!1===r){e.map((e=>a.push("Did you see a "+e+" during riding?")));const t=Math.floor(Math.random()*a.length);if(a.length>1){for(var s=Math.floor(Math.random()*a.length);t===s;)s=Math.floor(Math.random()*a.length);w([a[t],a[s]])}else w([a[t]])}};return Object(O.jsxs)("div",{className:b.page,children:[Object(O.jsx)("div",{className:b.header,children:Object(O.jsx)("div",{className:b.verticalAlign,children:"Journal"})}),Object(O.jsx)("div",{className:b.content,children:Object(O.jsxs)("div",{className:b.root,noValidate:!0,autoComplete:"off",children:[Object(O.jsxs)(u.a,{display:"flex",flexDirection:"row",alignItems:"center",children:[Object(O.jsx)(S.a,{"aria-label":"delete",onClick:()=>{x("")},className:b.title,children:Object(O.jsx)(B.a,{})}),Object(O.jsx)(gi.a,{onChange:e=>{x(e.target.value)},id:"title",label:"Title",variant:"outlined",value:p,defaultValue:e.title,className:b.textField})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{style:{position:"absolute",right:"10px"},children:Object(O.jsxs)("div",{children:[(N=e.weather,Object(O.jsx)("div",{style:{display:"inline-block",verticalAlign:"top"},children:le(N)})),Object(O.jsx)("div",{style:{display:"inline-block",margin:"5px"},children:e.date})]})}),Object(O.jsx)(g.a,{style:{marginBottom:"10px"},children:"Records"}),Object(O.jsx)(ze,{route:e.route}),Object(O.jsxs)("div",{style:{margin:"10px 0"},children:[Object(O.jsx)("div",{style:{display:"inline-block",width:"50%"},children:Object(O.jsxs)(g.a,{style:{marginBottom:"10px"},children:["Distance: ",J(e.distance)]})}),Object(O.jsx)("div",{style:{display:"inline-block",width:"50%"},children:Object(O.jsxs)(g.a,{style:{marginBottom:"10px"},children:["Time: ",q(e.time)]})})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(g.a,{style:{marginBottom:"10px",display:"inline-block"},children:"Friends"}),Object(O.jsx)(me.a,{onClick:i,className:b.addButton,children:"+"}),Object(O.jsx)("div",{children:n.map((e=>Object(O.jsx)(ci,{friend:e,removeFriend:r,style:{display:"inline-block"}},e.id)))})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(g.a,{style:{marginBottom:"10px",display:"inline-block"},children:"Pictures"}),Object(O.jsx)(hi,{onSubmit:d,addHashtag:e=>{const t=e.filter((e=>!f.includes(e)));k([...f,...t]),y([...f,...t])}}),Object(O.jsx)(Be,{pictures:o,removePicture:l,isEditing:!0})]}),Object(O.jsx)("div",{children:v.map((e=>function(e){const t=e.length;return Object(O.jsxs)("div",{style:{width:"calc(100% - 20px)",borderRadius:"5px",padding:"5px 10px",boxShadow:"0px 1.43351px 2.86702px rgba(0, 0, 0, 0.25)",marginBottom:"10px"},children:[Object(O.jsx)("div",{style:{display:"inline-block",backgroundColor:"pink",color:"white",width:"15px",height:"15px",textAlign:"center",padding:"3px",fontWeight:"bold",fontSize:"14px",borderRadius:"20px",marginRight:"10px"},children:e[t-1]}),Object(O.jsx)("div",{style:{display:"inline-block",width:"calc(100% - 31px)"},children:e})]})}(e)))}),Object(O.jsx)(gi.a,{onChange:e=>{m(e.target.value)},id:"desc",label:"Description",variant:"outlined",multiline:!0,defaultValue:e.desc,rows:5}),Object(O.jsxs)("div",{className:b.hashtagGroup,children:[f.map((e=>Object(O.jsxs)("div",{children:["#",e,Object(O.jsx)(S.a,{"aria-label":"delete",onClick:()=>(e=>{y(f.filter((t=>t!==e)))})(e),children:Object(O.jsx)(ye.a,{})})]},e))),Object(O.jsx)(ji,{handleSubmit:e=>{f.includes(e)||y([...f,e])},hashtags:de.filter((e=>!f.includes(e)))})]}),Object(O.jsx)(me.a,{onClick:()=>{t({title:p,desc:h,hashtags:f})},component:s.b,className:b.submitButton,to:"/biky/journal",children:"Save"})]})})]});var N}$()(),$()().add(2,"hour"),$()(),$()().add(1,"hour"),$()(),$()().add(2,"hour"),$()(),$()().add(2,"hour"),$()(),$()().add(2,"hour");var yi={title:"\uc81c\ubaa91",desc:"\ub0b4\uc6a91",friends:["1"],hashtags:["happy"],photos:["../"],emojis:["happy","exited"],distance:100,startTime:$()(),endTime:$()().add(2,"hour"),weather:"sunny",metaphor:{tree:1,taxi:2,hamburger:3},map:"../",route:[[126.91462625155943,37.49468356316903],[126.91466456325881,37.49457548665683],[126.91467809668889,37.4945003236157],[126.91469501347642,37.494409948906565],[126.91470290797731,37.49436968291182],[126.91484578727844,37.49369203740101],[126.91634996665469,37.493628630563954],[126.91635767048872,37.494331551409644],[126.91753635713798,37.49434377606901],[126.9184608172214,37.49440489929814],[126.91876897058253,37.49367752962703]]};function vi({journalRef:e,friendRef:t,storageRef:i}){let{id:n}=Object(o.h)();const[r,c]=a.a.useState(yi),[s,l]=a.a.useState(!0),[d,j]=a.a.useState([]),[b,u]=a.a.useState([]),[p,x]=a.a.useState(!1),[h,g]=a.a.useState([]),[m,f]=a.a.useState([]),[y,v]=a.a.useState(!1),[w,k]=a.a.useState(!1);a.a.useEffect((()=>{e.once("value",(e=>{const i=e.val(),a=(r=n,i[String(r)]||(console.log(`No such journal: ${r}`),yi));var r;S(i?Object.values(i):[]),t.once("value",(e=>{const t=e.val();let i=(n=t)?Object.values(n):[];var n;let r=L(a.friends);f(function(e,t){return t.filter((t=>e.includes(t.id)))}(r,i)),j(i),c(a),g(L(a.photos)),l(!1)}))}))}),[e,n,t]);const S=e=>{const t=e.map((e=>e.hashtags)).flat();u(t)};a.a.useEffect((()=>{!0===y&&async function(){const e=await async function(e,t){if(!e)return null;const i=e.map((e=>{const i=t.child(`photos${e.name}`);return i.put(e).then((()=>i.getDownloadURL()))}));return await Promise.all(i)}(w,i);g((t=>[...t.slice(0,t.length-w.length),...e])),v(!1),k([])}()}),[y,w,i]);const N=e=>{f(m.filter((t=>t!==e)))},C=e=>{m.includes(e)||f([...m,e])};return s?Object(O.jsx)(Ne,{}):Object(O.jsxs)("div",{children:[Object(O.jsx)(Oi,{journal:r,onSubmit:({title:t,desc:i,hashtags:n})=>{const a={...r,title:t,desc:i,friends:m.map((e=>e.id)),hashtags:n,photos:h};e.child(r.id).set(a)},openFriendAddPage:()=>x(!0),friends:m,removeFriend:N,addFriend:C,pictures:h,removePicture:e=>{g(h.filter((t=>t!==e)))},onSubmitPictures:e=>{const t=e.map((e=>"loading"));v(!0),k(e),g([...h,...t])},preference:b}),Object(O.jsx)(P.a,{open:p,onClose:()=>x(!1),children:Object(O.jsx)(ai,{allFriends:d,selectedFriends:m,addFriend:C,removeFriend:N,close:()=>x(!1)})})]})}const wi=Object(f.a)({page:{position:"relative",margin:"0 auto"},verticalAlign:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",display:"inline-block"},header:{position:"relative",height:"49px",fontSize:"30px",fontWeight:"bold",borderBottom:"solid 1px black",textAlign:"center"},avatar:{position:"relative",height:"50px",borderBottom:"solid 1px black"},content:{position:"relative",height:"calc(100vh - 160px)",overflow:"scroll"}});function ki({journalRef:e,friendRef:t}){const i=wi(),[n,r]=a.a.useState([]),[c,s]=a.a.useState([]);a.a.useEffect((()=>{e.on("value",(e=>{const i=e.val();let n=i?Object.values(i):[];t.once("value",(e=>{let t=e.val(),i=t?Object.values(t):[];r(n),s(function(e,t){let i={};for(let n=0;n<e.length;n++){let a=e[n];i[a.id]=t.filter((e=>a.friends&&a.friends.includes(e.id)))}return i}(n,i))}))}))}),[]);const[o,l]=a.a.useState(null),[d,j]=a.a.useState(!1),b=()=>{j(!1),l(null)};return Object(O.jsxs)("div",{className:i.page,children:[Object(O.jsx)("div",{className:i.header,children:Object(O.jsx)("div",{className:i.verticalAlign,children:"Journal"})}),Object(O.jsx)(ct,{}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(O.jsx)("div",{style:{flexGrow:1,marginLeft:"20px"},children:Object(O.jsx)(Je,{})}),Object(O.jsx)("div",{style:{marginRight:"10px"},children:Object(O.jsx)(S.a,{children:Object(O.jsx)(Ve.a,{})})})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(Ee,{journals:n,openJournal:e=>{j(!0),l(e)},friendsByJournal:c}),Object(O.jsx)(P.a,{open:d,onClose:b,children:Object(O.jsx)(Te,{journal:o,friends:o?c[o.id]:null,handleClose:b})})]})]})]})}var Si=i(365);const Ni=[{id:"r0",picture:"/images/cactus.png",name:"nayoung"},{id:"r1",picture:"/images/summer.png",name:"mangoo"}],Ci=[{id:"f0",picture:"/images/cat1.jpg",name:"nicole",total_intimacy:0},{id:"f1",picture:"/images/sky0.jpg",name:"junho",total_intimacy:0},{id:"f2",picture:"/images/cat2.jpg",name:"sanga",total_intimacy:0}],Fi={date:"2021. 05. 25",desc:"I rode 700 m at Boramae Park!",distance:.7,emojis:["happy","exited"],endTime:"Tue, 25 May 2021 12:17:15 GMT",hashtags:["sad"],createdAt:new Date("2021-05-25 12:17:15 GMT").toString(),id:"j0",metaphors:{burger:.06999999999999999,taxi:700,tree:.034999999999999996},photos:Yt(2),route:[[126.91468074800363,37.49470666236267],[126.91474014452083,37.49415293252939],[126.91481439016731,37.493646325043095],[126.91561624314943,37.493646325043095],[126.91635869961434,37.493669888258175],[126.91641809613154,37.4943178737601],[126.91747238431171,37.494341436763335],[126.91845242684539,37.49436499975911]],startTime:"Tue, 25 May 2021 10:03:55 GMT",time:2,title:"To the moon \ud83d\ude80",weather:"rainy"},Ri=Object(Si.a)(me.a)({background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",width:"60vw",height:"40px",padding:"0 30px",marginBottom:"10px"}),Bi=Object(f.a)((e=>({background:{position:"fixed",top:0,left:0,background:"linear-gradient(0deg, #FFEDE8, #FFFFF5)",backgroundRepeat:"no-repeat",width:"100%",height:"100%"},grid:{margin:"auto"},textField:{width:"60vw",background:"#FFFFFF",marginBottom:"2vh"},submit:{marginTop:"3vh"},login:{marginBottom:"2vh"},logo:{paddingTop:e.spacing(12),paddingBottom:e.spacing(15)},form:{display:"flex",alignItems:"center",flexDirection:"column"}})));function Di({db:e,setJournalRef:t,setFriendRef:i,setFrequestsRef:a}){const r=Bi(),[c,s]=Object(n.useState)({id:"id123",password:"password123"});let l=Object(o.g)();const d=async n=>{if(n.preventDefault(),0===c.id.length)return void alert("You should enter ID!");if(0===c.password.length)return void alert("You should enter password!");t(c.id),i(c.id),a(c.id);await async function(e,t){const i=e.ref(`user/${t}`),n=(await i.once("value")).hasChild("journals");if(!n){const e=i.child("frequests"),t=i.child("friends"),n=i.child("journals");for(var a=0;a<Ni.length;a++)await e.child(Ni[a].id).set(Ni[a]);for(a=0;a<Ci.length;a++)await t.child(Ci[a].id).set(Ci[a]);await n.child("j0").set(Fi)}return n}(e,c.id)?l.push("/biky/home"):l.push("/biky/tutorial")},j=e=>{const{name:t,value:i}=e.target;s({...c,[t]:i})};return Object(O.jsxs)("div",{className:r.background,children:[Object(O.jsx)(x.a,{container:!0,className:r.logo,justify:"center",children:Object(O.jsx)("img",{src:"/biky/images/logo.png",alt:"logo"})}),Object(O.jsxs)("div",{className:r.form,children:[Object(O.jsx)(gi.a,{type:"id",name:"id",required:!0,fullWidth:!0,variant:"outlined",onChange:j,placeholder:"Enter ID",className:r.textField}),Object(O.jsx)("form",{onSubmit:d,children:Object(O.jsx)(gi.a,{type:"password",name:"password",required:!0,fullWidth:!0,variant:"outlined",onChange:j,placeholder:"Enter password",className:r.textField})}),Object(O.jsx)(Ri,{onClick:d,className:r.submit,children:"Login"}),Object(O.jsx)(g.a,{className:r.character,align:"center",variant:"body2",children:"Don't have an account?"}),Object(O.jsxs)("div",{onClick:()=>alert("Please look for next update for sign up!"),children:[" ",Object(O.jsx)("b",{children:"SIGN UP"})," "]})]})]})}i(504);Object(Si.a)(me.a)({background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",width:"60%",height:"40px",padding:"0 30px",marginBottom:"10px"}),Object(f.a)((e=>({background:{position:"fixed",top:0,left:0,background:"linear-gradient(0deg, #FFEDE8, #FFFFF5)",backgroundRepeat:"no-repeat",width:"100%",height:"100%"},logo:{paddingTop:e.spacing(12),paddingBottom:e.spacing(34)},character:{width:"60%"}})));var Ii=Object(f.a)((function(e){var t;return t={root:{flexGrow:1,padding:e.spacing(2)},paper:{padding:e.spacing(2)},badgeBox:{width:"100%",height:"100%"},badge:{display:"inline-block",width:"100%",top:"100%"},page:{position:"relative",margin:"0 auto"},verticalAlign:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",display:"inline-block"},header:{position:"relative",height:"49px",fontSize:"30px",fontWeight:"bold",borderBottom:"solid 1px black",textAlign:"center"},content:{position:"relative",height:"calc(100vh - 110px)",overflow:"scroll"},bold:{fontWeight:"bold",fontSize:"20px"},roundBox:{boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",borderRadius:"5px",padding:"15px"},avatar:{position:"relative",display:"inline-block",textAlign:"center",width:"90px",height:"100%"},personalInfo:{display:"inline-block",width:"calc(100% - 90px - 10px)",marginLeft:"10px",lineHeight:"200%"},recordsContainer:{position:"relative",width:"100%",margin:"15px 0"},metaphorContainer:{position:"relative",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-around"},metaphorItem:{position:"relative",display:"inline-block",width:"calc(100% / 3)"}},Object(_t.a)(t,"badgeBox",{width:"100%",height:"100%",maxHeight:"50px",maxWidth:"50px",overflow:"hidden"}),Object(_t.a)(t,"badge",{margin:"auto",display:"block",width:"50px",height:"50px",borderRadius:"50%"}),t}));function Ai(e,t){var i;Ii();return"taxi"===e?i=je.a:"burger"===e?i=re.a:"tree"===e&&(i=U.a),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsx)("div",{style:{marginRight:10},children:Object(O.jsx)(V.Icon,{style:{fontSize:60},icon:i})}),Object(O.jsx)("div",{children:t})]})}function zi(e){var t=e.mainBadge,i=Ii(),n=Object(o.g)();return Object(O.jsxs)("div",{className:i.page,children:[Object(O.jsx)("div",{className:i.header,children:Object(O.jsx)("div",{className:i.verticalAlign,children:"My Page"})}),Object(O.jsx)("div",{className:i.content,children:Object(O.jsx)(u.a,{p:"10px",children:Object(O.jsxs)("div",{children:[Object(O.jsx)(u.a,{className:i.roundBox,children:Object(O.jsxs)("div",{style:{position:"relative"},children:[Object(O.jsxs)("div",{className:i.avatar,children:[Object(O.jsx)("div",{children:Object(O.jsx)("div",{style:{display:"inline-block",marginBottom:"5px"},children:Object(O.jsx)("img",{src:"/biky/images/nayeon.png",width:"100%",alt:"profile"})})}),"Nayeon Min"]}),Object(O.jsxs)("div",{className:i.personalInfo,style:{whiteSpace:"nowrap"},children:["Age: 28",Object(O.jsx)("br",{}),"Gender: Female",Object(O.jsx)("br",{}),"Job: Freelancer Designer",Object(O.jsx)("br",{}),"Favorite: Boramae Park",Object(O.jsx)("br",{})]})]})}),Object(O.jsx)(u.a,{className:i.recordsContainer,children:Object(O.jsxs)(u.a,{className:i.roundBox,children:[Object(O.jsx)(g.a,{className:i.bold,children:"Records"}),Object(O.jsxs)(g.a,{style:{marginBottom:"10px",lineHeight:"200%"},children:["You rode a bike for \xa0",Object(O.jsx)("div",{style:{fontWeight:"bold",fontSize:"18px",display:"inline-block"},children:"1029.9km and 47.7hrs!"})]}),Object(O.jsxs)("div",{className:i.metaphorContainer,children:[Ai("taxi","1,031,870"),Ai("burger","103.5"),Ai("tree","51.49")]})]})}),Object(O.jsx)("div",{children:Object(O.jsxs)(h.a,{className:i.paper,onClick:function(){n.push("/biky/badgeDetail")},children:[Object(O.jsx)(g.a,{className:i.bold,style:{marginBottom:"10px"},children:"Representative Badge"}),Object(O.jsxs)(x.a,{container:!0,spacing:2,children:[Object(O.jsx)(x.a,{item:!0,children:Object(O.jsx)(u.a,{className:i.badgeBox,children:Object(O.jsx)("img",{className:i.badge,src:"/biky"+m[t].thumbnail,alt:"\ub300\ud45c \ubc43\uc9c0"})})}),Object(O.jsxs)(x.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(O.jsx)(x.a,{item:!0,xs:!0,children:Object(O.jsx)(g.a,{variant:"h6",children:m[t].title})}),Object(O.jsx)(x.a,{item:!0,xs:!0,children:Object(O.jsx)(g.a,{variant:"body2",children:m[t].description})})]})]})]})})]})})})]})}var Mi=i(505),Ti=i(506),Wi=i(361),Pi=i.n(Wi),Ei=i(360),Yi=i.n(Ei),Li=i(359),qi=i.n(Li);const Ji=Object(f.a)({root:{width:"100%",height:"60px",position:"fixed",bottom:0,zIndex:1}});var Hi=Object(o.i)((()=>{const e=Ji(),[t,i]=a.a.useState(window.location.pathname);return Object(o.g)().listen(((e,t)=>{i(e.pathname)})),Object(O.jsx)("div",{children:(n=t,"/biky"===n||"/biky/login"===n||"/biky/404"===n||"/biky/"===n?null:Object(O.jsxs)(Mi.a,{value:t,onChange:(e,t)=>{i(t)},className:e.root,children:[Object(O.jsx)(Ti.a,{label:"FRIEND",value:"/biky/friend",icon:Object(O.jsx)(qi.a,{}),component:s.b,to:"/biky/friend"}),Object(O.jsx)(Ti.a,{label:"HOME",value:"/biky/home",icon:Object(O.jsx)(Yi.a,{}),component:s.b,to:"/biky/home"}),Object(O.jsx)(Ti.a,{label:"JOURNAL",value:"/biky/journal",icon:Object(O.jsx)(Pi.a,{}),component:s.b,to:"/biky/journal"})]}))});var n}));function Gi(){return Object(O.jsx)("div",{style:{position:"fixed",top:0,left:0,background:"linear-gradient(0deg, #FFEDE8, #FFFFF5)",backgroundRepeat:"no-repeat",width:"100%",height:"100%"},children:Object(O.jsxs)("div",{style:{position:"relative",textAlign:"center",top:"50%"},children:["No such page! Please go to",Object(O.jsx)("div",{style:{marginLeft:8},children:Object(O.jsx)(s.b,{to:"/biky",children:" login page "})})]})})}var $i=i(362),_i=i.n($i),Vi=i(363),Ui=i.n(Vi);function Zi(e){return`url(/biky/images/tutorial/${e}.png)`}function Ki(){const[e,t]=a.a.useState(1);let i=Object(o.g)();return Object(O.jsx)("div",{style:{backgroundImage:Zi(e),height:"100%",backgroundPosition:"center",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",display:"contain",zIndex:-1},children:Object(O.jsxs)("div",{style:{height:"100%",alignItems:"center",justifyContent:"space-between",display:"flex"},children:[Object(O.jsx)(S.a,{style:e>1?{color:"white"}:{color:"transparent"},onClick:()=>{t(e-1)},children:Object(O.jsx)(_i.a,{fontSize:"large"})}),Object(O.jsx)(S.a,{style:{color:"white"},onClick:()=>{e<9?t(e+1):i.push("/biky/home")},children:Object(O.jsx)(Ui.a,{fontSize:"large"})})]})})}var Xi=i(257);Xi.a.initializeApp({apiKey:"AIzaSyB4rOoT-hraHHNLSC5luce5NK7CI2LNp6Q",authDomain:"asdf-biky.firebaseapp.com",databaseURL:"https://asdf-biky-default-rtdb.firebaseio.com",projectId:"asdf-biky",storageBucket:"asdf-biky.appspot.com",messagingSenderId:"502792709500",appId:"1:502792709500:web:a26bdfd4d5e8a2117c70f9"});const Qi=Xi.a.storage();var en={db:Xi.a.database(),storage:Qi};const tn=Object(l.a)({typography:{fontFamily:"Noto Sans"},palette:{primary:{main:"#ff85ac",light:"#FFEDE8"},secondary:{main:"#FF8E53",light:"#FFF9E8"}}});var nn=function(){const[e,t]=a.a.useState(0),[i,n]=a.a.useState(null),[r,c]=a.a.useState(null),[l,j]=a.a.useState(null),[b,u]=a.a.useState(null),[p,x]=a.a.useState(null);return Object(O.jsx)(d.a,{theme:tn,children:Object(O.jsxs)(s.a,{children:[Object(O.jsx)(Hi,{}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/biky/home",exact:!0,render:()=>{if(r)return Object(O.jsx)($t,{journalRef:en.db.ref(r),wizardRef:en.db.ref("wizard/")});window.location.href="/biky"}}),Object(O.jsx)(o.b,{path:"/biky/journal",exact:!0,render:()=>{if(r&&b)return Object(O.jsx)(ki,{journalRef:en.db.ref(r),friendRef:en.db.ref(b)});window.location.href="/biky"}}),Object(O.jsx)(o.b,{path:"/biky/edit/:id",exact:!0,render:()=>{if(r&&b)return Object(O.jsx)(vi,{storageRef:en.storage.ref("/photos"),journalRef:en.db.ref(r),friendRef:en.db.ref(b)});window.location.href="/biky"}}),Object(O.jsx)(o.b,{path:"/biky/",exact:!0,render:()=>Object(O.jsx)(Di,{db:en.db,setJournalRef:e=>c(`/user/${e}/journals`),setFriendRef:e=>u(`/user/${e}/friends`),setFrequestsRef:e=>j(`/user/${e}/frequests`)})}),Object(O.jsx)(o.b,{path:"/biky/myPage",exact:!0,render:()=>{if(r)return Object(O.jsx)(zi,{mainBadge:e});window.location.href="/biky"}}),Object(O.jsx)(o.b,{path:"/biky/badgeDetail",exact:!0,render:()=>{if(b&&r)return Object(O.jsx)(v,{changeMainBadge:e=>t(e),mainBadge:e});window.location.href="/biky"}}),Object(O.jsx)(o.b,{path:"/biky/friend",render:()=>{if(b&&r)return Object(O.jsx)(ot,{friendRef:en.db.ref(b),frequestRef:en.db.ref(l),journalRef:en.db.ref(r)});window.location.href="/biky"}}),Object(O.jsx)(o.b,{path:"/biky/tutorial",render:()=>Object(O.jsx)(Ki,{})}),Object(O.jsx)(o.b,{path:"/biky/404",render:()=>Object(O.jsx)(Gi,{})}),Object(O.jsx)(o.a,{from:"*",to:"/biky/404"})]})]})})},an=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,516)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;i(e),n(e),a(e),r(e),c(e)}))};i(438);c.a.render(Object(O.jsx)(nn,{}),document.getElementById("root")),an()}},[[440,1,2]]]);
//# sourceMappingURL=main.caf8ab49.chunk.js.map